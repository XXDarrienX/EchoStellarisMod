
##################
#
# Utopia Events
#
##################

#ID 1 - 1999#

namespace = utopia

# Dyson Sphere completed
country_event = {
	id = utopia.4005
	title = utopia.4005.name
	desc = utopia.4005.desc
	picture = GFX_evt_dyson_sphere
	show_sound = event_dyson_sphere_build_complete
	location = FROMFROM

	is_triggered_only = yes

	trigger = {
		FROM = { is_megastructure_type = dyson_sphere_5 }
	}

	immediate = {
		set_country_flag = finished_dyson_sphere
		#every_relation = {
		#	limit = {
		#		is_ai = no
		#		has_communications = root
		#	}
		#	country_event = { id = utopia.4010 }
		#}
	}

	option = {
		name = utopia.4005.a
	}
}

# Alert Messages for intermediate steps
country_event = {
	id = utopia.4006
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = {
			OR = {
				is_megastructure_type = ring_world_1
				is_megastructure_type = ring_world_3_intermediate
				is_megastructure_type = dyson_sphere_0
				is_megastructure_type = dyson_sphere_3
				is_megastructure_type = dyson_sphere_4
				is_megastructure_type = spy_orb_0
				is_megastructure_type = spy_orb_2
				is_megastructure_type = spy_orb_3
				is_megastructure_type = think_tank_0
				is_megastructure_type = matter_decompressor_0
				is_megastructure_type = strategic_coordination_center_0
				is_megastructure_type = mega_art_installation_0
				is_megastructure_type = interstellar_assembly_0
			}
		}
	}

	immediate = {
		create_message = {
			type = MEGASTRUCTURE_UPGRADED
			localization = MESSAGE_MEGASTRUCTURE_UPGRADED
			days = 30
			target = fromfrom # the Go To # vfix - from doesn't do anything, at least fromfrom sets location to solar system
			variable = {
				type = name
				localization = MEGASTRUCTURE
				scope = from
			}
			variable = {
				type = name
				localization = SYSTEM
				scope = fromfrom
			}
		}
	}
}

# Alert Messages for initial step
country_event = {
	id = utopia.4007
	hide_window = yes
	is_triggered_only = yes

	#title = utopia.4010.name
	#desc = utopia.4010.desc
	#picture = GFX_evt_dyson_sphere
	#show_sound = event_mega_structure_other_empire_build_complete
	#location = FROMFROM

	trigger = {
		from = {
			OR = {
				#is_megastructure_type = gateway_0
				is_megastructure_type = matter_decompressor_0
				is_megastructure_type = strategic_coordination_center_0
				is_megastructure_type = mega_art_installation_0
				is_megastructure_type = interstellar_assembly_0
				is_megastructure_type = mega_shipyard_0
				is_megastructure_type = orbital_ring
			}
		}
	}

	immediate = {
		create_message = {
			type = MEGASTRUCTURE_BUILT
			localization = MESSAGE_MEGASTRUCTURE_BUILT
			days = 30
			target = fromfrom # the Go To # vfix - from doesn't do anything, at least fromfrom sets location to solar system
			variable = {
				type = name
				localization = MEGASTRUCTURE
				scope = from
			}
			variable = {
				type = name
				localization = SYSTEM
				scope = fromfrom
			}
		}
	}
}