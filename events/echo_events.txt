namespace = echo_events

country_event = {
    id = echo_events.1
    hide_window = yes
    is_triggered_only = yes
    
    immediate = {
        every_playable_country = {
            if = {
                limit = {
                    has_country_flag = nhsc_building_centralresearchbureau_built
                    any_owned_planet = {
                           NOT = {
                            has_building = nhsc_building_centralresearchbureau
                        }
                    }
                }
            remove_country_flag = nhsc_building_centralresearchbureau_built
        }
        if = {
            limit = {
                has_country_flag = nhsc_culture_nexus_built
                any_owned_planet = {
                    NOR = {
                        has_building = nhsc_building_culture_nexus
                        has_building = nhsc_building_cerebral_node
                        has_building = nhsc_building_network_regulator
                        }
                    }
                }
                remove_country_flag = nhsc_culture_nexus_built
            }
            if = {
                limit = {
                    has_country_flag = nhsc_advanced_materals_laboratory_built
                    any_owned_planet = {
                        NOT = {
                            has_building = nhsc_building_materials_laboratory
                        }
                    }
                }
                remove_country_flag = nhsc_advanced_materals_laboratory_built
            }
            if = {
                limit = {
                    has_country_flag = nhsc_technology_institute_built
                    any_owned_planet = {
                        NOT = {
                            has_building = nhsc_building_technology_institute
                        }
                    }
                }
                remove_country_flag = nhsc_technology_institute_built
            }
            if = {
                limit = {
                    has_country_flag = nhsc_watcher_of_eternity_built
                    any_owned_planet = {
                        NOT = {
                            has_building = nhsc_building_watcher
                        }
                    }
                }
                remove_country_flag = nhsc_watcher_of_eternity_built
            }
            if = {
                limit = {
                    has_country_flag = building_admincomplex_government_order_built
                    any_owned_planet = {
                        NOT = {
                            has_building = building_admincomplex_government_order
                            }
                        }
                    }
                    remove_country_flag = building_admincomplex_government_order_built
                }
            if = {
                limit = {
                    has_country_flag = building_admincomplex_executive_built
                    any_owned_planet = {
                        NOT = {
                            has_building = building_admincomplex_executive
                            }
                        }
                    }
                    remove_country_flag = building_admincomplex_executive_built
                }
            if = {
                limit = {
                    has_country_flag = building_admincomplex_government_improves_built
                    any_owned_planet = {
                        NOT = {
                            has_building = building_admincomplex_government_improves
                            }
                        }
                    }
                    remove_country_flag = building_admincomplex_government_improves_built
                }
            if = {
                limit = {
                    has_country_flag = building_admincomplex_government_recruitment_built
                    any_owned_planet = {
                         NOT = {
                            has_building = building_admincomplex_government_recruitment
                            }
                        }
                    }
                     remove_country_flag = building_admincomplex_government_recruitment_built
                }
            if = {
                limit = {
                    has_country_flag = building_gms_govseat_built
                    any_owned_planet = {
                            NOR = {
                                has_building = building_gms_govseat
                                has_building = building_gms_gesalt
                            }
                        }
                    }
                    remove_country_flag = building_gms_govseat_built
                }
            }
        }
    }

country_event = {
    id = echo_events.2
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        is_country_type = default
        has_valid_civic = civic_mega_brothel
    }

    immediate = {
        if = {
            limit = {
                count_relation = {
                    limit = {
                        has_commercial_pact = prev
                    }
                    count = 1
                }
            }
           root = { add_modifier = {
                modifier = brothel_growth_commercial_pact
                days = 30
                }
           }
        }
        if = {
            limit = {
                count_relation = {
                    limit = {
                        has_commercial_pact = prev
                    }
                    count = 2
                }
            }
            add_modifier = {
                modifier = brothel_growth_commercial_pact_2
                days = 30
            }
        }
        if = {
            limit = {
                count_relation = {
                    limit = {
                        has_commercial_pact = prev
                    }
                    count = 2
                }
            }
            add_modifier = {
                modifier = brothel_growth_commercial_pact_3
                days = 30
            }
        }
        if = {
            limit = {
                count_relation = {
                    limit = {
                        has_commercial_pact = prev
                    }
                    count = 2
                }
            }
            add_modifier = {
                modifier = brothel_growth_commercial_pact_4
                days = 30
            }
        }
    }
}

country_event = {
    id = echo_events.3
    title = "resolution_rulesofwar_jump_drive_ban"
    desc = federations.10110.desc
    picture = GFX_evt_galactic_senate
    show_sound = event_factions
    is_triggered_only = yes

    option = {
        name = FED_WE_MUST_COMPLY
        #set_policy = {
        #    policy = jump_drive_policy
        #    option = jump_drive_enabled
        #    cooldown = yes
        #}
    }
    option = {
        name = FED_WE_WILL_NOT_SUBMIT

        add_monthly_resource_mult = {
			resource = unity
			value = @tier1unityreward
			min = @tier1unitymin
			max = @tier1unitymax
        }
        custom_tooltip = "FED_WE_WILL_BE_IN_BREACH"
    }
}

event = {
    id = echo_events.4
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        country_event = {
            id = marauder.500
            days = 3600
            random = 1800
        }
    }
}

country_event = {
    id = echo_events.5
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_country_flag = game_host
    }

    immediate = {
        set_faction_hostility = {
                target = event_target:extradimensionals
                set_friendly = yes
        }
        set_faction_hostility = {
                target = event_target:portal_holder_1
                set_friendly = yes
        }
    }
}


country_event = {
	id = echo_events.6
	hide_window = yes
    is_triggered_only = yes

	immediate = {
		this = {
            fromfrom = {
                set_timed_fleet_flag = {
                    flag = echo_jump_cooldown
                    days = 30
                }
            }
        }
	}
}

country_event = {
	id = echo_events.7
	hide_window = yes
    is_triggered_only = yes

	immediate = {
        modify_species = {
            species = event_target:new_robotic_species
            add_trait = trait_gpm_forgotten_species
        }
	}
}

fleet_event = {
	id = echo_events.8
	hide_window = yes
    is_triggered_only = yes

	immediate = {
        this = {
            add_modifier = {
                modifier = echo_gateway_penalty
                days = 60
            }
            add_modifier = {
                modifier = echo_gateway_penalty_2
                days = 15
            }
        }
	}
}

planet_event = {
    id = echo_events.9
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        change_pc = pc_shrouded_paradise
		set_planet_entity = {
			entity = "shrouded_paradise"
			graphical_culture = owner
		}
    }
}