namespace = meaorigins

event = {
	id = meaorigins.01
	hide_window = yes
	is_triggered_only = yes
		
	trigger = {
		NOT	= {
			has_global_flag = randomized_depths_flag
		} 
		any_country = {
			has_origin = origin_deep_dwellers
		}
	}

	immediate = {
		every_system = {
			limit = {
				NOT = {
					exists = owner
				}
			}
			every_system_planet = {
				limit = {
					NOT = {
						exists = owner
					}
					is_colonizable = yes
				}
				random_list = {
					20 = {}
					1 = {
						modifier = {
							factor = 15
							is_planet_class = pc_ocean
						}
						modifier = {
							factor = 2
							has_climate = wet
						}
						modifier = {
							factor = 0.5
							has_climate = dry
						}
						if = {
							limit = {
								NOT = {
									has_modifier = crushing_depths_mod
								} 
							}
							add_modifier = {
								modifier = crushing_depths_mod
							}
						}
				
					}
				}
			}
		}
		set_global_flag = randomized_depths_flag
	}
}

country_event = {
	id = meaorigins.02
	hide_window = yes
	is_triggered_only = yes
		
	trigger = {
		NOT	= {
			has_country_flag = set_depths_flag
		} 
		has_origin = origin_deep_dwellers
	}

	immediate = {
		every_owned_planet = {
			if = {
				limit = {
					NOT = {
						has_modifier = crushing_depths_mod
					} 
					any_owned_pop = {
						has_trait = trait_deep_dwellers
					}
				}
				add_modifier = {
					modifier = crushing_depths_mod
				}
			}
		}
		set_country_flag = set_depths_flag
	}
}
