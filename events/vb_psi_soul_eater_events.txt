namespace = vb_psi_souleater


country_event = {
    id = vb_psi_souleater.0
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        every_country = {
			limit = { 
				is_ai = no
                NOT = { has_origin = civic_vb_psi_soul_eater }
			}
			country_event = { id = vb_psi_souleater.5 days = 10800 }
		}
    }
}

#Initial setting for soul eaters
country_event = {
    id = vb_psi_souleater.1
    title = vb_psi_souleater.1.name
    desc = vb_psi_souleater.1.desc
    picture = GFX_evt_psionics
	is_triggered_only = yes
	
	trigger = { has_origin = civic_vb_psi_soul_eater }
	
	immediate = {
		add_modifier = {
			modifier = vb_psi_starting_food
			days = 10800
        }
        country_event = {
            id = vb_psi_souleater.6
            days = 10800 
		}
	}
	
    option = {
        name = OK
    }
}

#Kills Soul Eater Pops that are starving per year
planet_event = {
	id = vb_psi_souleater.2
	is_triggered_only = yes
	hide_window = yes

	trigger = { 
		has_origin = civic_vb_psi_soul_eater
		has_deficit = soul_crystals
		is_at_war = no
	}

	immediate = {
		random_owned_planet = {
            limit = {
                num_pops > 5
            }
            random_owned_pop = {
                limit = {
                    pop_has_trait = trait_vb_psi_soul_eater
                    }
                kill_pop = yes
            }
        }
        create_message = {
			type = MESSAGE_TYPE_SOULEATER_POP_DIED
			localization = MESSAGE_SOULEATER_POP_DIED_DESC
			days = 30
			target = this
				variable = {
					type = name
					localization = PLANET
					scope = this
				}	
		}
	}
}

#Soul Diet Harmony
country_event = {
	id = vb_psi_souleater.3
	is_triggered_only = yes
    hide_window = yes
    
    immediate = {
        every_playable_country = {
            limit = {
				this = { has_origin = civic_vb_psi_soul_eater }
            }
            IF = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 2
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 1
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 3
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 2
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 4
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 3
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 5
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 4
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 6
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 5
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 7
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 6
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 8
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 7
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 9
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 8
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count = 10
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 9
                    days = 360
                }
            }
            else_if = {
                limit = {
                    count_species = {
                        limit = { 
                            is_robotic_species = no
                        }
                        count >= 11
                    }
                }
                add_modifier = {
                    modifier = soul_diet
                    multiplier = 10
                    days = 360
                }
            }
		}
	}
}

country_event = {
    id = vb_psi_souleater.5
    title = vb_psi_souleater.5.name
	desc = vb_psi_souleater.5.desc
    is_triggered_only = yes
    fire_only_once = yes
    picture = GFX_evt_psionics
    show_sound = event_the_great_awakening

	option = {
		name = OK
	}
}

country_event = {
	id = vb_psi_souleater.6
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
        every_playable_country = {
            limit = {
                has_origin = civic_vb_psi_soul_eater
            }
            add_modifier = {
                modifier = vb_psi_food_level_1
                days = 3600
            }
        }
	}
}

country_event = {
    id = vb_psi_souleater.7
    title = vb_psi_souleater.7.name
	desc = vb_psi_souleater.7.desc
    is_triggered_only = yes
    fire_only_once = yes
    picture = GFX_evt_psionics
    show_sound = event_the_great_awakening

    trigger = {
        has_origin = civic_vb_psi_soul_eater
    }

	option = {
        name = "Gift 1"
            add_modifier = {
                modifier = strangers_contract_1
                days = -1
            }
            set_country_flag = strangers_contract
    }
    option = {
        name = "Gift 2"
            add_modifier = {
                modifier = strangers_contract_2
                days = -1
            }
            set_country_flag = strangers_contract
    }
    option = {
        name = "Gift 3"
            add_modifier = {
                modifier = strangers_contract_3
                days = -1
            }
            set_country_flag = strangers_contract
    }
    option = {
        name = "Gift 4"
            add_modifier = {
                modifier = strangers_contract_4
                days = -1
            }
            set_country_flag = strangers_contract
    }
}

country_event = {
    id = vb_psi_souleater.9
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        every_playable_country = {
			limit = { 
				is_ai = no
                NOT = { has_origin = civic_vb_psi_soul_eater }
			}
			country_event = { id = vb_psi_souleater.10 }
		}
    }
}

country_event = {
    id = vb_psi_souleater.10
    title = vb_psi_souleater.10.name
	desc = vb_psi_souleater.10.desc
    is_triggered_only = yes
    picture = GFX_evt_psionics
    show_sound = event_the_great_awakening

	option = {
        name = Disconcerting
        trigger = {
            NOT = { has_authority = auth_machine_intelligence }
        }
    }
    option = {
        name = vb_psi_souleater.10.b
        trigger = {
            has_authority = auth_machine_intelligence
        }
    }
}

country_event = {
    id = vb_psi_souleater.11
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        every_playable_country = {
			limit = { 
				is_ai = no
                NOT = { has_origin = civic_vb_psi_soul_eater }
			}
			country_event = { id = vb_psi_souleater.12 }
		}
    }
}

country_event = {
    id = vb_psi_souleater.12
    title = vb_psi_souleater.12.name
	desc = vb_psi_souleater.12.desc
    is_triggered_only = yes
    picture = GFX_evt_psionics
    show_sound = event_the_great_awakening

	option = {
		name = "Understood"
	}
}