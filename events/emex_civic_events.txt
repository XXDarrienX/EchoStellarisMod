################################
#
# Civic Events
#
# Written by MadeinCanada10
#
###############################
namespace = civic

#CS into Alloys Edict: Activation
country_event = {
	id = civic.1
	title = "civic.1.name"
	desc = "civic.1.desc"
	picture = GFX_evt_small_space_battle
	show_sound = event_activating_unknown_technology
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.1.a" #10%
		custom_tooltip = wareco_10
		# Works out and subtracts CG amount
		export_resource_stockpile_to_variable = {
			resource = consumer_goods
			variable = wareco_cg_num
		}
		divide_variable = {
			which = wareco_cg_num
			value = 10
		}
		add_resource = {
			consumer_goods = -1
			mult = wareco_cg_num
		}
		# Works out and adds alloy amount
		divide_variable = {
			which = wareco_cg_num
			value = 2
		}
		add_resource = {
			alloys = 1
			mult = wareco_cg_num
		}
	}
	option = {
		name = "civic.1.b" #25%
		custom_tooltip = wareco_25
		# Works out and subtracts CG amount
		export_resource_stockpile_to_variable = {
			resource = consumer_goods
			variable = wareco_cg_num
		}
		divide_variable = {
			which = wareco_cg_num
			value = 4
		}
		add_resource = {
			consumer_goods = -1
			mult = wareco_cg_num
		}
		# Works out and adds alloy amount
		divide_variable = {
			which = wareco_cg_num
			value = 2
		}
		add_resource = {
			alloys = 1
			mult = wareco_cg_num
		}
	}
	option = {
		name = "civic.1.c" #50%
		custom_tooltip = wareco_50
		# Works out and subtracts CG amount
		export_resource_stockpile_to_variable = {
			resource = consumer_goods
			variable = wareco_cg_num
		}
		divide_variable = {
			which = wareco_cg_num
			value = 2
		}
		add_resource = {
			consumer_goods = -1
			mult = wareco_cg_num
		}
		# Works out and adds alloy amount
		divide_variable = {
			which = wareco_cg_num
			value = 2
		}
		add_resource = {
			alloys = 1
			mult = wareco_cg_num
		}
	}
	option = {
		name = "civic.1.d" #75%
		custom_tooltip = wareco_75
		# Works out and subtracts CG amount
		export_resource_stockpile_to_variable = {
			resource = consumer_goods
			variable = wareco_cg_num
		}
		divide_variable = {
			which = wareco_cg_num
			value = 4
		}
		multiply_variable = {
			which = wareco_cg_num
			value = 3
		}
		add_resource = {
			consumer_goods = -1
			mult = wareco_cg_num
		}
		# Works out and adds alloy amount
		divide_variable = {
			which = wareco_cg_num
			value = 2
		}
		add_resource = {
			alloys = 1
			mult = wareco_cg_num
		}
	}
	option = {
		name = "civic.1.e" #100%
		custom_tooltip = wareco_100
		# Works out and subtracts CG amount
		export_resource_stockpile_to_variable = {
			resource = consumer_goods
			variable = wareco_cg_num
		}
		add_resource = {
			consumer_goods = -1
			mult = wareco_cg_num
		}
		# Works out and adds alloy amount
		divide_variable = {
			which = wareco_cg_num
			value = 2
		}
		add_resource = {
			alloys = 1
			mult = wareco_cg_num
		}
	}
}

#Winning a Peacekeeping War
country_event = {
	id = civic.2
	title = "civic.2.name"
	desc = "civic.2.desc"
	picture = GFX_evt_signing
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.2.a"
		random_country = {
			limit = {
				has_country_flag = peacekeeper_victim
			}
			shift_ethic = ethic_fanatic_pacifist
			shift_ethic = ethic_xenophile
			hidden_effect = {
				remove_country_flag = peacekeeper_victim
			}
		}
	}
	option = {
		name = "civic.2.b"
		random_country = {
			limit = {
				has_country_flag = peacekeeper_victim
			}
			if = {
				limit = {
					NOR = {
						has_ethic = ethic_militarist
						has_ethic = ethic_fanatic_militarist
					}
				}
				shift_ethic = ethic_militarist
			}
			change_government = {
				civics = {
					civic = civic_emex_peacekeepers
					civic = civic_military_academies
				}
			
			}
			hidden_effect = {
				remove_country_flag = peacekeeper_victim
			}
		}
		add_resource = { influence = -75 }
	}
	option = {
		name = "civic.2.c"
		random_country = {
			limit = {
				has_country_flag = peacekeeper_victim
			}
			if = {
				limit = {
					OR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				shift_ethic = ethic_xenophile
			}
			join_alliance = { who = root override_requirements = yes }
			hidden_effect = {
				remove_country_flag = peacekeeper_victim
			}
		}
		add_resource = { influence = -100 }
	}
}

#Strengthen Diversity decision ended
planet_event = {
	id = civic.3
	title = "civic.3.name"
	desc = "civic.3.desc"
	picture = GFX_evt_atmospheric_entry
	location = root
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.3.a"
	}
}

#Strengthen Diversity decision reset
planet_event = {
	id = civic.4
	title = "civic.4.name"
	desc = "civic.4.desc"
	picture = GFX_evt_atmospheric_entry
	location = root
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.4.a"
		root = {
			remove_planet_flag = diversity_strengthened
		}
		custom_tooltip = can_strengthen_diversity
	}
}

# CIVIC FACTIONS #
# Mediators Faction Formed
country_event = {
	id = civic.5
	title = "civic.5.name"
	desc = "civic.5.desc"
	picture = GFX_evt_civil_action
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.5.a"
		custom_tooltip = mediators_formed
	}
}

### SCRAPPED ###
# # Mechanicus Faction Formed
# country_event = {
# 	id = civic.6
# 	title = "civic.6.name"
# 	desc = "civic.6.desc"
# 	picture = GFX_evt_civil_action
	
# 	is_triggered_only = yes
	
# 	immediate = {
# 	}
	
# 	option = {
# 		name = "civic.6.a"
# 		custom_tooltip = mechanicus_formed
# 	}
# }

# # Nihilist Faction Formed
# country_event = {
# 	id = civic.7
# 	title = "civic.7.name"
# 	desc = "civic.7.desc"
# 	picture = GFX_evt_civil_action
	
# 	is_triggered_only = yes
	
# 	immediate = {
# 	}
	
# 	option = {
# 		name = "civic.7.a"
# 		custom_tooltip = nihilists_formed
# 	}
# }

# Colony finished (AnTy)
planet_event = {
	id = civic.8
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		owner = { has_valid_civic = civic_anarcho_tyranny }
		NOT = { has_deposit = d_anty_colony_deposit }
	}
	
	immediate = {
		planet_event = { id = civic.9 days = 1800 }
	}
}

# Colony finished (AnTy) - Deposit Provided
planet_event = { #maybe not hide the event
	id = civic.9
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		owner = { has_valid_civic = civic_anarcho_tyranny }
		NOT = { has_deposit = d_anty_colony_deposit }
	}
	
	immediate = {
		add_deposit = d_anty_colony_deposit
	}
}

# Heads Convened (Machinarchy)
planet_event = {
	id = civic.10
	title = "civic.10.name"
	desc = "civic.10.desc"
	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	trigger = {
		owner = {
			has_valid_civic = civic_machinarchy
			has_policy_flag = artificial_aristocracy
		}
	}

	immediate = {
	}
	
	option = {
		name = "civic.10.a" #food
		set_planet_flag = machinarchy_aa_food
		custom_tooltip = machinarchy_aa_food_tt
	}
	option = {
		name = "civic.10.b" #energy
		set_planet_flag = machinarchy_aa_energy
		custom_tooltip = machinarchy_aa_energy_tt
	}
	option = {
		name = "civic.10.c" #minerals
		set_planet_flag = machinarchy_aa_minerals
		custom_tooltip = machinarchy_aa_minerals_tt
	}
	option = {
		name = "civic.10.d" #alloys
		set_planet_flag = machinarchy_aa_alloys
		custom_tooltip = machinarchy_aa_alloys_tt
	}
	option = {
		name = "civic.10.e" #CGs
		set_planet_flag = machinarchy_aa_cgs
		custom_tooltip = machinarchy_aa_cgs_tt
	}
}

# Machinarchy - AA adopted (set default)
country_event = {
	id = civic.11
	title = "civic.11.name"
	desc = "civic.11.desc"
	picture = GFX_evt_board_meeting
	
	is_triggered_only = yes
	
	trigger = {
		has_valid_civic = civic_machinarchy
		last_changed_policy = machine_strata
		has_policy_flag = artificial_aristocracy
	}
	
	immediate = {
	}
	
	option = {
		name = "civic.11.a" #food
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_food
		}
		custom_tooltip = machinarchy_aa_food_tt
	}
	option = {
		name = "civic.11.b" #energy
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_energy
		}
		custom_tooltip = machinarchy_aa_energy_tt
	}
	option = {
		name = "civic.11.c" #minerals
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_minerals
		}
		custom_tooltip = machinarchy_aa_minerals_tt
	}
	option = {
		name = "civic.11.d" #alloys
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_alloys
		}
		custom_tooltip = machinarchy_aa_alloys_tt
	}
	option = {
		name = "civic.11.e" #CGs
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_cgs
		}
		custom_tooltip = machinarchy_aa_cgs_tt
	}
	option = {
		name = "civic.11.f" # Set individually
		custom_tooltip = machinarchy_aa_custom_tt
	}
}

# Machinarchy - AA (edict to change)
country_event = {
	id = civic.12
	title = "civic.11.name"
	desc = "civic.11.desc"
	picture = GFX_evt_board_meeting
	
	is_triggered_only = yes
	
	trigger = {
		has_valid_civic = civic_machinarchy
	}
	
	immediate = {
	}
	
	option = {
		name = "civic.11.a" #food
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_food
		}
		custom_tooltip = machinarchy_aa_food_tt
	}
	option = {
		name = "civic.11.b" #energy
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_energy
		}
		custom_tooltip = machinarchy_aa_energy_tt
	}
	option = {
		name = "civic.11.c" #minerals
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_minerals
		}
		custom_tooltip = machinarchy_aa_minerals_tt
	}
	option = {
		name = "civic.11.d" #alloys
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_alloys
		}
		custom_tooltip = machinarchy_aa_alloys_tt
	}
	option = {
		name = "civic.11.e" #CGs
		every_owned_planet = {
			hidden_effect = { machinarchy_aa_reset = yes }
			set_planet_flag = machinarchy_aa_cgs
		}
		custom_tooltip = machinarchy_aa_cgs_tt
	}
	option = {
		name = "civic.12.f" # Set individually
		custom_tooltip = machinarchy_aa_custom_tt
	}
}

#12.5 - situation begins
#13 - midway thru
#14 - cannot cancel
#15 - little succcess
#16 - partial success
#17 - success

#18 - (EE) info about data may be leaked
#19 - empire demands we stop/very harshly
#20 - (EE) event about us standing down/continuing (CB?)
#21 - empire gives resources to stop
#22 - (EE) response from us
#23 - empire requests nicely to stop
#24 - (EE) response from us

#AnTy - Reform?
country_event = {
	id = civic.30
	title = "civic.30.name"
	desc = "civic.30.desc"
	picture = GFX_evt_tradedeal
	
	is_triggered_only = yes

	trigger = {
		has_valid_civic = civic_anarcho_tyranny
	}
	
	immediate = {
	}
	
	option = {
		name = "civic.30.a" # Nah
		add_resource = {
			influence = 250
			unity = 5000
		}
	}

	option = {
		name = "civic.30.b" # Dictatorship
		force_remove_civic = civic_anarcho_tyranny
		force_add_civic = civic_warrior_culture
		change_government = {
			authority = auth_dictatorial
			cooldown = no
		}
		hidden_effect = {
			anty_remove_effect = yes
		}
	}

	option = {
		name = "civic.30.c" # Imperial
		force_remove_civic = civic_anarcho_tyranny
		force_add_civic = civic_warrior_culture
		change_government = {
			authority = auth_imperial
			cooldown = no
		}
		hidden_effect = {
			anty_remove_effect = yes
		}
	}

	option = {
		name = "civic.30.d" # MegaCorp
		trigger = {
			host_has_dlc = "Megacorp"
		}
		allow = {
			NOT = {
				has_ethic = ethic_fanatic_authoritarian
			}
		}
		change_government = {
			authority = auth_corporate
			civics = { civic = civic_indentured_assets civic = civic_constant_growth }
			cooldown = no
		}
		hidden_effect = {
			anty_remove_effect = yes
		}
	}
}

#Sovereign Nations; decision finished
planet_event = {
	id = civic.31
	title = "civic.31.name"
	desc = "civic.31.desc"
	picture = GFX_evt_tradedeal
	location = root
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.31.a"
		add_modifier = {
			modifier = sn_dealing_with_nation
			days = 720
			clear_on_owner_change = yes
		}
	}
}

#Sovereign Nations; nation dealt with
planet_event = {
	id = civic.32
	title = "civic.32.name"
	desc = "civic.32.desc"
	picture = GFX_evt_partition
	location = root
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = { # Invade state
		name = "civic.32.a"
		owner = {
			add_resource = {
				minerals = -500
				alloys = -200
			}
		}
		custom_tooltip = sn_war_option
		hidden_effect = {
			random_list = {
				25 = {
					#it works; replaced by occupied zone
					modifier = {
						factor = 2
						has_planet_flag = neutral_state_dealt
					}
					modifier = {
						factor = 1.5
						has_planet_flag = antagonistic_state_dealt
					}

					# Government Factors #
					# Civics
					modifier = {
						factor = 1.2
						owner = { has_valid_civic = civic_barbaric_despoilers }
					}
					modifier = {
						factor = 1.1
						owner = { has_valid_civic = civic_citizen_service }
					}
					modifier = {
						factor = 1.25
						owner = { has_valid_civic = civic_fanatic_purifiers }
					}
					modifier = {
						factor = 1.15
						owner = { has_valid_civic = civic_nationalistic_zeal }
					}
					modifier = {
						factor = 1.1
						owner = { has_valid_civic = civic_warrior_culture }
					}
					# Ethics
					modifier = {
						factor = 1.1
						owner = { has_ethic = ethic_militarist }
					}
					modifier = {
						factor = 1.25
						owner = { has_ethic = ethic_fanatic_militarist }
					}
					modifier = {
						factor = 1.05
						owner = { has_ethic = ethic_xenophobe }
					}
					modifier = {
						factor = 1.15
						owner = { has_ethic = ethic_fanatic_xenophobe }
					}
					# Traditions
					modifier = {
						factor = 1.25
						owner = { has_tradition = tr_supremacy_finish }
					}
					modifier = {
						factor = 1.15
						owner = { has_tradition = tr_domination_finish }
					}
					modifier = {
						factor = 1.05
						owner = { has_tradition = tr_unyielding_finish }
					}
					add_deposit = d_sn_occupied_zone
					planet_event = {
						id = civic.33
						days = 180
						random = 180
					}
				}
				25 = {
					#it fails; relations remain the same
					modifier = {
						factor = 1.5
						has_planet_flag = antagonistic_state_dealt
					}
					modifier = {
						factor = 1.5
						has_planet_flag = threatening_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
				}
				25 = {
					#it fails; relations worsen
					modifier = {
						factor = 2
						has_planet_flag = neutral_state_dealt
					}
					modifier = {
						factor = 0
						has_planet_flag = threatening_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
				}
				25 = {
					#partial success; theyre weakened
					modifier = {
						factor = 0
						has_planet_flag = neutral_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
				}
			}
		}
	}
	option = { # Give resources to state
		name = "civic.32.b"
		owner = {
			add_resource = {
				energy = -1000
				consumer_goods = -500
			}
		}
		custom_tooltip = sn_money_option
		hidden_effect = {
			random_list = {
				25 = {
					#they accept; relations improve
					modifier = {
						factor = 2
						has_planet_flag = neutral_state_dealt
					}
					modifier = {
						factor = 0.5
						has_planet_flag = threatening_state_dealt
					}

					# Government Factors #
					# Civics
					modifier = {
						factor = 1.25
						owner = { has_valid_civic = civic_corporate_dominion }
					}
					modifier = {
						factor = 1.2
						owner = { has_valid_civic = civic_crafters }
					}
					modifier = {
						factor = 1.15
						owner = { has_valid_civic = civic_merchant_guilds }
					}
					modifier = {
						factor = 1.15
						owner = { has_valid_civic = civic_relentless_industrialists }
					}
					modifier = {
						factor = 1.1
						owner = { has_valid_civic = civic_mining_guilds }
					}
					# Ethics
					modifier = {
						factor = 1.1
						owner = { has_ethic = ethic_materialist }
					}
					modifier = {
						factor = 1.25
						owner = { has_ethic = ethic_fanatic_materialist }
					}
					modifier = {
						factor = 1.05
						owner = { has_ethic = ethic_xenophile }
					}
					modifier = {
						factor = 1.15
						owner = { has_ethic = ethic_fanatic_xenophile }
					}
					# Traditions
					modifier = {
						factor = 1.25
						owner = { has_tradition = tr_mercantile_finish }
					}
					modifier = {
						factor = 1.15
						owner = { has_tradition = tr_prosperity_finish }
					}
					modifier = {
						factor = 1.05
						owner = { has_tradition = tr_adaptability_finish }
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_deposit = d_sn_cooperative_nation
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
				}
				25 = {
					#they reject; relations remain the same
					modifier = {
						factor = 0.5
						has_planet_flag = neutral_state_dealt
					}
					modifier = {
						factor = 0.5
						has_planet_flag = antagonistic_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
				}
				# 25 = {
				# 	#they reject; relations worsen
				# 	modifier = {
				# 		factor = 0
				# 		has_planet_flag = neutral_state_dealt
				# 	}
				# 	modifier = {
				# 		factor = 0.25
				# 		has_planet_flag = antagonistic_state_dealt
				# 	}
				# 	modifier = {
				# 		factor = 0.5
				# 		has_planet_flag = threatening_state_dealt
				# 	}
				# }
				25 = {
					#they accept but relations dont improve
					owner = {
						add_resource = {
							energy = -2000
							minerals = -1000
						}
					}
					modifier = {
						factor = 0.5
						has_planet_flag = antagonistic_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
				}
			}
		}
	}
	option = { # Improve relations with state
		name = "civic.32.c"
		owner = {
			add_resource = {
				unity = -150
				influence = -50
			}
		}
		custom_tooltip = sn_diplomacy_option
		hidden_effect = {
			random_list = {
				25 = {
					#it works; relations improve
					modifier = {
						factor = 2
						has_planet_flag = neutral_state_dealt
					}
					modifier = {
						factor = 0.5
						has_planet_flag = threatening_state_dealt
					}

					# Government Factors #
					# Civics
					modifier = {
						factor = 1.25
						owner = { has_valid_civic = civic_diplomatic_corps }
					}
					modifier = {
						factor = 1.15
						owner = { has_valid_civic = civic_shadow_council }
					}
					modifier = {
						factor = 1.15
						owner = { has_valid_civic = civic_philosopher_king }
					}
					modifier = {
						factor = 1.1
						owner = { has_valid_civic = civic_idealistic_foundation }
					}
					modifier = {
						factor = 1.1
						owner = { has_valid_civic = civic_cutthroat_politics }
					}
					# Ethics
					modifier = {
						factor = 1.1
						owner = { has_ethic = ethic_xenophile }
					}
					modifier = {
						factor = 1.25
						owner = { has_ethic = ethic_fanatic_xenophile }
					}
					modifier = {
						factor = 1.05
						owner = { has_ethic = ethic_egalitarian }
					}
					modifier = {
						factor = 1.15
						owner = { has_ethic = ethic_fanatic_egalitarian }
					}
					# Traditions
					modifier = {
						factor = 1.25
						owner = { has_tradition = tr_diplomacy_finish }
					}
					modifier = {
						factor = 1.15
						owner = { has_tradition = tr_harmony_finish }
					}
					modifier = {
						factor = 1.1
						owner = { has_tradition = tr_politics_finish }
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_deposit = d_sn_cooperative_nation
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
				}
				25 = {
					#it fails; relations remain the same
					modifier = {
						factor = 1.5
						has_planet_flag = threatening_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_blocker = {
							type = d_sn_neutral_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
				}
				25 = {
					#it fails; relations worsen
					modifier = {
						factor = 0
						has_planet_flag = neutral_state_dealt
					}
					modifier = {
						factor = 0.75
						has_planet_flag = antagonistic_state_dealt
					}
					modifier = {
						factor = 0.5
						has_planet_flag = threatening_state_dealt
					}
					if = {
						limit = {
							has_planet_flag = neutral_state_dealt
						}
						add_blocker = {
							type = d_sn_antagonistic_nation
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = antagonistic_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
					else_if = {
						limit = {
							has_planet_flag = threatening_state_dealt
						}
						add_blocker = {
							type = d_sn_threatening_state
							blocked_deposit = none
						}
					}
				}
				# 25 = {
				# 	#big success
				# 	modifier = {
				# 		factor = 0.5
				# 		has_planet_flag = antagonistic_state_dealt
				# 	}
				# 	modifier = {
				# 		factor = 0
				# 		has_planet_flag = threatening_state_dealt
				# 	}
				# }
			}
		}
	}
}

#Sovereign Nations; occupied zone replaced by cooperative nation
planet_event = {
	id = civic.33
	title = "civic.33.name"
	desc = "civic.33.desc"
	picture = GFX_evt_tradedeal
	location = root
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	option = {
		name = "civic.33.a"
		remove_deposit = d_sn_occupied_zone
		add_deposit = d_sn_cooperative_nation
	}
}

#Defender of the Faith - spread the faith operation
espionage_operation_event = {
	id = civic.34
	title = operation_spread_faith
	desc = {
		text = civic.34.goodoutcome
		trigger = {
			OR = {
				has_espionage_operation_flag = outcome_stf_great
				has_espionage_operation_flag = outcome_stf_good
				has_espionage_operation_flag = outcome_stf_ok
			}
		}
	}
	desc = {
		text = civic.34.badoutcome
		trigger = {
			has_espionage_operation_flag = outcome_stf_backfired
		}
	}

	picture = GFX_evt_alien_propaganda
	show_sound = event_espionage_concluded
	espionage_operation = yes
	is_triggered_only = yes

	trigger = {
		exists = from
	}

	immediate = {
		random_list = {
			15 = {
				set_espionage_operation_flag = outcome_stf_great
			}
			30 = {
				set_espionage_operation_flag = outcome_stf_good
			}
			20 = {
				set_espionage_operation_flag = outcome_stf_ok
			}
			5 = {
			 	set_espionage_operation_flag = outcome_stf_backfired
			}
		}
	}

	option = {
		name = civic.34.a
		if = {
			limit = {
				has_espionage_operation_flag = outcome_stf_great
			}
			owner = {
				add_monthly_resource_mult  = {
					resource = unity
					value = 5
				}
			}
			from = {
				add_modifier = {
					modifier = stf_effect1
					days = 1800
				}
			}
		}
		else_if = {
			limit = {
				has_espionage_operation_flag = outcome_stf_good
			}
			owner = {
				add_monthly_resource_mult  = {
					resource = unity
					value = 3
				}
			}
			from = {
				add_modifier = {
					modifier = stf_effect1
					days = 1080
				}
			}
		}
		else_if = {
			limit = {
				has_espionage_operation_flag = outcome_stf_ok
			}
			owner = {
				add_monthly_resource_mult  = {
					resource = unity
					value = 2
				}
			}
			from = {
				add_modifier = {
					modifier = stf_effect2
					days = 1080
				}
			}
		}
		else_if = {
			limit = {
				has_espionage_operation_flag = outcome_stf_backfired
			}
			owner = {
				add_resource = {
					energy = -1000
				}
				add_modifier = {
					modifier = stf_effect_backfired
					days = 1080
				}
			}
		}
		else = {
			owner = {
				add_resource = {
					unity = 5
				}
			}
		}
	}
}

# Seekers of Knowledge - Unity Boon
country_event = {
	id = civic.35
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_valid_civic = civic_seekers_of_knowledge
			has_valid_civic = civic_hive_tech_driven
		}
	}
	#on_action - on_tech_increased
	
	immediate = {
		# If num of techs of this tier researched is more than the
		# variable's amount, unity is given and variable reset
		if = { #T3
			limit = {
				num_researched_techs_of_tier = {
					tier = 3
					value > sok_t3@root
				}
			}
			add_monthly_resource_mult  = {
				resource = unity
				value = 1
			}
			change_variable = {
				which = sok_t3@root
				value = 1
			}
			# while = {
			# 	limit = {
			# 		check_variable = {
			# 			which = sok@root_t3
			# 			value < t3techs
			# 		}
			# 	}
			# }
		}
		else_if = { #T4
			limit = {
				num_researched_techs_of_tier = {
					tier = 4
					value > sok_t4@root
				}
			}
			add_monthly_resource_mult  = {
				resource = unity
				value = 2
			}
			change_variable = {
				which = sok_t4@root
				value = 1
			}
		}
		else_if = { #T5
			limit = {
				num_researched_techs_of_tier = {
					tier = 5
					value > sok_t5@root
				}
			}
			add_monthly_resource_mult  = {
				resource = unity
				value = 3
			}
			change_variable = {
				which = sok_t5@root
				value = 1
			}
		}

		if = { #RARE
			limit = {
				num_rare_techs > sok_rare@root
			}
			add_monthly_resource_mult  = {
				resource = unity
				value = 2
			}
			change_variable = {
				which = sok_rare@root
				value = 1
			}
		}

		if = { #DANGEROUS
			limit = {
				OR = {
					last_increased_tech = tech_synthetic_workers
					last_increased_tech = tech_combat_computers_3
					last_increased_tech = tech_jump_drive_1
					last_increased_tech = tech_psi_jump_drive_1
				}
			}
			add_monthly_resource_mult  = {
				resource = unity
				value = 2
			}
			change_variable = {
				which = sok_dangerous@root
				value = 1
			}
		}

		# The rare and danger bonuses stack with the tier bonuses
	}
}

# Masters of Architecture - Building the Monument
country_event = {
	id = civic.36
	title = "civic.36.name"
	desc = "civic.36.desc"
	picture = GFX_evt_ancient_alien_temple
	
	is_triggered_only = yes
	
	trigger = {
		has_valid_civic = civic_masters_of_architecture
		NOT = {
			has_country_flag = moa_set_up_complete
		}
	}
	#on_action - on_post_government_changed
	
	immediate = {
	}

	option = {
		name = civic.36.a
		capital_scope = {
			enable_special_project = {
				name = "MOA_ADOPTION"
				location = this
				owner = root.owner
			}
		}
	}
}

# Masters of Architecture - Completed
country_event = {
	id = civic.37
	title = "civic.36.name"
	desc = "civic.37.desc"
	picture = GFX_evt_grand_speech
	
	is_triggered_only = yes
	
	trigger = {
		has_valid_civic = civic_masters_of_architecture
		NOT = {
			has_country_flag = moa_set_up_complete
		}
	}
	
	immediate = {
		set_country_flag = moa_set_up_complete
	}

	option = {
		name = civic.37.a
		add_resource = {
			influence = 100
			energy = 2000
		}
		capital_scope = {
			add_deposit = "d_great_monument"
		}
	}
}

# CoP - Ruler death (hidden)
country_event = {
	id = civic.38
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		from = {
			is_same_value = root.ruler
		}
		has_valid_civic = civic_personality_cult
	}
	
	immediate = {
		random_list = {
			25 = {
				set_timed_country_flag = {
					flag = cop_beloved_ruler
					days = 60
				}
			}
			25 = {
				set_timed_country_flag = {
					flag = cop_respected_ruler
					days = 60
				}
			}
			25 = {
				set_timed_country_flag = {
					flag = cop_ok_ruler
					days = 60
				}
			}
			25 = {
				set_timed_country_flag = {
					flag = cop_bad_ruler
					days = 60
				}
			}
		}
		country_event = {
			id = civic.39 days = 1
		}
	}
}

# CoP - Ruler death
country_event = {
	id = civic.39
	title = "civic.39.name"
	desc = {
		text = civic.39.desc_a
		trigger = {
			has_country_flag = cop_beloved_ruler
		}
	}
	desc = {
		text = civic.39.desc_b
		trigger = {
			has_country_flag = cop_respected_ruler
		}
	}
	desc = {
		text = civic.39.desc_c
		trigger = {
			has_country_flag = cop_ok_ruler
		}
	}
	desc = {
		text = civic.39.desc_d
		trigger = {
			has_country_flag = cop_bad_ruler
		}
	}
	picture = GFX_evt_space_funeral
	
	is_triggered_only = yes
	
	trigger = {
		has_valid_civic = civic_personality_cult
	}
	
	immediate = {
	}

	option = {
		name = civic.39.a # Hold a grand funeral
		add_resource = {
			energy = -3000
		}
		if = {
			limit = {
				has_country_flag = cop_beloved_ruler
			}
			capital_scope = {
				add_modifier = {
					modifier = cop_good_funeral
					days = 1800
				}
			}
			add_modifier = {
				modifier = cop_pleased
				days = 3600
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_respected_ruler
			}
			capital_scope = {
				add_modifier = {
					modifier = cop_good_funeral
					days = 1800
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_ok_ruler
			}
			capital_scope = {
				add_modifier = {
					modifier = cop_meh_funeral
					days = 1800
				}
			}
			add_modifier = {
				modifier = cop_kinda_displeased
				days = 3600
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_bad_ruler
			}
			capital_scope = {
				add_modifier = {
					modifier = cop_bad_funeral
					days = 1800
				}
			}
			add_modifier = {
				modifier = cop_displeased
				days = 3600
			}
		}
	}

	option = {
		name = civic.39.b # Hold a standard ceremony
		if = {
			limit = {
				has_country_flag = cop_beloved_ruler
			}
			add_monthly_resource_mult = {
				resource = unity
				value = 3
			}
			add_modifier = {
				modifier = cop_kinda_displeased
				days = 3600
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_respected_ruler
			}
			add_monthly_resource_mult = {
				resource = unity
				value = 3
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_ok_ruler
			}
			add_monthly_resource_mult = {
				resource = unity
				value = 4
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_bad_ruler
			}
			add_monthly_resource_mult = {
				resource = unity
				value = 1
			}
			add_modifier = {
				modifier = cop_kinda_displeased
				days = 3600
			}
		}
	}

	option = {
		name = civic.39.c # Denounce them
		if = {
			limit = {
				has_country_flag = cop_beloved_ruler
			}
			add_monthly_resource_mult = {
				resource = energy
				value = 5
			}
			add_resource = {
				influence = 300
			}
			add_modifier = {
				modifier = cop_very_displeased
				days = 3600
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_respected_ruler
			}
			add_monthly_resource_mult = {
				resource = energy
				value = 2
			}
			add_resource = {
				influence = 250
			}
			add_modifier = {
				modifier = cop_displeased
				days = 3600
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_ok_ruler
			}
			add_monthly_resource_mult = {
				resource = energy
				value = 2
			}
			add_resource = {
				influence = 150
			}
			add_modifier = {
				modifier = cop_kinda_displeased
				days = 3600
			}
		}
		else_if = {
			limit = {
				has_country_flag = cop_bad_ruler
			}
			add_monthly_resource_mult = {
				resource = energy
				value = 2
			}
			add_monthly_resource_mult = {
				resource = unity
				value = 2
			}
			add_modifier = {
				modifier = cop_pleased
				days = 3600
			}
		}
	}
}

# Arcane Deciphering Events (Antique Purveyors civic)
country_event = {
	id = civic.40
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			35 = { country_event = { id = ancrel.10001 } }
			25 = { country_event = { id = ancrel.10002 } }
			12 = { country_event = { id = ancrel.10003 } }
			5 = { country_event = { id = ancrel.10004 } }
			5 = { country_event = { id = ancrel.10005 } }
			5 = { country_event = { id = ancrel.10006 } }
			5 = {
				modifier = {
					factor = 0
					country_uses_consumer_goods = no
				}
				country_event = { id = ancrel.10007 }
			}
			5 = {
				modifier = {
					factor = 0
					country_uses_food = no
				}
				country_event = { id = ancrel.10008 }
			}
			5 = { country_event = { id = ancrel.10009 } }
		}
	}
}