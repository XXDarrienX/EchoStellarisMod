namespace = silicoids

# intentionally empty in case the original on_game_start action fires
event = {
	id = silicoids.1 
	hide_window = yes
	is_triggered_only = yes
	immediate = { }
}

# triggered by empire_init_add_technologies
country_event = {
	id = silicoids.2
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_valid_civic = civic_terraformers
	}
	immediate = {
		give_technology = {
			tech = tech_terrestrial_sculpting
			message = no
		}
	}
}

# triggered by empire_init_capital_planet
# ROOT = planet, capital
# FROM = species, founder
planet_event = {
	id = silicoids.3
	hide_window = yes
	is_triggered_only = yes
	pre_triggers = {
		has_owner = yes
		is_capital = yes
	}
	trigger = {
		owner = { any_owned_pop_species = { has_trait = trait_lithoid } }
	}
	immediate = {
		if = {
			limit = {
				OR = {
					is_planet_class = pc_hive
					AND = {
						is_planet_class = pc_ocean
						owner = { is_anglers_empire = yes }
					}
				}
			}
			while = {
				limit = {
					num_districts = {
						type = district_farming_uncapped
						value < 1
					}
				}
				add_district = district_farming_uncapped
				if = {
					limit = { is_planet_class = pc_hive }
					remove_district = district_mining_uncapped
				}
				else = {
					remove_district = district_mining
				}
			}
		}
		else_if = {
			limit = { owner = { has_origin = origin_void_dwellers } }
			solar_system = {
				random_system_planet = {
					limit = { has_planet_flag = void_dweller_habitat_2 }
					remove_building = building_commercial_zone
					add_building = building_hydroponics_farm
				}
			}
		}
		else_if = {
			limit = { habitable_planet = yes }
			while = {
				limit = {
					num_districts = {
						type = district_farming
						value < 1
					}
				}
				add_district = district_farming
				remove_district = district_mining
			}
		}
		owner = {
			if = {
				limit = {
					resource_stockpile_compare = {
						resource = food
						value = 0
					}
				}
				add_resource = {
					food = 50
				}
			}
		}
	}
}

# flag mod as active
event = {
	id = silicoids.13
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = { has_global_flag = silicoid_revisited_installed }
	}
	immediate = {
		set_global_flag = silicoid_revisited_installed
	}
}