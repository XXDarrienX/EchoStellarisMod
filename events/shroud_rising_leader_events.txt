#############################################################

# Shroud Rising Leader Events


# Written by LastLeviathan

#############################################################

namespace = shroud_rising_leader

#############################################################
# shroud_rising_leader.1 | Post battle event to give admiral special trait vs Entities(On Action)
# shroud_rising_leader.2 | Post battle event to give admiral special trait vs Cultists (On Action)
# shroud_rising_leader.3 | Post battle event to spawn general special trait vs Entities (On Action)
# shroud_rising_leader.4 | Post battle event to spawn general special trait vs Cultists(On Action)
#############################################################

# ADMIRAL TRAITS

# victorious admiral gains shroud killer trait
country_event = {
	id = shroud_rising_leader.1
	title = "admiral_trait_gain"
	desc = "shroud_rising_leader.1.desc"
	picture = GFX_evt_small_space_battle
	location = fromfrom
	
	is_triggered_only = yes

	trigger = {
		# is_country_type = default	
		fromfrom = {
			exists = leader
			leader = { 
				NOT = {
					has_trait = leader_trait_admiral_shroud_expertise
				}
			}
		}
		from = {
			OR = {				
				is_country_type = shroud_entities 
				is_country_type = shroud_horrors
			}
		}		
	}

	immediate = {
		fromfrom = {
			leader = {
					
					# limit = {
						# leader_class = admiral
					# }
					
					save_event_target_as = officer 
				
				
			}
		}
	}

	option = {
		name = shroud_rising_leader.1.a
		trigger = {
			fromfrom = {
				exists = leader
			}
		}
		fromfrom = {
			leader = {
				
					# limit = {
						# leader_class = admiral
					# }
					add_trait = leader_trait_admiral_shroud_expertise
				
				
			}
		}
		
	}
	
	
}

# victorious admiral gains cultist killer trait
country_event = {
	id = shroud_rising_leader.2
	title = "admiral_trait_gain"	
	desc = "shroud_rising_leader.2.desc"
	picture = GFX_evt_pirates_attacking_cargo
	location = fromfrom	
	is_triggered_only = yes

	trigger = {
		# is_country_type = default		
		fromfrom = {
			exists = leader
			leader = { 
				NOT = {
					has_trait = leader_trait_admiral_cultist_expertise
				}
			}
		}
		from = {
		
				is_country_type = shroud_cult 				
			
		}		
	}

	immediate = {
		fromfrom = {
			leader = {
					
					# limit = {
						# leader_class = admiral
					# }
					
					save_event_target_as = officer 
				
				
			}
		}
	}

	option = {
		name =shroud_rising_leader.2.a
		trigger = {
			fromfrom = {
				exists = leader
			}
		}
		fromfrom = {
			leader = {
					
					# limit = {
						# leader_class = admiral
					# }
					
					add_trait = leader_trait_admiral_cultist_expertise
				
				
			}
		}
		
	}
	
	
}

# New General with special trait on planet Defense ENTITIES
country_event = {
	id = shroud_rising_leader.3
	title = "shroud_rising_leader.3.name"	
	desc = "shroud_rising_leader.3.desc"
	picture = GFX_evt_victorious_army
	location = fromfrom

	is_triggered_only = yes

	trigger = {
		is_country_type = default
		from = {
			OR = {				
				is_country_type = shroud_entities 
				is_country_type = shroud_horrors
			}
		}
	}

	immediate = {
		FROMFROM = {
			save_event_target_as = planet 			
		}
		random_list = {
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_restrained
						trait = leader_trait_general_shroud_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_charismatic 
						trait = leader_trait_general_shroud_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_glory_seeker
						trait = leader_trait_general_shroud_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_butcher
						trait = leader_trait_general_shroud_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
		}
	}

	option = {
		name = GOOD
		custom_tooltip = new_general
	}
}

# New General with special trait on planet Defense CULTISTS
country_event = {
	id = shroud_rising_leader.4
	title = "shroud_rising_leader.4.name"	
	desc = "shroud_rising_leader.4.desc"
	picture = GFX_evt_federation_fleet
	location = fromfrom

	is_triggered_only = yes

	trigger = {
		is_country_type = default
		from = {		
			is_country_type = shroud_cult 			
		}
	}

	immediate = {
		FROMFROM = {
			save_event_target_as = planet 			
		}
		random_list = {
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_restrained
						trait = leader_trait_general_cultist_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_charismatic 
						trait = leader_trait_general_cultist_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_glory_seeker
						trait = leader_trait_general_cultist_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
			25 = {
				create_leader = {
					class = general
					species = owner_main_species
					name = random
					skill = 2
					traits = {
						trait = leader_trait_butcher
						trait = leader_trait_general_cultist_expertise
					}
				}
				last_created_leader = { save_event_target_as = officer }
			}
		}
	}

	option = {
		name = GOOD
		custom_tooltip = new_general
	}
}
