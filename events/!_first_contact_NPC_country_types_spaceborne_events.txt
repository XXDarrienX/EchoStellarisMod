################################
#
# First Contact Events - meeting non-default countries
#
# Written by Pierre du Plessis
#
################################

namespace = first_contact_critters

### Amoebas
first_contact_event = {
	id = first_contact_critters.25
	title = first_contact_critters.25.name
	desc = {
		trigger = {
			hidden:owner = {
				switch = {
					trigger = has_ethic
					ethic_fanatic_xenophile = { text = story.101.desc.phile }
					ethic_fanatic_xenophobe = { text = story.101.desc.phobe }
					ethic_fanatic_militarist = { text = story.101.desc.milit }
					ethic_fanatic_pacifist = { text = story.101.desc.pacif }
					ethic_fanatic_materialist = { text = story.101.desc.mater }
					ethic_xenophile = { text = story.101.desc.phile }
					ethic_xenophobe = { text = story.101.desc.phobe}
					ethic_militarist = { text = story.101.desc.milit }
					ethic_pacifist = { text = story.101.desc.pacif }
					ethic_materialist = { text = story.101.desc.mater }
					ethic_gestalt_consciousness = { text = story.101.desc.gesta }
					default = { text = first_contact_critters.25.desc }
				}
			}
		}
	}
	picture = GFX_evt_friendly_amoeba
	show_sound = event_space_amoeba
	
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_site_progress_locked = yes
	}

	after = { 
		set_site_progress_locked = no
	}
	
	option = {
		name = story.101.aa
		trigger = {
			owner = {
				OR = {
					is_xenophobe = yes
					is_militarist = yes
					is_homicidal = yes
				}
			}
		}
		owner = {
			add_modifier = {
				modifier = amoeba_hunting_buff
				days = -1
			}
		}
		custom_tooltip = story.101.aa.amoebahunt
		finish_first_contact_effect = yes
	}

	option = {
		name = story.101.bb
		trigger = {
			owner = {
				NOT = { has_civic = civic_machine_terminator }
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_special_project = AMOEBAS_PROJECT } }
				capital_scope = {
					enable_special_project = {
						name = "AMOEBAS_PROJECT"
						location = this
						owner = root.owner
					}
				}
			}
		}
		finish_first_contact_effect = yes
	}

	option = {
		name = story.101.bb.exter
		trigger = {
			owner = {
				has_civic = civic_machine_terminator
			}
		}
		owner = {
			if = {
				limit = { NOT = { has_special_project = AMOEBAS_PROJECT } }
				capital_scope = {
					enable_special_project = {
						name = "AMOEBAS_PROJECT"
						location = this
						owner = root.owner
					}
				}
			}
		}
		finish_first_contact_effect = yes
	}
}

### Crystals
first_contact_event = {
	id = first_contact_critters.35
	title = story.201.name
	# Phile
	desc = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
		}
		text = story.201.desc.phile
	}
	# Phobe
	desc = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		text = story.201.desc.phobe
	}
	# Pacif
	desc = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
		text = story.201.desc.pacif
	}
	# Spiri
	desc = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
		text = story.201.desc.spiri
	}
	# Milit
	desc = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist
				}
			}
		}
		text = story.201.desc.milit
	}
	# Generic / Gestalt
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
		}
		text = story.201.desc
	}
	picture = GFX_evt_fleet_evil
	show_sound = event_space_crystals
	
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_site_progress_locked = yes
	}

	option = { # Hunting Buff
		name = story.201.aa
		trigger = {
			owner = {
				OR = {
					is_xenophobe = yes
					is_militarist = yes
					is_homicidal = yes
				}
			}
		}
		owner = {
			add_modifier = {
				modifier = crystal_hunting_buff
				days = -1
			}
		}
		custom_tooltip = story.201.aa.crystalhunt
	}

	option = { # Special Project
		name = story.201.bb
		owner = {
			if = {
				limit = { NOT = { has_special_project = CRYSTALS_PROJECT } }
				capital_scope = {
					enable_special_project = {
						name = "CRYSTALS_PROJECT"
						location = this
						owner = root.owner
					}
				}
			}
		}
	}

	after = { 
		finish_first_contact_effect = yes
		set_site_progress_locked = no
	}
}

### Drones
first_contact_event = {
	id = first_contact_critters.45
	title = first_contact_critters.45.name
	picture = GFX_evt_mining_station

	desc = {
		trigger = { owner = { has_ethic = ethic_gestalt_consciousness } }
		text = story.301.desc.gesta
	}
	# Materialist
	desc = {
		trigger = {
			owner = { OR = { has_ethic = ethic_materialist has_ethic = ethic_fanatic_materialist } }
		}
		text = story.301.desc.mater
	}
	# Pacifist
	desc = {
		trigger = {
			owner = { OR = { has_ethic = ethic_pacifist has_ethic = ethic_fanatic_pacifist } }
		}
		text = story.301.desc.pacif
	}
	# Generic
	desc = {
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
		text = first_contact_critters.45.desc
	}
	show_sound = event_ancient_drone
	
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_site_progress_locked = yes
	}

	after = { 
		set_site_progress_locked = no
	}

	option = {
		name = first_contact_critters.45.A
		owner = {
			if = {
				limit = { NOT = { has_special_project = DRONES_PROJECT } }
				capital_scope = {
					enable_special_project = {
						name = "DRONES_PROJECT"
						location = this
						owner = root.owner
					}
				}
			}
		}
		finish_first_contact_effect = yes
	}
}

### Void Clouds
first_contact_event = {
	id = first_contact_critters.85
	title = story.401.name
	desc = { # Gestalt
		trigger = {
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = story.401.desc.gesta
	}
	desc = { # Spiri
		trigger = { owner = { is_spiritualist = yes } }
		text = story.401.desc.spiri
	}
	desc = {
		trigger = {
			owner = {
				is_gestalt = no
				is_spiritualist = no
			}
		}
		text = story.401.desc
	}
	picture = GFX_evt_binary_stars
	show_sound = event_space_cloud
	
	is_triggered_only = yes
	first_contact = yes

	immediate = {
		set_site_progress_locked = yes
	}

	after = { 
		set_site_progress_locked = no
	}
	
	option = {
		name = story.401.a.spiri
		trigger = { owner = { is_spiritualist = yes } }
		owner = {
			if = {
				limit = { NOT = { has_special_project = CLOUDS_PROJECT } }
				capital_scope = {
					enable_special_project = {
						name = "CLOUDS_PROJECT"
						location = this
						owner = root.owner
					}
				}
			}
		}
		finish_first_contact_effect = yes
	}

	option = {
		name = story.401.c
		trigger = { owner = { NOT = { is_spiritualist = yes } } }
		owner = {
			if = {
				limit = { NOT = { has_special_project = CLOUDS_PROJECT } }
				capital_scope = {
					enable_special_project = {
						name = "CLOUDS_PROJECT"
						location = this
						owner = root.owner
					}
				}
			}
		}
		finish_first_contact_effect = yes
	}
}