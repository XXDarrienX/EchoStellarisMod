#########################################
#
# on_action_events
#
#########################################

namespace = action

# Other Empires react to a Pop dying due to massive orbital bombardment
# This = Planet where the pop was bombed to death
# From = Country which is raining down fire and brimstone
planet_event = {
	id = action.100
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = {
			exists = this
			is_country_type = default
		}
		owner = {
			exists = this
			is_country_type = default
		}
	}

	immediate = {
		owner = {
			if = { limit = { NOT = { is_same_empire = root.from } } # vfix - error in log from applying to self
				add_opinion_modifier = { who = root.from modifier = opinion_nuker }
			}
		}
		every_country = {
			limit = {
				has_communications = root.from
				has_communications = root.owner
				NOR = {
					is_country = root.from
					has_ai_personality_behaviour = purger
					has_ethic = ethic_fanatic_xenophobe
					is_harming_relations_with = root.owner
					is_at_war_with = root.owner
					has_rival = root.owner
				}
				OR = {
					is_country_type = default
					has_ai_personality = awakened_fallen_empire_xenophile
				}
			}
			add_opinion_modifier = { who = root.from modifier = opinion_nuker }
		}
	}
}