#Soul Crystal Deficit
namespace = soul_deficit

situation_event = {
	id = soul_deficit.1
	title = soul_deficit.1.name
	desc = soul_deficit.1.desc
	picture = GFX_evt_decryption
	show_sound = event_bad_omen
	is_triggered_only = yes
	situation = this

	abort_trigger = {
		situation_progress >= 100
	}

	immediate = {
		owner = {
			ordered_owned_planet = {
				limit = {
					num_pops >= 20
				}
				position = 0
				order_by = num_pops
				save_event_target_as = soul_cannibalism
			}
		}
	}
	option = {
		name = deficit.100.B
		trigger = {
			exists = event_target:soul_cannibalism
		}
		event_target:soul_cannibalism = {
			random_owned_planet = {
				while = {
					count = 5
					random_owned_pop = {
						limit = { has_trait = trait_vb_psi_soul_eater }
						kill_pop = yes
					}
				}
			}
		}
		owner = {
			add_resource = {
				soul_crystals = 25
				mult = event_target:soul_cannibalism.trigger:num_pops
			}
		}
	}
	option = {
		name = deficit.100.C
	}
}

situation_event = {
	id = soul_deficit.2
	title = soul_deficit.2.title
	desc = soul_deficit.2.desc
	picture = GFX_evt_news_room
	show_sound = event_life_support_fail
	is_triggered_only = yes
	situation = this

	option = {
		name = UNFORTUNATE

		owner = {
			add_resource = {
				soul_crystals = @bailout_basic_base_amount
				mult = value:bailout_scaling_factor
			}
		}
	}
	after = {
		destroy_situation = this
	}
}