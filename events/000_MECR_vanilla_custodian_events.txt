namespace = custodian

### GDF got more naval cap from expand
# GDF Goes Independent
country_event = {
	id = custodian.31
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		set_global_flag = independent_gdf
		create_country = {
			name = "NAME_GDF"
			type = gdf
			flag = {
				icon = {
					category = "special"
					file = "gdf.dds"
				}
				background= {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors={
					"blue"
					"blue"
					"null"
					"null"
				}
			}
			effect = {
				save_global_event_target_as = gdf_country
				every_country = { establish_communications_no_message = prev }
				refresh_GDF_country_naval_cap = yes
				set_country_flag = can_access_community_territory
			}
		}
		transfer_galactic_defense_force_fleets = event_target:gdf_country
		every_playable_country = {
			limit = {
				is_ai = no
				is_galactic_community_member = yes
			}
			country_event = { id = custodian.32 days = 10 }
		}
	}
}
# Restore GDF if destroyed
event = {
	id = custodian.34
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		count_playable_country = {
			limit = { is_galactic_community_member = yes }
			count >= 1
		}
		has_global_flag = independent_gdf
		NOT = { exists = event_target:gdf_country }
	}

	immediate = {
		random_playable_country = {
			limit = { is_galactic_community_member = yes }
			random_owned_planet = { save_event_target_as = gdf_reborn_location }
		}
		create_country = {
			name = "NAME_GDF"
			type = gdf
			flag = {
				icon = {
					category = "special"
					file = "gdf.dds"
				}
				background= {
					category = "backgrounds"
					file = "00_solid.dds"
				}
				colors={
					"blue"
					"blue"
					"null"
					"null"
				}
			}
			effect = {
				save_global_event_target_as = gdf_country
				every_country = { establish_communications_no_message = prev }
				refresh_GDF_country_naval_cap = yes
				create_fleet_from_naval_cap = {
					fraction = 0.22
					ship_owner_type = galactic_community
				}
				last_created_fleet = {
					set_location = event_target:gdf_reborn_location
				}
			}
		}
	}
}