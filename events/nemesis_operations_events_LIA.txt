## 첩보 확장 모오오오오드 이벤트


namespace = operation


@AdvancedStealTechnologyAmount = 2000 #Amount of science research in every discipline which will be granted if the operation cannot steal a Technology
@StealTechnologyTimer = 2160 #days (6 years) until Steal Technology can be repeated. Referenced in tooltip strings "operation.1026.tooltip.cooldown" and "operation_steal_technology_too_recent".
@ResetStealTechnologyTimer = 1 #days 기술 훔치기 쿨타임을 초기화하는데 쓰이는 플래그 타이머 값
@TradeTimer = 1800 #같은 국가를 상대로 무역협정 첩보를 다시하려면 5년이 필요함
@FinanceTimer = 3600 #같은 국가를 상대로 금융공작 첩보를 다시하려면 10년이 필요함
@FakeTimer = 3600 #같은 국가를 상대로 가짜뉴스 공작을 다시하려면 10년이 필요함
@AntigovTimer = 3600 #같은 국가를 상대로 반정부시위 후원을 다시하려면 10년이 필요함
@WarcrimeTimer = 3600 #같은 국가를 상대로 전쟁범죄 규탄을 다시하려면 10년이 필요함
@VietnamTimer = 2880 #같은 국가에게 군수품지원을 다시하려면 8년이 필요함
@HyperlaneTimer = 3600 #같은 국가의 항법시스템 정보자산을 축적하려면 10년이 필요함
@AggnetTimer = 14400 #같은 국가의 현지 정보망을 다시 폭발적으로 성장시키려면 40년이 필요함
@AgguseTimer = 14400 #같은 국가의 보안체계 데이터를 다시 축적하려면 40년이 필요함
@NemesisTimer = 9000 #같은 국가를 대상으로 프로젝트 네메시스를 다시 계획하려면 25년이 필요함
##오랫만의 업데이트
@DipplusTimer = 1800 #관계향상 첩보쿨탐 5년
@DisHiveTimer = 4320 #군체교란 첩보쿨탐 12년
@DisMachTimer = 4320 #기계교란 첩보쿨탐 12년
@FleetAccTimer = 5400 #함대사고 첩보쿨탐 15년
@SpyCheckTimer = 1800 #방첩검증 첩보쿨탐 5년
@ExtSpyCheckTimer = 3600 #연장된 방첩검증 첩보쿨탐 10년
@CounterCheckTimer = 7200 #역정보배치 첩보쿨탐 20년
@DisInformTimer = 3600 #역정보 수명 10년
@ExpDivTimer = 21600 #부서확충 첩보쿨탐 60년
@BudgetAllTimer = 28800 #특활비재배정 첩보쿨탐 80년
## 20***번대 이벤트 번호를 부여함

event = {	#그림자국가 AI전용 소폭 버프 이벤트
	id = operation.19998
	hide_window = yes
	is_triggered_only = yes
	trigger = {
	}
	immediate = {
		every_country = {
			limit = {
				has_valid_civic = civic_shadow_state
				is_ai = yes
			}
			country_event = { id = operation.19997 days = 1 }
		}
	}
}
country_event = {	#그림자국가 AI전용 소폭 버프 이벤트
	id = operation.19997
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_valid_civic = civic_shadow_state
		is_ai = yes
	}
	immediate = {
		add_resource = { influence = 50 }
		add_resource = { energy = 500 }
		add_resource = { minerals = 500 }
		add_resource = { consumer_goods = 200 }
		add_resource = { alloys = 100 }
		add_resource = { physics_research = 2500 }
		add_resource = { engineering_research = 2500 }
		add_resource = { society_research = 2500 }		
	}
}

# 방첩이벤트 - 공격 실패
country_event = {
	id = operation.20500
	title = operation.20500.name
	desc = operation.20500.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster
	is_triggered_only = yes

	option = {
		name = CURSES
		add_resource = { energy = 500 }
		add_resource = { influence = 50 }		
		from.spynetwork = {
			add_spy_network_level = -35
		}				
		
	}

	after = {
		hidden_effect = {
			from = {
				fire_on_action = { on_action = on_operation_cancelled }
			}
		}
		destroy_espionage_operation = from
	}
}

# 방첩이벤트 - 방어 성공 (저위험 작전)
country_event = {
	id = operation.20501
	title = operation.20501.name
	desc = operation.20501.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 25 }		
	}
}

# 방첩이벤트 - 방어 성공 (중위험 작전)
country_event = {
	id = operation.20502
	title = operation.20502.name
	desc = operation.20502.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 50 }		
	}
}

# 방첩이벤트 - 방어 성공 (고위험 작전)
country_event = {
	id = operation.20503
	title = operation.20503.name
	desc = operation.20503.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 75 }		
	}
}

## 모드 식별용 글로벌 플래그	
event = {
	id = operation.19999
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = { has_global_flag = has_mod_espionage_extended }
	}
	immediate = {
		if = {
			limit = {
				NOT = { has_global_flag = has_mod_espionage_extended }
			}
			set_global_flag = has_mod_espionage_extended
		}
	}
}


## 심층 기술 탈취 - 물리학
espionage_operation_event = {
    id = operation.20000
    title = operation.20000.name
    espionage_operation = yes
    desc = {
        trigger = {
            OR = {
                has_espionage_operation_flag = steal_tech_conference
                has_espionage_operation_flag = steal_tech_lecture
                has_espionage_operation_flag = steal_tech_outreach
            }
        }
        text = operation.20000.desc.invited
    }
    desc = {
        trigger = {
            has_espionage_operation_flag = steal_tech_theft
        }
        text = operation.20000.desc.theft
    }
    picture = GFX_evt_physics_research
    show_sound = event_default
    is_triggered_only = yes

    immediate = {
        set_espionage_operation_progress_locked = yes
    }

    option = {
        name = LAUNCH_OPERATION
        hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20001 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20001 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20001 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20001 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20001 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
        }
    }

    after = {
        set_espionage_operation_progress_locked = no
    }
}
##진입
country_event = {
    id = operation.20001
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        if = { #Theft from a facility
            limit = {
                from = { has_espionage_operation_flag = steal_tech_theft }
            }
            random_list = {
                3 = {
                    modifier = {
                        factor = 1.5
                        root = {
                            relative_encryption_decryption = {
                                target = from.target
                                value > 1.3
                            }
                        }
                    }
                    from = { set_espionage_operation_flag = smooth_exit }
                }
                2 = {
                    modifier = {
                        factor = 2
                        espionage_operation_disguise_disadvantage = yes
                    }
                    modifier = {
                        factor = 0.3
                        from = {
                            OR = {
                                has_espionage_asset_technology = yes
                                has_espionage_asset_subterfuge = yes
                                has_espionage_asset_criminal = yes
                            }
                        }
                    }
                    #'Messy' exit (no flag needed)
                }
            }
        }
        else = { #Theft via a cover alias
            random_list = {
                3 = {
                    modifier = {
                        factor = 1.5
                        root = {
                            relative_encryption_decryption = {
                                target = from.target
                                value > 1.5
                            }
                        }
                    }
                    from = { set_espionage_operation_flag = smooth_exit }
                }
                1 = {
                    modifier = {
                        factor = 2
                        espionage_operation_disguise_disadvantage = yes
                    }
                    modifier = {
                        factor = 0.3
                        from = {
                            OR = {
                                has_espionage_asset_technology = yes
                                has_espionage_asset_subterfuge = yes
                            }
                        }
                    }
                    #'Messy' exit (no flag needed)
                }
            }
        }
        country_event = { id = operation.20002 days = 3 }
    }
}
## 기술탈취 피날레
country_event = {
    id = operation.20002
    title = operation.20002.name
    desc = {
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = steal_tech_theft
                has_espionage_operation_flag = smooth_exit
            }
        }
        text = operation.20002.desc.ducts.smooth
        text = operation.20002.desc.goods.smooth
    }
    desc = {
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = steal_tech_theft
                NOT = { has_espionage_operation_flag = smooth_exit }
            }
        }
        text = operation.20002.desc.ducts.messy
        text = operation.20002.desc.goods.messy
    }
    desc = {
        trigger = {
            fromfrom = {
                NOT = { has_espionage_operation_flag = steal_tech_theft }
                has_espionage_operation_flag = smooth_exit
            }
        }
        text = operation.20002.desc.invited.smooth
    }
    desc = {
        trigger = {
            fromfrom = {
                NOT = {
                    has_espionage_operation_flag = steal_tech_theft
                    has_espionage_operation_flag = smooth_exit
                }
            }
        }
        text = operation.20002.desc.invited.messy
    }
    picture = GFX_evt_physics_research
    show_sound = event_espionage_concluded
    is_triggered_only = yes

    trigger = {
        exists = fromfrom
    }

    immediate = {
        if = {
            limit = {
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = physics
				}
            }
            fromfrom = { set_espionage_operation_flag = reward_tech }
            random_list = {
                1 = {
                    modifier = {
                        factor = 3
                        root = {
                            relative_encryption_decryption = {
                                target = fromfrom.target
                                value > 1.6
                            }
                        }
                    }
                    modifier = {
                        factor = 2
                        root = {
                            relative_encryption_decryption = {
                                target = fromfrom.target
                                value > 1.4
                            }
                        }
                    }					
                    modifier = {
                        factor = 0
                        fromfrom = {
                            NOR = {
                                has_espionage_operation_flag = smooth_exit
                                has_espionage_asset_subterfuge = yes
                                has_espionage_asset_technology = yes
                            }
                        }
                    }
                    fromfrom = { set_espionage_operation_flag = reward_extra } #Steal a bonus tech
                }
                5 = { }
            }
        }
    }

    option = { #We're done here (smooth)
        name = operation.20002.a.smooth
        trigger = {
            fromfrom = { has_espionage_operation_flag = smooth_exit }
        }
        fromfrom.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -20 }
        }
    }
    option = { #We're done here (messy)
        name = operation.20002.a.messy
        trigger = {
            fromfrom = { NOT = { has_espionage_operation_flag = smooth_exit } }
        }
        fromfrom.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -30 }
        }

    }
    option = { #Sabotage their current research
        name = {
            trigger = {
                fromfrom = { has_espionage_operation_flag = smooth_exit }
            }
            text = operation.20002.b.smooth
        }
        name = {
            trigger = {
                fromfrom = { NOT = { has_espionage_operation_flag = smooth_exit } }
            }
            text = operation.20002.b.messy
        }
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        trigger = {
            fromfrom = {
                OR = {
                    has_espionage_asset = asset_hacker
                    has_espionage_asset = asset_memory_cache
                }
            }
        }
        allow = {
            exists = fromfrom.target
            fromfrom.target = {
                NOT = { has_modifier = research_stolen_sabotaged } #Not stackable
            }
        }
        hidden_effect = {
            fromfrom.target = {
                country_event = { id = operation.20009 }
            }
        }
        root = {
            add_resource = { influence = 25 }
        }
        custom_tooltip = operation.20002.b.tooltip
        fromfrom = {
            if = {
                limit = { has_espionage_operation_flag = smooth_exit }
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -30 }
                }
            }
            else = {
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -40 }
                }
            }
            destroy_espionage_asset_sabotage = yes
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }
    }
    option = { #Research backdoor
        name = operation.20002.c
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        trigger = {
            root = {
                relative_encryption_decryption = {
                    target = fromfrom.target
                    value > 1.4
                }
            }
            fromfrom = {
                OR = {
                    has_espionage_asset_subterfuge = yes
                    has_espionage_asset_technology = yes
                }
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "requires_not_espionage_research_backdoor"
                NOT = { has_modifier = espionage_research_backdoor } #Not stackable
            }
        }
        root = {
            add_modifier = { modifier = espionage_research_backdoor days = 1080 }
			add_resource = { influence = 20 }
        }
        fromfrom = {
            if = {
                limit = { has_espionage_operation_flag = smooth_exit }
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -20 }
                }
            }
            else = {
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -30 }
                }
            }
            if = {
                limit = { has_espionage_asset_technology = yes }
                destroy_espionage_asset_technology = yes
            }
            else_if = {
                limit = { has_espionage_asset_subterfuge = yes }
                destroy_espionage_asset_subterfuge = yes
            }
        }
    }
    option = { #Steal extra technology
        name = operation.20002.d
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        custom_tooltip = operation.20002.d.tooltip
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = reward_extra #Also requires "smooth_exit" and an Asset
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = physics
				}
            }
        }
        root = {
            copy_random_tech_from = {
                who = fromfrom.target
				area = physics	
                progress = 0.30
            }
        }
        fromfrom = {
            if = {
                limit = { has_espionage_asset_technology = yes }
                destroy_espionage_asset_technology = yes
            }
            else_if = {
                limit = { has_espionage_asset_subterfuge = yes }
                destroy_espionage_asset_subterfuge = yes
            }
            spynetwork = {
                add_spy_network_level_on_success_effect = { VALUE = -30 }
            }
        }
    }

    after = {
        custom_tooltip = operation.20002.tooltip.cooldown
		fromfrom.spynetwork = {
			set_saved_date = {
				key = recently_stole_technology
				days_from_present = @StealTechnologyTimer
				expires = @StealTechnologyTimer
			}
		}		
        if = {
            limit = {
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = physics
				}
            }
			copy_random_tech_from = {
			    who = fromfrom.target
			    area = physics
			    progress = 0.40	
			}
        }
        else = {
            add_resource = { physics_research = @AdvancedStealTechnologyAmount }
        }
        hidden_effect = {
            if = {
                limit = {
                    owner = { NOT = { has_country_flag = operation_complete_steal_technology } }
                }
                owner = {
                    change_variable = {
                        which = tinker_tailor_soldier_blorg_achievement_count
                        value = 1
                    }
                    set_country_flag = operation_complete_steal_technology
                }
            }
        }
        destroy_espionage_operation = fromfrom
    }
}
## 심층 기술 탈취 - 사회학
espionage_operation_event = {
    id = operation.20003
    title = operation.20003.name
    espionage_operation = yes
    desc = {
        trigger = {
            OR = {
                has_espionage_operation_flag = steal_tech_conference
                has_espionage_operation_flag = steal_tech_lecture
                has_espionage_operation_flag = steal_tech_outreach
            }
        }
        text = operation.20003.desc.invited
    }
    desc = {
        trigger = {
            has_espionage_operation_flag = steal_tech_theft
        }
        text = operation.20003.desc.theft
    }
    picture = GFX_evt_physics_research
    show_sound = event_default
    is_triggered_only = yes

    immediate = {
        set_espionage_operation_progress_locked = yes
    }

    option = {
        name = LAUNCH_OPERATION
        hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20004 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20004 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20004 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20004 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20004 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
        }
    }

    after = {
        set_espionage_operation_progress_locked = no
    }
}
##진입
country_event = {
    id = operation.20004
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        if = { #Theft from a facility
            limit = {
                from = { has_espionage_operation_flag = steal_tech_theft }
            }
            random_list = {
                3 = {
                    modifier = {
                        factor = 1.5
                        root = {
                            relative_encryption_decryption = {
                                target = from.target
                                value > 1.3
                            }
                        }
                    }
                    from = { set_espionage_operation_flag = smooth_exit }
                }
                2 = {
                    modifier = {
                        factor = 2
                        espionage_operation_disguise_disadvantage = yes
                    }
                    modifier = {
                        factor = 0.3
                        from = {
                            OR = {
                                has_espionage_asset_technology = yes
                                has_espionage_asset_subterfuge = yes
                                has_espionage_asset_criminal = yes
                            }
                        }
                    }
                    #'Messy' exit (no flag needed)
                }
            }
        }
        else = { #Theft via a cover alias
            random_list = {
                3 = {
                    modifier = {
                        factor = 1.5
                        root = {
                            relative_encryption_decryption = {
                                target = from.target
                                value > 1.5
                            }
                        }
                    }
                    from = { set_espionage_operation_flag = smooth_exit }
                }
                1 = {
                    modifier = {
                        factor = 2
                        espionage_operation_disguise_disadvantage = yes
                    }
                    modifier = {
                        factor = 0.3
                        from = {
                            OR = {
                                has_espionage_asset_technology = yes
                                has_espionage_asset_subterfuge = yes
                            }
                        }
                    }
                    #'Messy' exit (no flag needed)
                }
            }
        }
        country_event = { id = operation.20005 days = 3 }
    }
}
## 기술탈취 피날레
country_event = {
    id = operation.20005
    title = operation.20005.name
    desc = {
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = steal_tech_theft
                has_espionage_operation_flag = smooth_exit
            }
        }
        text = operation.20005.desc.ducts.smooth
        text = operation.20005.desc.goods.smooth
    }
    desc = {
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = steal_tech_theft
                NOT = { has_espionage_operation_flag = smooth_exit }
            }
        }
        text = operation.20005.desc.ducts.messy
        text = operation.20005.desc.goods.messy
    }
    desc = {
        trigger = {
            fromfrom = {
                NOT = { has_espionage_operation_flag = steal_tech_theft }
                has_espionage_operation_flag = smooth_exit
            }
        }
        text = operation.20005.desc.invited.smooth
    }
    desc = {
        trigger = {
            fromfrom = {
                NOT = {
                    has_espionage_operation_flag = steal_tech_theft
                    has_espionage_operation_flag = smooth_exit
                }
            }
        }
        text = operation.20005.desc.invited.messy
    }
    picture = GFX_evt_physics_research
    show_sound = event_espionage_concluded
    is_triggered_only = yes

    trigger = {
        exists = fromfrom
    }

    immediate = {
        if = {
            limit = {
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = society
				}
            }
            fromfrom = { set_espionage_operation_flag = reward_tech }
            random_list = {
                1 = {
                    modifier = {
                        factor = 3
                        root = {
                            relative_encryption_decryption = {
                                target = fromfrom.target
                                value > 1.6
                            }
                        }
                    }
                    modifier = {
                        factor = 2
                        root = {
                            relative_encryption_decryption = {
                                target = fromfrom.target
                                value > 1.4
                            }
                        }
                    }					
                    modifier = {
                        factor = 0
                        fromfrom = {
                            NOR = {
                                has_espionage_operation_flag = smooth_exit
                                has_espionage_asset_subterfuge = yes
                                has_espionage_asset_technology = yes
                            }
                        }
                    }
                    fromfrom = { set_espionage_operation_flag = reward_extra } #Steal a bonus tech
                }
                5 = { }
            }
        }
    }

    option = { #We're done here (smooth)
        name = operation.20005.a.smooth
        trigger = {
            fromfrom = { has_espionage_operation_flag = smooth_exit }
        }
        fromfrom.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -20 }
        }
    }
    option = { #We're done here (messy)
        name = operation.20005.a.messy
        trigger = {
            fromfrom = { NOT = { has_espionage_operation_flag = smooth_exit } }
        }
        fromfrom.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -30 }
        }

    }
    option = { #Sabotage their current research
        name = {
            trigger = {
                fromfrom = { has_espionage_operation_flag = smooth_exit }
            }
            text = operation.20005.b.smooth
        }
        name = {
            trigger = {
                fromfrom = { NOT = { has_espionage_operation_flag = smooth_exit } }
            }
            text = operation.20005.b.messy
        }
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        trigger = {
            fromfrom = {
                OR = {
                    has_espionage_asset = asset_hacker
                    has_espionage_asset = asset_memory_cache
                }
            }
        }
        allow = {
            exists = fromfrom.target
            fromfrom.target = {
                NOT = { has_modifier = research_stolen_sabotaged } #Not stackable
            }
        }
        hidden_effect = {
            fromfrom.target = {
                country_event = { id = operation.20009 }
            }
        }
        root = {
            add_resource = { influence = 25 }
        }
        custom_tooltip = operation.20005.b.tooltip
        fromfrom = {
            if = {
                limit = { has_espionage_operation_flag = smooth_exit }
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -30 }
                }
            }
            else = {
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -40 }
                }
            }
            destroy_espionage_asset_sabotage = yes
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }
    }
    option = { #Research backdoor
        name = operation.20005.c
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        trigger = {
            root = {
                relative_encryption_decryption = {
                    target = fromfrom.target
                    value > 1.4
                }
            }
            fromfrom = {
                OR = {
                    has_espionage_asset_subterfuge = yes
                    has_espionage_asset_technology = yes
                }
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "requires_not_espionage_research_backdoor"
                NOT = { has_modifier = espionage_research_backdoor } #Not stackable
            }
        }
        root = {
            add_modifier = { modifier = espionage_research_backdoor days = 1080 }
			add_resource = { influence = 20 }
        }
        fromfrom = {
            if = {
                limit = { has_espionage_operation_flag = smooth_exit }
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -20 }
                }
            }
            else = {
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -30 }
                }
            }
            if = {
                limit = { has_espionage_asset_technology = yes }
                destroy_espionage_asset_technology = yes
            }
            else_if = {
                limit = { has_espionage_asset_subterfuge = yes }
                destroy_espionage_asset_subterfuge = yes
            }
        }
    }
    option = { #Steal extra technology
        name = operation.20005.d
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        custom_tooltip = operation.20005.d.tooltip
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = reward_extra #Also requires "smooth_exit" and an Asset
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = society
				}
            }
        }
        root = {
            copy_random_tech_from = {
                who = fromfrom.target
				area = society	
                progress = 0.30
            }
        }
        fromfrom = {
            if = {
                limit = { has_espionage_asset_technology = yes }
                destroy_espionage_asset_technology = yes
            }
            else_if = {
                limit = { has_espionage_asset_subterfuge = yes }
                destroy_espionage_asset_subterfuge = yes
            }
            spynetwork = {
                add_spy_network_level_on_success_effect = { VALUE = -30 }
            }
        }
    }

    after = {
        custom_tooltip = operation.20005.tooltip.cooldown
		fromfrom.spynetwork = {
			set_saved_date = {
				key = recently_stole_technology
				days_from_present = @StealTechnologyTimer
				expires = @StealTechnologyTimer
			}
		}
        if = {
            limit = {
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = society
				}
            }
			copy_random_tech_from = {
			    who = fromfrom.target
			    area = society
			    progress = 0.40	
			}
        }
        else = {
            add_resource = { society_research = @AdvancedStealTechnologyAmount }
        }
        hidden_effect = {
            if = {
                limit = {
                    owner = { NOT = { has_country_flag = operation_complete_steal_technology } }
                }
                owner = {
                    change_variable = {
                        which = tinker_tailor_soldier_blorg_achievement_count
                        value = 1
                    }
                    set_country_flag = operation_complete_steal_technology
                }
            }
        }
        destroy_espionage_operation = fromfrom
    }
}
## 심층 기술 탈취 - 공학
espionage_operation_event = {
    id = operation.20006
    title = operation.20006.name
    espionage_operation = yes
    desc = {
        trigger = {
            OR = {
                has_espionage_operation_flag = steal_tech_conference
                has_espionage_operation_flag = steal_tech_lecture
                has_espionage_operation_flag = steal_tech_outreach
            }
        }
        text = operation.20006.desc.invited
    }
    desc = {
        trigger = {
            has_espionage_operation_flag = steal_tech_theft
        }
        text = operation.20006.desc.theft
    }
    picture = GFX_evt_physics_research
    show_sound = event_default
    is_triggered_only = yes

    immediate = {
        set_espionage_operation_progress_locked = yes
    }

    option = {
        name = LAUNCH_OPERATION
        hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20007 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20007 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20007 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20007 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20007 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
        }
    }

    after = {
        set_espionage_operation_progress_locked = no
    }
}
##진입
country_event = {
    id = operation.20007
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        if = { #Theft from a facility
            limit = {
                from = { has_espionage_operation_flag = steal_tech_theft }
            }
            random_list = {
                3 = {
                    modifier = {
                        factor = 1.5
                        root = {
                            relative_encryption_decryption = {
                                target = from.target
                                value > 1.3
                            }
                        }
                    }
                    from = { set_espionage_operation_flag = smooth_exit }
                }
                2 = {
                    modifier = {
                        factor = 2
                        espionage_operation_disguise_disadvantage = yes
                    }
                    modifier = {
                        factor = 0.3
                        from = {
                            OR = {
                                has_espionage_asset_technology = yes
                                has_espionage_asset_subterfuge = yes
                                has_espionage_asset_criminal = yes
                            }
                        }
                    }
                    #'Messy' exit (no flag needed)
                }
            }
        }
        else = { #Theft via a cover alias
            random_list = {
                3 = {
                    modifier = {
                        factor = 1.5
                        root = {
                            relative_encryption_decryption = {
                                target = from.target
                                value > 1.5
                            }
                        }
                    }
                    from = { set_espionage_operation_flag = smooth_exit }
                }
                1 = {
                    modifier = {
                        factor = 2
                        espionage_operation_disguise_disadvantage = yes
                    }
                    modifier = {
                        factor = 0.3
                        from = {
                            OR = {
                                has_espionage_asset_technology = yes
                                has_espionage_asset_subterfuge = yes
                            }
                        }
                    }
                    #'Messy' exit (no flag needed)
                }
            }
        }
        country_event = { id = operation.20008 days = 3 }
    }
}
## 기술탈취 피날레
country_event = {
    id = operation.20008
    title = operation.20008.name
    desc = {
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = steal_tech_theft
                has_espionage_operation_flag = smooth_exit
            }
        }
        text = operation.20008.desc.ducts.smooth
        text = operation.20008.desc.goods.smooth
    }
    desc = {
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = steal_tech_theft
                NOT = { has_espionage_operation_flag = smooth_exit }
            }
        }
        text = operation.20008.desc.ducts.messy
        text = operation.20008.desc.goods.messy
    }
    desc = {
        trigger = {
            fromfrom = {
                NOT = { has_espionage_operation_flag = steal_tech_theft }
                has_espionage_operation_flag = smooth_exit
            }
        }
        text = operation.20008.desc.invited.smooth
    }
    desc = {
        trigger = {
            fromfrom = {
                NOT = {
                    has_espionage_operation_flag = steal_tech_theft
                    has_espionage_operation_flag = smooth_exit
                }
            }
        }
        text = operation.20008.desc.invited.messy
    }
    picture = GFX_evt_physics_research
    show_sound = event_espionage_concluded
    is_triggered_only = yes

    trigger = {
        exists = fromfrom
    }

    immediate = {
        if = {
            limit = {
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = engineering
				}
            }
            fromfrom = { set_espionage_operation_flag = reward_tech }
            random_list = {
                1 = {
                    modifier = {
                        factor = 3
                        root = {
                            relative_encryption_decryption = {
                                target = fromfrom.target
                                value > 1.6
                            }
                        }
                    }
                    modifier = {
                        factor = 2
                        root = {
                            relative_encryption_decryption = {
                                target = fromfrom.target
                                value > 1.4
                            }
                        }
                    }					
                    modifier = {
                        factor = 0
                        fromfrom = {
                            NOR = {
                                has_espionage_operation_flag = smooth_exit
                                has_espionage_asset_subterfuge = yes
                                has_espionage_asset_technology = yes
                            }
                        }
                    }
                    fromfrom = { set_espionage_operation_flag = reward_extra } #Steal a bonus tech
                }
                5 = { }
            }
        }
    }

    option = { #We're done here (smooth)
        name = operation.20008.a.smooth
        trigger = {
            fromfrom = { has_espionage_operation_flag = smooth_exit }
        }
        fromfrom.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -20 }
        }
    }
    option = { #We're done here (messy)
        name = operation.20008.a.messy
        trigger = {
            fromfrom = { NOT = { has_espionage_operation_flag = smooth_exit } }
        }
        fromfrom.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -30 }
        }

    }
    option = { #Sabotage their current research
        name = {
            trigger = {
                fromfrom = { has_espionage_operation_flag = smooth_exit }
            }
            text = operation.20008.b.smooth
        }
        name = {
            trigger = {
                fromfrom = { NOT = { has_espionage_operation_flag = smooth_exit } }
            }
            text = operation.20008.b.messy
        }
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        trigger = {
            fromfrom = {
                OR = {
                    has_espionage_asset = asset_hacker
                    has_espionage_asset = asset_memory_cache
                }
            }
        }
        allow = {
            exists = fromfrom.target
            fromfrom.target = {
                NOT = { has_modifier = research_stolen_sabotaged } #Not stackable
            }
        }
        hidden_effect = {
            fromfrom.target = {
                country_event = { id = operation.20009 }
            }
        }
        root = {
            add_resource = { influence = 25 }
        }
        custom_tooltip = operation.20008.b.tooltip
        fromfrom = {
            if = {
                limit = { has_espionage_operation_flag = smooth_exit }
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -30 }
                }
            }
            else = {
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -40 }
                }
            }
            destroy_espionage_asset_sabotage = yes
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }
    }
    option = { #Research backdoor
        name = operation.20008.c
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        trigger = {
            root = {
                relative_encryption_decryption = {
                    target = fromfrom.target
                    value > 1.4
                }
            }
            fromfrom = {
                OR = {
                    has_espionage_asset_subterfuge = yes
                    has_espionage_asset_technology = yes
                }
            }
        }
        allow = {
            custom_tooltip = {
                fail_text = "requires_not_espionage_research_backdoor"
                NOT = { has_modifier = espionage_research_backdoor } #Not stackable
            }
        }
        root = {
            add_modifier = { modifier = espionage_research_backdoor days = 1080 }
			add_resource = { influence = 20 }
        }
        fromfrom = {
            if = {
                limit = { has_espionage_operation_flag = smooth_exit }
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -20 }
                }
            }
            else = {
                spynetwork = {
                    add_spy_network_level_on_success_effect = { VALUE = -30 }
                }
            }
            if = {
                limit = { has_espionage_asset_technology = yes }
                destroy_espionage_asset_technology = yes
            }
            else_if = {
                limit = { has_espionage_asset_subterfuge = yes }
                destroy_espionage_asset_subterfuge = yes
            }
        }
    }
    option = { #Steal extra technology
        name = operation.20008.d
        icon = {
            icon = GFX_espionage_asset_icon
            text = ESPIONAGE_OPERATION_ASSET_EVENT_OPTION
        }
        custom_tooltip = operation.20008.d.tooltip
        trigger = {
            fromfrom = {
                has_espionage_operation_flag = reward_extra #Also requires "smooth_exit" and an Asset
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = engineering
				}
            }
        }
        root = {
            copy_random_tech_from = {
                who = fromfrom.target
				area = engineering	
                progress = 0.30
            }
        }
        fromfrom = {
            if = {
                limit = { has_espionage_asset_technology = yes }
                destroy_espionage_asset_technology = yes
            }
            else_if = {
                limit = { has_espionage_asset_subterfuge = yes }
                destroy_espionage_asset_subterfuge = yes
            }
            spynetwork = {
                add_spy_network_level_on_success_effect = { VALUE = -30 }
            }
        }
    }

    after = {
        custom_tooltip = operation.20008.tooltip.cooldown
		fromfrom.spynetwork = {
			set_saved_date = {
				key = recently_stole_technology
				days_from_present = @StealTechnologyTimer
				expires = @StealTechnologyTimer
			}
		}
        if = {
            limit = {
                can_copy_random_tech_from = { 
					who = fromfrom.target 
					area = engineering
				}
            }
			copy_random_tech_from = {
			    who = fromfrom.target
			    area = engineering
			    progress = 0.40	
			}
        }
        else = {
            add_resource = { engineering_research = @AdvancedStealTechnologyAmount }
        }
        hidden_effect = {
            if = {
                limit = {
                    owner = { NOT = { has_country_flag = operation_complete_steal_technology } }
                }
                owner = {
                    change_variable = {
                        which = tinker_tailor_soldier_blorg_achievement_count
                        value = 1
                    }
                    set_country_flag = operation_complete_steal_technology
                }
            }
        }
        destroy_espionage_operation = fromfrom
    }
}
##강화된 기술연구 훼방
country_event = {
    id = operation.20009
    title = operation.20009.name
    desc = {
        trigger = { is_gestalt = no }
        text = operation.20009.desc.regular
    }
    desc = {
        trigger = { is_gestalt = yes }
        text = operation.20009.desc.gestalt
    }
    picture = GFX_evt_archaeologists_escaping
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
        add_modifier = {
            modifier = research_stolen_sabotaged
            days = 1080
        }
    }

    option = {
        name = CURSES
    }
}

##유리한 무역협정 첩보페이즈 1
espionage_operation_event = {
	id = operation.20010
	title = operation.20010.name
	desc = operation.20010.desc
	picture = GFX_evt_spy_network
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##유리한 무역협정 첩보페이즈 2
espionage_operation_event = {
	id = operation.20011
	title = operation.20011.name
	desc = operation.20011.desc
	picture = GFX_evt_acquire_asset
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##유리한 무역협정 첩보페이즈 3
espionage_operation_event = {
	id = operation.20012
	title = operation.20012.name
	desc = operation.20012.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20013 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20013 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20013 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20013 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20013 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}

##협정 체결
country_event = {
	id = operation.20013
	title = operation.20013.name
	desc = operation.20013.desc
	picture = GFX_evt_hand_shake
	show_sound = event_hand_shake

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 5 }
		from.spynetwork = {
			add_spy_network_level_on_success_effect = { VALUE = -15 }
		}
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20014 }
            }
        }		
	}

	after = {
        set_timed_country_flag = {
            flag = recently_trade_agreement@from.target
            days = @TradeTimer
        }	
		hidden_effect = {
			destroy_espionage_operation = from
		}
		if = {
			limit = { has_modifier = lia_op_trade_a }
			remove_modifier = "lia_op_trade_a"
			add_modifier = {
				modifier = "lia_op_trade_c"
				days = 1080
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_trade_c }
			remove_modifier = "lia_op_trade_c"
			add_modifier = {
				modifier = "lia_op_trade_c"
				days = 1080
			}		
		}
		else = {
			add_modifier = {
				modifier = "lia_op_trade_a"
				days = 1080
			}		
		}
	}
}
##협정 상대국
country_event = {
    id = operation.20014
    title = operation.20014.name
    desc = operation.20014.desc
    picture = GFX_evt_intelligence_report
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_trade_b }
			remove_modifier = "lia_op_trade_b"
			add_modifier = {
				modifier = "lia_op_trade_d"
				days = 1080
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_trade_d }
			remove_modifier = "lia_op_trade_d"
			add_modifier = {
				modifier = "lia_op_trade_d"
				days = 1080
			}		
		}
		else = {
			add_modifier = {
				modifier = "lia_op_trade_b"
				days = 1080
			}		
		}
    }

    option = {
        name = CURSES
    }
}
##금융위기 공작 페이즈1
espionage_operation_event = {
	id = operation.20020
	title = operation.20020.name
	desc = operation.20020.desc
	picture = GFX_evt_tradestation_interior
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##금융위기 공작 페이즈2
espionage_operation_event = {
	id = operation.20021
	title = operation.20021.name
	desc = operation.20021.desc
	picture = GFX_evt_galactic_market
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##금융위기 공작 페이즈3
espionage_operation_event = {
	id = operation.20022
	title = operation.20022.name
	desc = operation.20022.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20023 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20023 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20023 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20023 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20023 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##금융 위기
country_event = {
	id = operation.20023
	title = operation.20023.name
	desc = operation.20023.desc
	picture = GFX_evt_tradedeal
	show_sound = event_hand_shake

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 10 }
		from.spynetwork = {
			add_spy_network_level_on_success_effect = { VALUE = -40 }
		}		
	}

	after = {
        set_timed_country_flag = {
            flag = recently_financial_crisis@from.target
            days = @FinanceTimer
        }	
		hidden_effect = {
			destroy_espionage_operation = from
			random_list = {
				90 = {
					modifier = {
						factor = 1.5
						OR = {
							is_gestalt = yes
							is_megacorp = yes
						}
					}
					fromfrom = {
						country_event = { id = operation.20024 }
					}
				}
				7 = {
					fromfrom = {
						country_event = { id = operation.20025 }
					}
					every_country = {
						country_event = { id = operation.20026 }
					}
				}
				3 = {
					fromfrom = {
						country_event = { id = operation.20027 }
					}
					every_country = {
						country_event = { id = operation.20028 }
					}				
				}			
			}
		}	
	}
}
##금융위기 중심국
country_event = {
    id = operation.20024
    title = operation.20024.name
    desc = operation.20024.desc
    picture = GFX_evt_collapsing_roof
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_finance_a }
			remove_modifier = "lia_op_finance_a"
			add_modifier = {
				modifier = "lia_op_finance_a"
				days = 1800
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_finance_b }
			remove_modifier = "lia_op_finance_b"
			add_modifier = {
				modifier = "lia_op_finance_b"
				days = 1800
			}		
		}		
		else_if = {
			limit = { has_modifier = lia_op_finance_d }
			remove_modifier = "lia_op_finance_d"
			add_modifier = {
				modifier = "lia_op_finance_d"
				days = 1800
			}		
		}
		else = {
			add_modifier = {
				modifier = "lia_op_finance_a"
				days = 1800
			}		
		}
    }

    option = {
        name = CURSES
    }
}
##금융위기 중심국-2
country_event = {
    id = operation.20025
    title = operation.20025.name
    desc = operation.20025.desc
    picture = GFX_evt_collapsing_roof
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_finance_a }
			remove_modifier = "lia_op_finance_a"
			add_modifier = {
				modifier = "lia_op_finance_b"
				days = 1800
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_finance_b }
			remove_modifier = "lia_op_finance_b"
			add_modifier = {
				modifier = "lia_op_finance_b"
				days = 1800
			}		
		}
		else_if = {
			limit = { has_modifier = lia_op_finance_d }
			remove_modifier = "lia_op_finance_d"
			add_modifier = {
				modifier = "lia_op_finance_d"
				days = 1800
			}		
		}		
		else = {
			add_modifier = {
				modifier = "lia_op_finance_b"
				days = 1800
			}		
		}
    }

    option = {
        name = CURSES
    }
}
##금융위기 중심국-3
country_event = {
    id = operation.20027
    title = operation.20027.name
    desc = operation.20027.desc
    picture = GFX_evt_collapsing_roof
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_finance_a }
			remove_modifier = "lia_op_finance_a"
			add_modifier = {
				modifier = "lia_op_finance_d"
				days = 1800
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_finance_b }
			remove_modifier = "lia_op_finance_b"
			add_modifier = {
				modifier = "lia_op_finance_d"
				days = 1800
			}		
		}	
		else = {
			if = {
				limit = { has_modifier = lia_op_finance_d }
				remove_modifier = "lia_op_finance_d"
				add_modifier = {
					modifier = "lia_op_finance_d"
					days = 1800
				}			
			}
			else = {
				add_modifier = {
					modifier = "lia_op_finance_d"
					days = 1800
				}
			}
		}
    }

    option = {
        name = CURSES
    }
}
##은하계 금융 위기
country_event = {
    id = operation.20026
    title = operation.20026.name
    desc = operation.20026.desc
    picture = GFX_evt_financial_instruments
    show_sound = event_galactic_market
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_finance_c }
			remove_modifier = "lia_op_finance_c"
			add_modifier = {
				modifier = "lia_op_finance_c"
				days = 1800
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_finance_e }
			remove_modifier = "lia_op_finance_e"
			add_modifier = {
				modifier = "lia_op_finance_e"
				days = 1800
			}		
		}
		else = {
			add_modifier = {
				modifier = "lia_op_finance_c"
				days = 1800
			}		
		}
    }

    option = {
        name = CURSES
		add_resource = { influence = -10 }
    }
}
##은하 대공황
country_event = {
    id = operation.20028
    title = operation.20028.name
    desc = operation.20028.desc
    picture = GFX_evt_financial_instruments
    show_sound = event_galactic_market
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_finance_c }
			remove_modifier = "lia_op_finance_c"
			add_modifier = {
				modifier = "lia_op_finance_e"
				days = 1800
			}
		}
		else_if = {
			limit = { has_modifier = lia_op_finance_e }
			remove_modifier = "lia_op_finance_e"
			add_modifier = {
				modifier = "lia_op_finance_e"
				days = 1800
			}		
		}
		else = {
			add_modifier = {
				modifier = "lia_op_finance_e"
				days = 1800
			}		
		}
    }

    option = {
        name = CURSES
		add_resource = { influence = -20 }
    }
}

##자원생산 사보타주 페이즈1
espionage_operation_event = {
	id = operation.20030
	title = operation.20030.name
	desc = operation.20030.desc
	picture = GFX_evt_mining_operations
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

    immediate = {
        if = {
            limit = {
                NOT = { 
					target = {
						any_owned_planet = {
							OR = {
								num_districts = { type = district_generator value > 1 }
								num_districts = { type = district_mining value > 1 }
								num_districts = { type = district_farming value > 1 }		
								num_districts = { type = district_rw_generator value > 0 }
								num_districts = { type = district_rw_farming value > 0 }
								num_districts = { type = district_hab_energy value > 1 }
								num_districts = { type = district_hab_mining value > 1 }
							}
						}
					}
				}
            }
            set_espionage_operation_progress_locked = yes
            owner = {
                country_event = { id = operation.20039 } #목표행성 상황변화. 작전 중단
            }
        }
    }

	option = {
		name = ACKNOWLEDGED
	}
}

##자원생산 사보타주 페이즈2
espionage_operation_event = {
	id = operation.20031
	title = operation.20031.name
	desc = operation.20031.desc
	picture = GFX_evt_mining_operations
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

    immediate = {
        if = {
            limit = {
                NOT = { 
					target = {
						any_owned_planet = {
							OR = {
								num_districts = { type = district_generator value > 1 }
								num_districts = { type = district_mining value > 1 }
								num_districts = { type = district_farming value > 1 }		
								num_districts = { type = district_rw_generator value > 0 }
								num_districts = { type = district_rw_farming value > 0 }
								num_districts = { type = district_hab_energy value > 1 }
								num_districts = { type = district_hab_mining value > 1 }
							}
						}
					}
				}
            }
            set_espionage_operation_progress_locked = yes
            owner = {
                country_event = { id = operation.20039 } #목표행성 상황변화. 작전 중단
            }
        }
    }

	option = {
		name = ACKNOWLEDGED
	}
}
##자원생산 사보타주 페이즈3
espionage_operation_event = {
	id = operation.20032
	title = operation.20032.name
	desc = operation.20032.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
    immediate = {
        set_espionage_operation_progress_locked = yes
        if = {
            limit = {
                NOT = { 
					target = {
						any_owned_planet = {
							OR = {
								num_districts = { type = district_generator value > 1 }
								num_districts = { type = district_mining value > 1 }
								num_districts = { type = district_farming value > 1 }		
								num_districts = { type = district_rw_generator value > 0 }
								num_districts = { type = district_rw_farming value > 0 }
								num_districts = { type = district_hab_energy value > 1 }
								num_districts = { type = district_hab_mining value > 1 }
							}
						}
					}
				}
            }
            owner = {
                country_event = { id = operation.20039 } #목표행성 상황변화. 작전 중단
            }
        }
        else = {
            target = {
				random_planet_within_border = {
					limit = {
						OR = {
							num_districts = { type = district_generator value > 1 }
							num_districts = { type = district_mining value > 1 }
							num_districts = { type = district_farming value > 1 }		
							num_districts = { type = district_rw_generator value > 0 }
							num_districts = { type = district_rw_farming value > 0 }
							num_districts = { type = district_hab_energy value > 1 }
							num_districts = { type = district_hab_mining value > 1 }
						}					
					}
					save_event_target_as = sabotaged_resource
					owner = { save_event_target_as = sabotaged_resource_owner }
					solar_system = { save_event_target_as = sabotaged_resource_system }
				}
            }
        }
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20033 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20033 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20033 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20033 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20033 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##생산지구 파괴
country_event = {
	id = operation.20033
	title = operation.20033.name
	desc = operation.20033.desc
	picture = GFX_evt_spymaster
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:sabotaged_resource
    }
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			random_list = {
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_generator value < 2 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_generator
						remove_district = district_generator
						remove_district = district_generator
					}
                }
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_mining value < 2 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_mining
						remove_district = district_mining
						remove_district = district_mining
					}
                }
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_farming value < 2 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_farming
						remove_district = district_farming
						remove_district = district_farming
					}
                }
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_rw_generator value < 1 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_rw_generator						
					}
                }
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_rw_farming value < 1 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_rw_farming						
					}
                }
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_hab_energy value < 2 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_hab_energy
						remove_district = district_hab_energy						
					}
                }
                10 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_hab_mining value < 2 }
                        }
                    }
                    event_target:sabotaged_resource = {
						remove_district = district_hab_mining
						remove_district = district_hab_mining						
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_generator value < 4 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_generator value > 5 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_generator
						remove_district = district_generator
						remove_district = district_generator
						remove_district = district_generator
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_mining value < 4 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_mining value > 5 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_mining
						remove_district = district_mining
						remove_district = district_mining	
						remove_district = district_mining
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_farming value < 4 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_farming value > 5 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_farming
						remove_district = district_farming
						remove_district = district_farming
						remove_district = district_farming
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_rw_generator value < 2 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_rw_generator value > 1 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_rw_generator
						remove_district = district_rw_generator						
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_rw_farming value < 2 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_rw_farming value > 1 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_rw_farming
						remove_district = district_rw_farming						
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_hab_energy value < 3 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_hab_energy value > 3 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_hab_energy
						remove_district = district_hab_energy
						remove_district = district_hab_energy						
					}
                }
                3 = { #무슨 지구를 날려버릴지 주사위 굴림
                    modifier = {
                        factor = 0
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_hab_mining value < 3 }
                        }
                    }
                    modifier = {
                        factor = 3
                        event_target:sabotaged_resource = {
                            num_districts = { type = district_hab_mining value > 3 }
                        }
                    }					
                    event_target:sabotaged_resource = {
						remove_district = district_hab_mining
						remove_district = district_hab_mining
						remove_district = district_hab_mining						
					}
                }				
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -20 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20038 } #피해국에 피해상황 보고됨
            }
        }
        destroy_espionage_operation = from
    }	
}
##피해국에 피해상황 보고됨
country_event = {
	id = operation.20038
	title = operation.20038.name
	desc = operation.20038.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
## 상황변화. 작전 종료
country_event = {
    id = operation.20039
    title = operation.20039.name
    desc = operation.20039.desc
    picture = GFX_evt_intelligence_report
    show_sound = event_default
    is_triggered_only = yes

    immediate = { }

    option = {
        name = UNFORTUNATE
		add_resource = { influence = 10 }
    }

    after = {
        destroy_espionage_operation = from
    }
}
##전략물자 테러 페이즈1
espionage_operation_event = {
	id = operation.20040
	title = operation.20040.name
	desc = operation.20040.desc
	picture = GFX_evt_cargoship_caravan
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##전략물자 테러 페이즈2
espionage_operation_event = {
	id = operation.20041
	title = operation.20041.name
	desc = operation.20041.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##전략물자 테러 페이즈3
espionage_operation_event = {
	id = operation.20042
	title = operation.20042.name
	desc = operation.20042.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20043 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20043 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20043 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20043 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20043 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##저장고 테러
country_event = {
	id = operation.20043
	title = operation.20043.name
	desc = operation.20043.desc
	picture = GFX_evt_night_raid
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			random_list = {
                10 = { #어떤 자원을 얼마나 날릴것인지 굴림
                    modifier = {
                        factor = 0.2
                        from.target = {
                            resource_stockpile_compare = {
								resource = alloys
								value < 500
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 500 } ###얼마나 터트렸는지		
					set_variable = { which = "liaoprsb" value = 500 } ###2차 변수				
                    from.target = {
						add_resource = { alloys = -500 }						
					}
                }
                10 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = volatile_motes
								value < 200
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 200 }
					set_variable = { which = "liaoprsb" value = 200 }					
                    from.target = {
						add_resource = { volatile_motes = -200 }						
					}
                }
                10 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = exotic_gases
								value < 200
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 200 }
					set_variable = { which = "liaoprsb" value = 200 }					
                    from.target = {
						add_resource = { exotic_gases = -200 }						
					}
                }
                10 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = rare_crystals
								value < 200
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 200 }
					set_variable = { which = "liaoprsb" value = 200 }					
                    from.target = {
						add_resource = { rare_crystals = -200 }						
					}
                }
                3 = { #더 효과적인 테러
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = alloys
								value < 1500
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = alloys
								value > 3000
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 1500 }
					set_variable = { which = "liaoprsb" value = 1500 }					
                    from.target = {
						add_resource = { alloys = -1500 }						
					}
                }
                3 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = volatile_motes
								value < 600
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = volatile_motes
								value > 1000
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 600 }
					set_variable = { which = "liaoprsb" value = 600 }					
                    from.target = {
						add_resource = { volatile_motes = -600 }						
					}
                }
                3 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = exotic_gases
								value < 600
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = exotic_gases
								value > 1000
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 600 }
					set_variable = { which = "liaoprsb" value = 600 }					
                    from.target = {
						add_resource = { exotic_gases = -600 }						
					}
                }
                3 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = rare_crystals
								value < 600
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = rare_crystals
								value > 1000
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 600 }
					set_variable = { which = "liaoprsb" value = 600 }					
                    from.target = {
						add_resource = { rare_crystals = -600 }						
					}
                }
                1 = { #아주 뼈아픈 테러
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = alloys
								value < 4500
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = alloys
								value > 6000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = alloys
								value > 10000
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 4500 }
					set_variable = { which = "liaoprsb" value = 4500 }					
                    from.target = {
						add_resource = { alloys = -4500 }						
					}
                }
                1 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = volatile_motes
								value < 1800
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = volatile_motes
								value > 3000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = volatile_motes
								value > 4800
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 1800 }
					set_variable = { which = "liaoprsb" value = 1800 }					
                    from.target = {
						add_resource = { volatile_motes = -1800 }						
					}
                }
                1 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = exotic_gases
								value < 1800
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = exotic_gases
								value > 3000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = exotic_gases
								value > 4800
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 1800 }
					set_variable = { which = "liaoprsb" value = 1800 }					
                    from.target = {
						add_resource = { exotic_gases = -1800 }						
					}
                }
                1 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = rare_crystals
								value < 1800
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = rare_crystals
								value > 3000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = rare_crystals
								value > 4800
							}
                        }
                    }
					set_variable = { which = "liaoprsa" value = 1800 }
					set_variable = { which = "liaoprsb" value = 1800 }					
                    from.target = {
						add_resource = { rare_crystals = -1800 }						
					}
                }
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -35 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20049 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20048 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 성과 보고
country_event = {
	id = operation.20048
	title = operation.20048.name
	desc = operation.20048.desc
	picture = GFX_evt_burning_city
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##피해국에 피해상황 보고됨2
country_event = {
	id = operation.20049
	title = operation.20049.name
	desc = operation.20049.desc
	picture = GFX_evt_burning_city
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
##가짜뉴스 작전 페이즈1
espionage_operation_event = {
	id = operation.20050
	title = operation.20050.name
	desc = operation.20050.desc
	picture = GFX_evt_synth_sabotage
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##가짜뉴스 작전 페이즈2
espionage_operation_event = {
	id = operation.20051
	title = operation.20051.name
	desc = operation.20051.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##가짜뉴스 작전 페이즈3
espionage_operation_event = {
	id = operation.20052
	title = operation.20052.name
	desc = operation.20052.desc
	picture = GFX_evt_news_room
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20053 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20053 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20053 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20053 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20053 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##가짜뉴스 살포
country_event = {
	id = operation.20053
	title = operation.20053.name
	desc = operation.20053.desc
	picture = GFX_evt_assembly_fight
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			random_list = {
                10 = { #효과가 어느정도일지 굴림
                    from.target = {
						if = {
							limit = { has_modifier = lia_op_fake_a }
							remove_modifier = "lia_op_fake_a"
							add_modifier = {
								modifier = "lia_op_fake_a"
								days = 1080
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_fake_b }
							remove_modifier = "lia_op_fake_b"
							add_modifier = {
								modifier = "lia_op_fake_b"
								days = 1080
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_fake_c }
							remove_modifier = "lia_op_fake_c"
							add_modifier = {
								modifier = "lia_op_fake_c"
								days = 1080
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_fake_a"
								days = 1080
							}
						}
					}
                }
                3 = { 
                    modifier = {
                        factor = 2
                        from.target = {
                            pop_amount > 700
                        }
                    }
                    from.target = {
						if = {
							limit = { has_modifier = lia_op_fake_a }
							remove_modifier = "lia_op_fake_a"
							add_modifier = {
								modifier = "lia_op_fake_b"
								days = 1080
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_fake_b }
							remove_modifier = "lia_op_fake_b"
							add_modifier = {
								modifier = "lia_op_fake_b"
								days = 1080
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_fake_c }
							remove_modifier = "lia_op_fake_c"
							add_modifier = {
								modifier = "lia_op_fake_c"
								days = 1080
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_fake_b"
								days = 1080
							}
						}						
					}
                }
                2 = { 
                    modifier = {
                        factor = 2
                        from.target = {
                            pop_amount > 1200
                        }
                    }
                    from.target = {
						if = {
							limit = { has_modifier = lia_op_fake_a }
							remove_modifier = "lia_op_fake_a"
							add_modifier = {
								modifier = "lia_op_fake_c"
								days = 1080
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_fake_b }
							remove_modifier = "lia_op_fake_b"
							add_modifier = {
								modifier = "lia_op_fake_c"
								days = 1080
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_fake_b }
							remove_modifier = "lia_op_fake_b"
							add_modifier = {
								modifier = "lia_op_fake_c"
								days = 1080
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_fake_c"
								days = 1080
							}
						}						
					}
                }
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -15 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_fake_news@from.target
            days = @FakeTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20059 } #피해국에 피해상황 보고됨
            }
        }
        destroy_espionage_operation = from
    }	
}
##피해국이 가짜뉴스를 인지함
country_event = {
	id = operation.20059
	title = operation.20059.name
	desc = operation.20059.desc
	picture = GFX_evt_news_room
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
##반정부 시위 페이즈1
espionage_operation_event = {
	id = operation.20060
	title = operation.20060.name
	desc = operation.20060.desc
	picture = GFX_evt_metropolis
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##반정부 시위 페이즈2
espionage_operation_event = {
	id = operation.20061
	title = operation.20061.name
	desc = operation.20061.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##반정부 시위 페이즈3
espionage_operation_event = {
	id = operation.20062
	title = operation.20062.name
	desc = operation.20062.desc
	picture = GFX_evt_hand_shake
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
    immediate = {
        target = {
			random_owned_planet = {
				limit = {
					pop_amount > 0
				}
				save_event_target_as = support_antigov
				owner = { save_event_target_as = support_antigov_owner }
				solar_system = { save_event_target_as = support_antigov_system }
			}
        }
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20063 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20063 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20063 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20063 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20063 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##시위 발발
country_event = {
	id = operation.20063
	title = operation.20063.name
	desc = operation.20063.desc
	picture = GFX_evt_open_revolt
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:support_antigov
    }
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			random_list = {
                10 = { #평범한 반정부 시위
                    event_target:support_antigov = {
						add_modifier = {
							modifier = "lia_op_antigov_a"
							days = 1800
						}
					}
                }
                3 = { #이슈화된 반정부 시위
                    event_target:support_antigov = {
						add_modifier = {
							modifier = "lia_op_antigov_b"
							days = 1800
						}
					}
                }
                2 = { #대규모 반정부 시위
                    event_target:support_antigov = {
						add_modifier = {
							modifier = "lia_op_antigov_c"
							days = 1800
						}
					}
                }				
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -40 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_support_antigov@from.target
            days = @AntigovTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20069 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20068 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 반정부 시위 보도
country_event = {
	id = operation.20068
	title = operation.20068.name
	desc = operation.20068.desc
	picture = GFX_evt_news_room
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##피해국 반정부 시위 보도
country_event = {
	id = operation.20069
	title = operation.20069.name
	desc = operation.20069.desc
	picture = GFX_evt_news_room
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
##전쟁범죄 공론화 페이즈1
espionage_operation_event = {
	id = operation.20070
	title = operation.20070.name
	desc = operation.20070.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##전쟁범죄 공론화 페이즈2
espionage_operation_event = {
	id = operation.20071
	title = operation.20071.name
	desc = operation.20071.desc
	picture = GFX_evt_announcement
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##전쟁범죄 공론화 페이즈3
espionage_operation_event = {
	id = operation.20072
	title = operation.20072.name
	desc = operation.20072.desc
	picture = GFX_evt_galactic_senate
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
    immediate = {
        if = {
            limit = {
                NOT = { 
					target = {
						off_war_exhaustion_sum > 0
					}
				}
            }
	        set_espionage_operation_progress_locked = yes			
            owner = {
                country_event = { id = operation.20078 } #명분상실. 작전 중단
            }		
        }		
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20073 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20073 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20073 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20073 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20073 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20501 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##전쟁범죄 규탄
country_event = {
	id = operation.20073
	title = operation.20073.name
	desc = operation.20073.desc
	picture = GFX_evt_arguing_senate
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			random_list = {
                10 = { #성공한 전쟁범죄 공론화
					from.target = {
						if = {
							limit = { has_modifier = lia_op_warcrime_a }
							remove_modifier = "lia_op_warcrime_a"
							add_modifier = {
								modifier = "lia_op_warcrime_a"
								days = 1800
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_warcrime_b }
							remove_modifier = "lia_op_warcrime_b"
							add_modifier = {
								modifier = "lia_op_warcrime_b"
								days = 1800
							}		
						}		
						else_if = {
							limit = { has_modifier = lia_op_warcrime_c }
							remove_modifier = "lia_op_warcrime_c"
							add_modifier = {
								modifier = "lia_op_warcrime_c"
								days = 1800
							}		
						}
						else = {
							add_modifier = {
								modifier = "lia_op_warcrime_a"
								days = 1800
							}		
						}
					}
                }
                3 = { #잇따르는 국제사회의 규탄성명
					from.target = {
						if = {
							limit = { has_modifier = lia_op_warcrime_a }
							remove_modifier = "lia_op_warcrime_a"
							add_modifier = {
								modifier = "lia_op_warcrime_b"
								days = 1800
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_warcrime_b }
							remove_modifier = "lia_op_warcrime_b"
							add_modifier = {
								modifier = "lia_op_warcrime_b"
								days = 1800
							}		
						}		
						else_if = {
							limit = { has_modifier = lia_op_warcrime_c }
							remove_modifier = "lia_op_warcrime_c"
							add_modifier = {
								modifier = "lia_op_warcrime_c"
								days = 1800
							}		
						}
						else = {
							add_modifier = {
								modifier = "lia_op_warcrime_b"
								days = 1800
							}		
						}
					}
                }
                2 = { #종군기자의 은하계 퓰리처상 특종사진부문 수상
					from.target = {
						if = {
							limit = { has_modifier = lia_op_warcrime_a }
							remove_modifier = "lia_op_warcrime_a"
							add_modifier = {
								modifier = "lia_op_warcrime_c"
								days = 1800
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_warcrime_b }
							remove_modifier = "lia_op_warcrime_b"
							add_modifier = {
								modifier = "lia_op_warcrime_c"
								days = 1800
							}		
						}		
						else_if = {
							limit = { has_modifier = lia_op_warcrime_c }
							remove_modifier = "lia_op_warcrime_c"
							add_modifier = {
								modifier = "lia_op_warcrime_c"
								days = 1800
							}		
						}
						else = {
							add_modifier = {
								modifier = "lia_op_warcrime_c"
								days = 1800
							}		
						}
					}
                }				
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -20 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_war_crime@from.target
            days = @WarcrimeTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20079 } #피해국에 피해상황 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##외교적 상황 파악
country_event = {
	id = operation.20079
	title = operation.20079.name
	desc = operation.20079.desc
	picture = GFX_evt_alien_propaganda
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
##명분상실
country_event = {
    id = operation.20078
    title = operation.20078.name
    desc = operation.20078.desc
    picture = GFX_evt_intelligence_report
    show_sound = event_default
    is_triggered_only = yes

    immediate = { }

    option = {
        name = UNFORTUNATE
		add_resource = { influence = 25 }
    }

    after = {
        destroy_espionage_operation = from
    }
}
##무기지원 페이즈1
espionage_operation_event = {
	id = operation.20080
	title = operation.20080.name
	desc = operation.20080.desc
	picture = GFX_evt_undertaker
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##무기지원 페이즈2
espionage_operation_event = {
	id = operation.20081
	title = operation.20081.name
	desc = operation.20081.desc
	picture = GFX_evt_gunrunning
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##무기지원 페이즈3
espionage_operation_event = {
	id = operation.20082
	title = operation.20082.name
	desc = operation.20082.desc
	picture = GFX_evt_ship_offloading_cargo
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
    immediate = {
        if = {
            limit = {
                NOT = { 
					target = {
						def_war_exhaustion_sum > 0
					}
				}
            }
	        set_espionage_operation_progress_locked = yes			
            owner = {
                country_event = { id = operation.20088 } #지원 목적상실. 작전 중단
            }		
        }		
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			owner = {
				country_event = { id = operation.20083 }
			}
			
		}
	}
}
##지원물자 도착
country_event = {
	id = operation.20083
	title = operation.20083.name
	desc = operation.20083.desc
	picture = GFX_evt_clocks
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			random_list = {
                10 = { #지원물자 도착
                    modifier = {
                        factor = 0.2
                        from.target = {
                            def_war_exhaustion_sum > 60
                        }
                    }				
					from.target = {
						if = {
							limit = { has_modifier = lia_op_vietnam_a }
							remove_modifier = "lia_op_vietnam_a"
							add_modifier = {
								modifier = "lia_op_vietnam_a"
								days = 1800
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_vietnam_b }
							remove_modifier = "lia_op_vietnam_b"
							add_modifier = {
								modifier = "lia_op_vietnam_b"
								days = 1800
							}		
						}		
						else_if = {
							limit = { has_modifier = lia_op_vietnam_c }
							remove_modifier = "lia_op_vietnam_c"
							add_modifier = {
								modifier = "lia_op_vietnam_c"
								days = 1800
							}		
						}
						else = {
							add_modifier = {
								modifier = "lia_op_vietnam_a"
								days = 1800
							}		
						}
					}
                }
                3 = { #열렬히 호응하는 게릴라
                    modifier = {
                        factor = 3
                        from.target = {
                            def_war_exhaustion_sum > 20
                        }
                    }				
					from.target = {
						if = {
							limit = { has_modifier = lia_op_vietnam_a }
							remove_modifier = "lia_op_vietnam_a"
							add_modifier = {
								modifier = "lia_op_vietnam_b"
								days = 1800
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_vietnam_b }
							remove_modifier = "lia_op_vietnam_b"
							add_modifier = {
								modifier = "lia_op_vietnam_b"
								days = 1800
							}		
						}		
						else_if = {
							limit = { has_modifier = lia_op_vietnam_c }
							remove_modifier = "lia_op_vietnam_c"
							add_modifier = {
								modifier = "lia_op_vietnam_c"
								days = 1800
							}		
						}
						else = {
							add_modifier = {
								modifier = "lia_op_vietnam_b"
								days = 1800
							}		
						}
					}
                }
                2 = { #제국의 무덤
                    modifier = {
                        factor = 3
                        from.target = {
                            def_war_exhaustion_sum > 40
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            def_war_exhaustion_sum > 80
                        }
                    }					
					from.target = {
						if = {
							limit = { has_modifier = lia_op_vietnam_a }
							remove_modifier = "lia_op_vietnam_a"
							add_modifier = {
								modifier = "lia_op_vietnam_c"
								days = 1800
							}
						}
						else_if = {
							limit = { has_modifier = lia_op_vietnam_b }
							remove_modifier = "lia_op_vietnam_b"
							add_modifier = {
								modifier = "lia_op_vietnam_c"
								days = 1800
							}		
						}		
						else_if = {
							limit = { has_modifier = lia_op_vietnam_c }
							remove_modifier = "lia_op_vietnam_c"
							add_modifier = {
								modifier = "lia_op_vietnam_c"
								days = 1800
							}		
						}
						else = {
							add_modifier = {
								modifier = "lia_op_vietnam_c"
								days = 1800
							}		
						}
					}
                }				
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -10 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_vietnam_war@from.target
            days = @VietnamTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20089 } #지원국에 지원상황 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##지원물자 도착
country_event = {
	id = operation.20089
	title = operation.20089.name
	desc = operation.20089.desc
	picture = GFX_evt_cargoship_caravan
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##목적상실
country_event = {
    id = operation.20088
    title = operation.20088.name
    desc = operation.20088.desc
    picture = GFX_evt_intelligence_report
    show_sound = event_default
    is_triggered_only = yes

    immediate = { }

    option = {
        name = UNFORTUNATE
		add_resource = { influence = 20 }
    }

    after = {
        destroy_espionage_operation = from
    }
}
##군함사고 페이즈1
espionage_operation_event = {
	id = operation.20130
	title = operation.20130.name
	desc = operation.20130.desc
	picture = GFX_evt_hangar_bay
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##군함사고 페이즈2
espionage_operation_event = {
	id = operation.20131
	title = operation.20131.name
	desc = operation.20131.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##군함사고 페이즈3
espionage_operation_event = {
	id = operation.20132
	title = operation.20132.name
	desc = operation.20132.desc
	picture = GFX_evt_fleet_neutral
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
    immediate = {
        set_espionage_operation_progress_locked = yes
        if = {
            limit = {
                NOT = { 
					target = {
						any_owned_ship = {
							OR = {
								is_ship_size = corvette
								is_ship_size = destroyer
								is_ship_size = cruiser
								is_ship_size = battleship
								is_ship_size = titan						
							}
						}
					}
				}
            }
            owner = {
                country_event = { id = operation.20138 } #목표함선 상황변화. 작전 중단
            }
        }
        else = {
            target = {
				if = { #전함 체크
					limit = {
						any_owned_ship = {
							is_ship_size = battleship						
						}
					}
					random_list = {
						14 = { #15분의14 확률로 전함을 뽀개고
							random_owned_ship = {
								limit = {
									is_ship_size = battleship				
								}
								save_event_target_as = ship_accident
								fleet = { save_event_target_as = ship_accident_fleet }
								solar_system = { save_event_target_as = ship_accident_system }
							}
						}
						1 = { #15분의1 확률로 타이탄을 뽀갤것이다
							modifier = {
								factor = 0 #물론 타이탄이 있다면 말이다
								any_owned_ship = { #이건 그걸 체크하는것이다. 제발 작동했으면 좋겠다
									NOT = {
										is_ship_size = titan
									}
								}
							}							
							random_owned_ship = {
								limit = {
									is_ship_size = titan				
								}
								save_event_target_as = ship_accident
								fleet = { save_event_target_as = ship_accident_fleet }
								solar_system = { save_event_target_as = ship_accident_system }
							}
						}						
					}	
				}
				else_if = {
					limit = {
						any_owned_ship = {
							is_ship_size = cruiser						
						}
					}
					random_owned_ship = {
						limit = {
							is_ship_size = cruiser				
						}
						save_event_target_as = ship_accident
						fleet = { save_event_target_as = ship_accident_fleet }
						solar_system = { save_event_target_as = ship_accident_system }
					}
				}
				else_if = {
					limit = {
						any_owned_ship = {
							is_ship_size = destroyer						
						}
					}
					random_owned_ship = {
						limit = {
							is_ship_size = destroyer				
						}
						save_event_target_as = ship_accident
						fleet = { save_event_target_as = ship_accident_fleet }
						solar_system = { save_event_target_as = ship_accident_system }
					}
					random_owned_ship = {
						limit = {
							is_ship_size = destroyer				
						}
						save_event_target_as = ship_accident2
					}					
				}
				else = {
					limit = {
						any_owned_ship = {
							is_ship_size = corvette						
						}
					}
					random_owned_ship = {
						limit = {
							is_ship_size = corvette				
						}
						save_event_target_as = ship_accident
						fleet = { save_event_target_as = ship_accident_fleet }
						solar_system = { save_event_target_as = ship_accident_system }
					}
					random_owned_ship = {
						limit = {
							is_ship_size = corvette				
						}
						save_event_target_as = ship_accident2
					}
					random_owned_ship = {
						limit = {
							is_ship_size = corvette				
						}
						save_event_target_as = ship_accident3
					}					
				}				
            }
        }
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20133 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20133 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20133 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20133 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20133 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##함선 파괴
country_event = {
	id = operation.20133
	title = operation.20133.name
	desc = operation.20133.desc
	picture = GFX_evt_sabotaged_ship
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:ship_accident
    }
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			destroy_ship = event_target:ship_accident
			destroy_ship = event_target:ship_accident2
			destroy_ship = event_target:ship_accident3
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -30 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20139 } #피해국에 피해상황 보고됨
            }
        }
        destroy_espionage_operation = from
    }	
}
##피해국에 피해상황 보고됨
country_event = {
	id = operation.20139
	title = operation.20139.name
	desc = operation.20139.desc
	picture = GFX_evt_debris
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
## 상황변화. 작전 종료
country_event = {
    id = operation.20138
    title = operation.20138.name
    desc = operation.20138.desc
    picture = GFX_evt_intelligence_report
    show_sound = event_default
    is_triggered_only = yes

    immediate = { }

    option = {
        name = UNFORTUNATE
		add_resource = { influence = 10 }
    }

    after = {
        destroy_espionage_operation = from
    }
}
##FTL 방해 페이즈1
espionage_operation_event = {
	id = operation.20140
	title = operation.20140.name
	desc = operation.20140.desc
	picture = GFX_evt_unknown_ships
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##FTL 방해 페이즈2
espionage_operation_event = {
	id = operation.20141
	title = operation.20141.name
	desc = operation.20141.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##FTL 방해 페이즈3
espionage_operation_event = {
	id = operation.20142
	title = operation.20142.name
	desc = operation.20142.desc
	picture = GFX_evt_worrying_signal
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20143 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20143 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20143 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20143 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20143 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##전자전 감행
country_event = {
	id = operation.20143
	title = operation.20143.name
	desc = operation.20143.desc
	picture = GFX_evt_mysterious_signal
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 10 }
		hidden_effect = {
			from.target = {
				if = {
					limit = { has_modifier = lia_op_hyperlane }
					remove_modifier = "lia_op_hyperlane"
					add_modifier = {
						modifier = "lia_op_hyperlane"
						days = 540
					}
				}
				else = {
					add_modifier = {
						modifier = "lia_op_hyperlane"
						days = 540
					}
				}							
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -35 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_hyperlane_dist@from.target
            days = @HyperlaneTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20149 } #피해국에 피해상황 보고됨
            }
        }
        destroy_espionage_operation = from
    }	
}
##피해국 항법시스템 교란 확인
country_event = {
	id = operation.20149
	title = operation.20149.name
	desc = operation.20149.desc
	picture = GFX_evt_mysterious_signal
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
# 암호 적용 페이즈1
espionage_operation_event = {
	id = operation.20150
	title = operation.20150.name
	desc = operation.20150.desc
	espionage_operation = yes
	picture = GFX_evt_spymaster
	show_sound = event_default
	is_triggered_only = yes

	option = { name = ACKNOWLEDGED }
}

# 암호 적용 페이즈2
espionage_operation_event = {
	id = operation.20151
	title = operation.20151.name
	desc = operation.20151.desc
	espionage_operation = yes
	picture = GFX_evt_decryption
	show_sound = event_default
	is_triggered_only = yes

	immediate = {
		set_espionage_operation_progress_locked = yes
	}

	option = {
		name = LAUNCH_OPERATION
	}

	after = {
		set_espionage_operation_progress_locked = no
		owner = {
			country_event = { id = operation.20153 }
		}
		hidden_effect = {
			espionage_operation_event = { id = operation.20152 }
		}		
	}
}
#타이머 플래그 설정용 컨트리이벤트
country_event = {
    id = operation.20153
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_timed_country_flag = {
            flag = recently_aggresive_use@from.target
            days = @AgguseTimer
        }	
    }
}
# 발동
espionage_operation_event = {
	id = operation.20152
	title = operation.20152.name
	desc = operation.20152.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		spynetwork = {
			add_modifier = {
				modifier = "lia_op_aggresive_use"
				years = 4
			}
		}
	}
	
	after = {	
		destroy_espionage_operation = this
	}
}
# 첩보망 확장 페이즈1
espionage_operation_event = {
	id = operation.20200
	title = operation.20200.name
	desc = operation.20200.desc
	espionage_operation = yes
	picture = GFX_evt_spymaster
	show_sound = event_default
	is_triggered_only = yes

	option = { name = ACKNOWLEDGED }
}

# 첩보망 확장 페이즈2
espionage_operation_event = {
	id = operation.20201
	title = operation.20201.name
	desc = operation.20201.desc
	espionage_operation = yes
	picture = GFX_evt_decryption
	show_sound = event_default
	is_triggered_only = yes

	immediate = {
		set_espionage_operation_progress_locked = yes
	}

	option = {
		name = LAUNCH_OPERATION
	}

	after = {
		set_espionage_operation_progress_locked = no
		owner = {
			country_event = { id = operation.20203 }
		}
		hidden_effect = {
			espionage_operation_event = { id = operation.20202 }
		}		
	}
}
#타이머 플래그 설정용 컨트리이벤트
country_event = {
    id = operation.20203
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_timed_country_flag = {
            flag = recently_aggresive_net@from.target
            days = @AggnetTimer
        }	
    }
}
# 발동
espionage_operation_event = {
	id = operation.20202
	title = operation.20202.name
	desc = operation.20202.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		spynetwork = {
			add_modifier = {
				modifier = "lia_op_aggresive_net"
				years = 5
			}
		}
	}
	
	after = {	
		destroy_espionage_operation = this
	}
}
##생물승천 전용 페이즈1
espionage_operation_event = {
	id = operation.20300
	title = operation.20300.name
	desc = operation.20300.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##생물승천 전용 페이즈2
espionage_operation_event = {
	id = operation.20301
	title = operation.20301.name
	desc = operation.20301.desc
	picture = GFX_evt_genetic_modification
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##생물승천 전용 페이즈3
espionage_operation_event = {
	id = operation.20302
	title = operation.20302.name
	desc = operation.20302.desc
	picture = GFX_evt_aggressive_flora
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##생물승천 전용 페이즈4
espionage_operation_event = {
	id = operation.20303
	title = operation.20303.name
	desc = operation.20303.desc
	picture = GFX_evt_alien_nature
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			if = { #우선순위1 조건: 기계행성이 수도인가?
				limit = {
					target.capital_scope = {
						is_planet_class = pc_machine
					}
				}
				target.capital_scope = {
					save_event_target_as = nemesis_gene
					solar_system = { save_event_target_as = nemesis_gene_system }
				}
			}
			else_if = { #우선순위2 조건: 영토내에 팝이 존재하는 기계행성이 있는가?
				limit = {
					target = {
						any_owned_planet = {
							is_planet_class = pc_machine
							pop_amount > 0
						}
					}
				}
				target = {
					random_planet_within_border = {
						limit = {
							is_planet_class = pc_machine
							pop_amount > 0
						}
						save_event_target_as = nemesis_gene
						solar_system = { save_event_target_as = nemesis_gene_system }				
					}
				}	
			}
			else_if = { #우선순위3 조건: 영토내에 팝이 존재하는 도시행성이 있는가?
				limit = {
					target = {
						any_owned_planet = {
							is_planet_class = pc_city
							pop_amount > 0
						}
					}
				}
				target = {
					random_planet_within_border = {
						limit = {
							is_planet_class = pc_city
							pop_amount > 0
						}
						save_event_target_as = nemesis_gene
						solar_system = { save_event_target_as = nemesis_gene_system }				
					}
				}
			}
			else_if = { #그렇다면 수도를 대상으로...
				limit = { #잠깐만, 이미 개화한 행성은 빼야지
					target.capital_scope = {
						NOT = { has_modifier = lia_op_gene_b }
					}
				}
				target.capital_scope = { 
					save_event_target_as = nemesis_gene
					solar_system = { save_event_target_as = nemesis_gene_system }				
				}		
			}
			else = { #다 안되면 랜덤행성으로 해야지 뭐
				target = {
					random_planet_within_border = {
						limit = {
							pop_amount > 0
							NOT = { has_modifier = lia_op_gene_b }
						}
						save_event_target_as = nemesis_gene
						solar_system = { save_event_target_as = nemesis_gene_system }
					}
				}
			}
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20304 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20304 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20304 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20304 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20304 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##시행
country_event = {
	id = operation.20304
	title = operation.20304.name
	desc = operation.20304.desc
	picture = GFX_evt_unidentified_monster
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:nemesis_gene
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			from.target = {
				every_owned_planet = {
					limit = {
						pop_amount > 0
					}
					if = {
						limit = { has_modifier = lia_op_gene_a }
						remove_modifier = "lia_op_gene_a"
						add_modifier = {
							modifier = "lia_op_gene_a"
							days = 1800
						}
					}
					else = {
						add_modifier = {
							modifier = "lia_op_gene_a"
							days = 1800
						}
					}					
				}
				event_target:nemesis_gene = {
					change_pc = pc_gaia
					add_modifier = {
						modifier = "lia_op_gene_b"
						days = -1
					}
					add_modifier = {
						modifier = "lia_op_gene_c"
						days = -1
					}					
				}
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -70 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_nemesis@from.target
            days = @NemesisTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20309 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20308 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 작전 보고
country_event = {
	id = operation.20308
	title = operation.20308.name
	desc = operation.20308.desc
	picture = GFX_evt_animal_wildlife
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##피해국 사태 확인
country_event = {
	id = operation.20309
	title = operation.20309.name
	desc = operation.20309.desc
	picture = GFX_evt_unidentified_monster
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
##신스승천 전용 페이즈1
espionage_operation_event = {
	id = operation.20310
	title = operation.20310.name
	desc = operation.20310.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##신스승천 전용 페이즈2
espionage_operation_event = {
	id = operation.20311
	title = operation.20311.name
	desc = operation.20311.desc
	picture = GFX_evt_think_tank
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##신스승천 전용 페이즈3
espionage_operation_event = {
	id = operation.20312
	title = operation.20312.name
	desc = operation.20312.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##신스승천 전용 페이즈4
espionage_operation_event = {
	id = operation.20313
	title = operation.20313.name
	desc = operation.20313.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			target.capital_scope = { #수도를 대상으로...
				save_event_target_as = nemesis_robo
				solar_system = { save_event_target_as = nemesis_robo_system }				
			}				
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20314 days = 1 }
					}
					spynetwork = {
						if = {
							limit = { has_modifier = lia_op_robo_c }
							remove_modifier = "lia_op_robo_c"
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}			
					}					
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20314 days = 1 }
					}
					spynetwork = {
						if = {
							limit = { has_modifier = lia_op_robo_c }
							remove_modifier = "lia_op_robo_c"
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}			
					}					
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20314 days = 1 }
					}
					spynetwork = {
						if = {
							limit = { has_modifier = lia_op_robo_c }
							remove_modifier = "lia_op_robo_c"
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}			
					}					
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20314 days = 1 }
					}
					spynetwork = {
						if = {
							limit = { has_modifier = lia_op_robo_c }
							remove_modifier = "lia_op_robo_c"
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}			
					}					
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20314 days = 1 }
					}
					spynetwork = {
						if = {
							limit = { has_modifier = lia_op_robo_c }
							remove_modifier = "lia_op_robo_c"
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}
						else = {
							add_modifier = {
								modifier = "lia_op_robo_c"
								years = 5
							}
						}			
					}					
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}						
		}
	}
}
##시행
country_event = {
	id = operation.20314
	title = operation.20314.name
	desc = operation.20314.desc
	picture = GFX_evt_machine_sapience
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:nemesis_robo
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			from.target = {
				if = {
					limit = { has_modifier = lia_op_robo_a }
					remove_modifier = "lia_op_robo_a"
					add_modifier = {
						modifier = "lia_op_robo_a"
						days = 1800
					}
				}
				else = {
					add_modifier = {
						modifier = "lia_op_robo_a"
						days = 1800
					}
				}
				event_target:nemesis_robo = {
					if = {
						limit = { has_modifier = lia_op_robo_b }
						remove_modifier = "lia_op_robo_b"
						add_modifier = {
							modifier = "lia_op_robo_b"
							days = 1800
						}
					}
					else = {
						add_modifier = {
							modifier = "lia_op_robo_b"
							days = 1800
						}
					}					
				}
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -70 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_nemesis@from.target
            days = @NemesisTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20319 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20318 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 작전 보고
country_event = {
	id = operation.20318
	title = operation.20318.name
	desc = operation.20318.desc
	picture = GFX_evt_decryption
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##피해국 사태 확인
country_event = {
	id = operation.20319
	title = operation.20319.name
	desc = operation.20319.desc
	picture = GFX_evt_glitchy_matrix
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}
##정신승천 전용 페이즈1
espionage_operation_event = {
	id = operation.20320
	title = operation.20320.name
	desc = operation.20320.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##정신승천 전용 페이즈2
espionage_operation_event = {
	id = operation.20321
	title = operation.20321.name
	desc = operation.20321.desc
	picture = GFX_evt_psionics
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##정신승천 전용 페이즈3
espionage_operation_event = {
	id = operation.20322
	title = operation.20322.name
	desc = operation.20322.desc
	picture = GFX_evt_psionic_battle
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##정신승천 전용 페이즈4
espionage_operation_event = {
	id = operation.20323
	title = operation.20323.name
	desc = operation.20323.desc
	picture = GFX_evt_unspeakable_horror
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			target = {
				random_owned_planet = {
					limit = {
						NOT = { is_planet_class = pc_shrouded }
						pop_amount > 0
					}
					save_event_target_as = nemesis_psyc
					solar_system = { save_event_target_as = nemesis_psyc_system }
				}
			}		
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20324 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20324 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20324 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20324 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20324 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##시행
country_event = {
	id = operation.20324
	title = operation.20324.name
	desc = operation.20324.desc
	picture = GFX_evt_surreal_visions
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:nemesis_psyc
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			if = {
				limit = {
					event_target:nemesis_psyc = {
						pop_amount > 240
						pop_amount < 500
					}
				}
				country_event = { id = operation.19320 days = 3 }
				add_modifier = {
					modifier = "lia_op_psyc_backflow_a"
					days = 1080
				}				
			}
			if = {
				limit = {
					event_target:nemesis_psyc = {
						pop_amount > 490
						pop_amount < 750
					}
				}
				country_event = { id = operation.19320 days = 3 }
				add_modifier = {
					modifier = "lia_op_psyc_backflow_b"
					days = 1080
				}				
			}
			if = {
				limit = {
					event_target:nemesis_psyc = {
						pop_amount > 740
					}
				}
				country_event = { id = operation.19320 days = 3 }
				add_modifier = {
					modifier = "lia_op_psyc_backflow_c"
					days = 1080
				}				
			}			
			from.target = {
				if = { #일반제국일 경우 제국에 붙을 모디파이어
					limit = { is_gestalt = no }
					if = {
						limit = { has_modifier = lia_op_psyc_a }
						remove_modifier = "lia_op_psyc_a"
						add_modifier = {
							modifier = "lia_op_psyc_a"
							days = 1800
						}
					}
					else = {
						add_modifier = {
							modifier = "lia_op_psyc_a"
							days = 1800
						}
					}					
				}
				else = { #게슈탈트 제국일 경우 제국에 붙을 모디파이어
					if = {
						limit = { has_modifier = lia_op_psyc_b }
						remove_modifier = "lia_op_psyc_b"
						add_modifier = {
							modifier = "lia_op_psyc_b"
							days = 1800
						}
					}
					else = {
						add_modifier = {
							modifier = "lia_op_psyc_b"
							days = 1800
						}
					}								
				}
				event_target:nemesis_psyc = { #장막의 간택을 받은 가엾은 행성은
					change_pc = pc_shrouded #축복 받을 지어다		
				}
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -70 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_nemesis@from.target
            days = @NemesisTimer
        }	
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20329 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20328 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 작전 보고
country_event = {
	id = operation.20328
	title = operation.20328.name
	desc = operation.20328.desc
	picture = GFX_evt_shrouded_planet
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##사주국 사이킥 역류
country_event = {
	id = operation.19320
	title = operation.19320.name
	desc = operation.19320.desc
	picture = GFX_evt_shrouded_planet
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
		add_resource = { influence = 25 }
	}
}
##피해국 사태 확인
country_event = {
	id = operation.20329
	title = operation.20329.name
	desc = operation.20329.desc
	picture = GFX_evt_shrouded_planet
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}

#####################################################################
#######################오랜만의 업데이트####################################
#####################################################################

##외교 향상 페이즈1
espionage_operation_event = {
	id = operation.20400
	title = operation.20400.name
	desc = operation.20400.desc
	picture = GFX_evt_galactic_senate
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##외교 향상 페이즈2
espionage_operation_event = {
	id = operation.20401
	title = operation.20401.name
	desc = operation.20401.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##외교 향상 페이즈3
espionage_operation_event = {
	id = operation.20402
	title = operation.20402.name
	desc = operation.20402.desc
	picture = GFX_evt_hand_shake
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			owner = {
				country_event = { id = operation.20403 }
			}
			
		}
	}
}
##악수와 기념사진
country_event = {
	id = operation.20403
	title = operation.20403.name
	desc = operation.20403.desc
	picture = GFX_evt_galactic_community
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		add_opinion_modifier = {
			who = from.target
			modifier = opinion_lia_diplo_plus
		}	
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -10 }
        }
		from.target = {
			country_event = { id = operation.20404 }
		}		
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        set_timed_country_flag = {
            flag = recently_diplo_plus@from.target
            days = @DipplusTimer
        }	
        destroy_espionage_operation = from
    }	
}
#상대국에도 모디파이어 달아주기
country_event = {
    id = operation.20404
    hide_window = yes
    is_triggered_only = yes

    immediate = {
		add_opinion_modifier = {
			who = from
			modifier = opinion_lia_diplo_plus
		}		
    }
}

##자원 탈취 페이즈1
espionage_operation_event = {
	id = operation.20410
	title = operation.20410.name
	desc = operation.20410.desc
	picture = GFX_evt_pirate_armada
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##자원 탈취 페이즈2
espionage_operation_event = {
	id = operation.20411
	title = operation.20411.name
	desc = operation.20411.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##자원 탈취 페이즈3
espionage_operation_event = {
	id = operation.20412
	title = operation.20412.name
	desc = operation.20412.desc
	picture = GFX_evt_pirate_armada
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20413 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20413 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20413 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20413 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20413 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##약탈 시작
country_event = {
	id = operation.20413
	title = operation.20413.name
	desc = operation.20413.desc
	picture = GFX_evt_pirates_attacking_cargo
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {
                10 = { #어떤 자원을 얼마나 약탈할지 굴림
                    modifier = {
                        factor = 0.2
                        from.target = {
                            resource_stockpile_compare = {
								resource = food
								value < 2000
							}
                        }
                    }
					set_variable = { which = "liaopmpa" value = 2000 }
					set_variable = { which = "liaopmpb" value = 2000 }					
                    from.target = {
						add_resource = { food = -2000 }						
					}
                    owner = {
						add_resource = { food = 1500 }						
					}					
                }
                10 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = minerals
								value < 2000
							}
                        }
                    }
					set_variable = { which = "liaopmpa" value = 2000 }
					set_variable = { which = "liaopmpb" value = 2000 }					
                    from.target = {
						add_resource = { minerals = -2000 }						
					}
                    owner = {
						add_resource = { minerals = 1500 }						
					}					
                }
                3 = { #더 효과적인 약탈
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = food
								value < 3000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = food
								value > 5000
							}
                        }
                    }
					set_variable = { which = "liaopmpa" value = 3000 }
					set_variable = { which = "liaopmpb" value = 3000 }					
                    from.target = {
						add_resource = { food = -3000 }						
					}
                    owner = {
						add_resource = { food = 2500 }						
					}					
                }
                3 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = minerals
								value < 3000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = minerals
								value > 5000
							}
                        }
                    }
					set_variable = { which = "liaopmpa" value = 3000 }
					set_variable = { which = "liaopmpb" value = 3000 }					
                    from.target = {
						add_resource = { minerals = -3000 }						
					}
                    owner = {
						add_resource = { minerals = 2500 }						
					}					
                }
                1 = { #아주 뼈아픈 약탈
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = food
								value < 5000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = food
								value > 7500
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = food
								value > 10000
							}
                        }
                    }
					set_variable = { which = "liaopmpa" value = 5000 }
					set_variable = { which = "liaopmpb" value = 5000 }					
                    from.target = {
						add_resource = { food = -5000 }						
					}
                    owner = {
						add_resource = { food = 4000 }						
					}					
                }
                1 = { 
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = minerals
								value < 5000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = minerals
								value > 7500
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = minerals
								value > 10000
							}
                        }
                    }
					set_variable = { which = "liaopmpa" value = 5000 }
					set_variable = { which = "liaopmpb" value = 5000 }					
                    from.target = {
						add_resource = { minerals = -5000 }						
					}
                    owner = {
						add_resource = { minerals = 4000 }						
					}					
                }
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -35 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20419 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20418 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 성과 보고
country_event = {
	id = operation.20418
	title = operation.20418.name
	desc = operation.20418.desc
	picture = GFX_evt_burning_city
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##피해국에 피해상황 보고됨2
country_event = {
	id = operation.20419
	title = operation.20419.name
	desc = operation.20419.desc
	picture = GFX_evt_burning_city
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}

##크레딧 탈취 페이즈1
espionage_operation_event = {
	id = operation.20420
	title = operation.20420.name
	desc = operation.20420.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##크레딧 탈취 페이즈2
espionage_operation_event = {
	id = operation.20421
	title = operation.20421.name
	desc = operation.20421.desc
	picture = GFX_evt_worrying_signal
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##크레딧 탈취 페이즈3
espionage_operation_event = {
	id = operation.20422
	title = operation.20422.name
	desc = operation.20422.desc
	picture = GFX_evt_mysterious_signal
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20423 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20423 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20423 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20423 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20423 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}
##크레딧 약탈 시작
country_event = {
	id = operation.20423
	title = operation.20423.name
	desc = operation.20423.desc
	picture = GFX_evt_financial_instruments
	show_sound = event_hand_shake

	is_triggered_only = yes
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {
                10 = { #크레딧을 얼마나 털지 굴림
					set_variable = { which = "liaopcpa" value = 2000 }
					set_variable = { which = "liaopcpb" value = 2000 }					
                    from.target = {
						add_resource = { energy = -2000 }						
					}
                    owner = {
						add_resource = { energy = 1500 }						
					}					
                }
                3 = { #더 효과적인 약탈
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = energy
								value < 2000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = energy
								value > 5000
							}
                        }
                    }
					set_variable = { which = "liaopcpa" value = 3000 }
					set_variable = { which = "liaopcpb" value = 3000 }						
                    from.target = {
						add_resource = { energy = -3000 }						
					}
                    owner = {
						add_resource = { energy = 2500 }						
					}					
                }
                1 = { #아주 뼈아픈 약탈
                    modifier = {
                        factor = 0
                        from.target = {
                            resource_stockpile_compare = {
								resource = energy
								value < 5000
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = energy
								value > 7500
							}
                        }
                    }
                    modifier = {
                        factor = 3
                        from.target = {
                            resource_stockpile_compare = {
								resource = energy
								value > 10000
							}
                        }
                    }
					set_variable = { which = "liaopcpa" value = 5000 }
					set_variable = { which = "liaopcpb" value = 5000 }						
                    from.target = {
						add_resource = { energy = -5000 }						
					}
                    owner = {
						add_resource = { energy = 4000 }						
					}					
                }
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -35 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20429 } #피해국에 피해상황 보고됨
            }
            owner = {
                country_event = { id = operation.20428 } #사주국에 작전결과 보고됨
            }			
        }
        destroy_espionage_operation = from
    }	
}
##사주국 성과 보고
country_event = {
	id = operation.20428
	title = operation.20428.name
	desc = operation.20428.desc
	picture = GFX_evt_financial_instruments
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
}
##피해국에 피해상황 보고됨2
country_event = {
	id = operation.20429
	title = operation.20429.name
	desc = operation.20429.desc
	picture = GFX_evt_financial_instruments
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
	}
}

##군체 교란 페이즈 1
espionage_operation_event = {
	id = operation.20090
	title = operation.20090.name
	desc = operation.20090.desc
	picture = GFX_evt_society_research
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##군체 교란 페이즈 2
espionage_operation_event = {
	id = operation.20091
	title = operation.20091.name
	desc = operation.20091.desc
	picture = GFX_evt_hive_mind
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##군체 교란 페이즈 3
espionage_operation_event = {
	id = operation.20092
	title = operation.20092.name
	desc = operation.20092.desc
	picture = GFX_evt_genetic_modification
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20093 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20093 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20093 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20093 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20093 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}

##신경망 교란
country_event = {
	id = operation.20093
	title = operation.20093.name
	desc = operation.20093.desc
	picture = GFX_evt_microscopic_life
	show_sound = event_hand_shake

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 10 }
		from.spynetwork = {
			add_spy_network_level_on_success_effect = { VALUE = -40 }
		}
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20099 }
            }
        }		
	}

	after = {
        set_timed_country_flag = {
            flag = recently_disturb_hive@from.target
            days = @DisHiveTimer
        }	
		hidden_effect = {
			destroy_espionage_operation = from
		}
	}
}
##군체 반응
country_event = {
    id = operation.20099
    title = operation.20099.name
    desc = operation.20099.desc
    picture = GFX_evt_hive_mind
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_dis_hive }
			remove_modifier = "lia_op_dis_hive"
			add_modifier = {
				modifier = "lia_op_dis_hive"
				days = 1440
			}
		}
		else = {
			add_modifier = {
				modifier = "lia_op_dis_hive"
				days = 1440
			}		
		}
    }

    option = {
        name = CURSES
    }
}

##기계 교란 페이즈 1
espionage_operation_event = {
	id = operation.20100
	title = operation.20100.name
	desc = operation.20100.desc
	picture = GFX_evt_machine_sapience
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##기계 교란 페이즈 2
espionage_operation_event = {
	id = operation.20101
	title = operation.20101.name
	desc = operation.20101.desc
	picture = GFX_evt_spy_network
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##기계 교란 페이즈 3
espionage_operation_event = {
	id = operation.20102
	title = operation.20102.name
	desc = operation.20102.desc
	picture = GFX_evt_scavenger_bot
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20103 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20103 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20103 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20103 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20103 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20502 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}
		}
	}
}

##연산망 교란
country_event = {
	id = operation.20103
	title = operation.20103.name
	desc = operation.20103.desc
	picture = GFX_evt_contingency_planet
	show_sound = event_hand_shake

	is_triggered_only = yes

	option = {
		name = EXCELLENT
		add_resource = { influence = 10 }
		from.spynetwork = {
			add_spy_network_level_on_success_effect = { VALUE = -40 }
		}
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20109 }
            }
        }		
	}

	after = {
        set_timed_country_flag = {
            flag = recently_disturb_mach@from.target
            days = @DisMachTimer
        }	
		hidden_effect = {
			destroy_espionage_operation = from
		}
	}
}
##기계 반응
country_event = {
    id = operation.20109
    title = operation.20109.name
    desc = operation.20109.desc
    picture = GFX_evt_contingency_planet
    show_sound = event_default
    is_triggered_only = yes

    trigger = {
        exists = from
    }

    immediate = {
		if = {
			limit = { has_modifier = lia_op_dis_mach }
			remove_modifier = "lia_op_dis_mach"
			add_modifier = {
				modifier = "lia_op_dis_mach"
				days = 1440
			}
		}
		else = {
			add_modifier = {
				modifier = "lia_op_dis_mach"
				days = 1440
			}		
		}
    }

    option = {
        name = CURSES
    }
}

##함대사고 페이즈1
espionage_operation_event = {
	id = operation.20430
	title = operation.20430.name
	desc = operation.20430.desc
	picture = GFX_evt_hangar_bay
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}

##함대사고 페이즈2
espionage_operation_event = {
	id = operation.20431
	title = operation.20431.name
	desc = operation.20431.desc
	picture = GFX_evt_spymaster
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes

	option = {
		name = ACKNOWLEDGED
	}
}
##함대사고 페이즈3
espionage_operation_event = {
	id = operation.20432
	title = operation.20432.name
	desc = operation.20432.desc
	picture = GFX_evt_fleet_neutral
	show_sound = event_spymaster
	espionage_operation = yes

	is_triggered_only = yes
	
    immediate = {
        set_espionage_operation_progress_locked = yes
        if = {
            limit = {
                NOT = { 
					target = {
						any_owned_ship = { # 목표국이 최소한 아래 함급중 한척은 들고 있어야 작전 가능
							OR = {
								is_ship_size = corvette
								is_ship_size = destroyer
								is_ship_size = cruiser
								is_ship_size = battleship
								is_ship_size = titan						
							}
						}
					}
				}
            }
            owner = {
                country_event = { id = operation.20438 } #목표함대 상황변화. 작전 중단
            }
        }
        else = {
            target = {
				random_owned_fleet = { #랜덤한 함대를 대상으로 고르되
					limit = { 
						is_designable = yes #지가 설계해 뽑을수 있는 함선만
						is_civilian = no #그리고 오직 군사 함대만 선택되도록
					}
					weights = { #기본 랜덤이되, 함대사이즈가 클수록 더 높은 확률로 선택되도록
						base = 1
						modifier = { 
							factor = 4 
							fleet_size > 40			
						}
						modifier = { 
							factor = 4 
							fleet_size > 80						
						}
						modifier = { 
							factor = 4 
							fleet_size > 120					
						}
						modifier = { 
							factor = 4 
							fleet_size > 160					
						}
						modifier = { 
							factor = 4 
							fleet_size > 200 						
						}						
					}
					save_event_target_as = fleet_accident					
					random_owned_ship = {
						solar_system = { save_event_target_as = fleet_accident_system }
					}
				}				
            }
        }
    }
	
	option = {
		name = LAUNCH_OPERATION
		hidden_effect = {
			random_list = {		
				6 = { #이짓을 왜하냐고? 각 조건마다 실패확률이 딱 10%씩만 줄어들게 하려고 하는것.
					owner = {
						country_event = { id = operation.20433 days = 1 }
					}
				}
				1 = { #적이 그림자 국가면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_valid_civic = civic_shadow_state
						}
                    }				
					owner = {
						country_event = { id = operation.20433 days = 1 }
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
                        target = {
                            relative_encryption_decryption = {
                                target = owner
                                value > 1.0
                            }
                        }
                    }				
					owner = {
						country_event = { id = operation.20433 days = 1 }
					}
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_one
						}
                    }				
					owner = {
						country_event = { id = operation.20433 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 성공확률을 없앤다.
                    modifier = {
                        factor = 0
						target = {
							has_edict = counter_intel_two
						}
                    }				
					owner = {
						country_event = { id = operation.20433 days = 1 }
					}
				}
				
				1 = { #적이 그림자 국가면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
						target = { #NOT을 보면 알수있듯 실제로는 일단 실패확률을 기본으로 넣어두고 적에게 그림자국가 시빅이 없으면 그 경우의수를 무력화 시키는 방식이며 아래들도 이와같다.
							NOT = { has_valid_civic = civic_shadow_state }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 } #목표국에겐 방어이벤트를
					}						
					owner = {
						country_event = { id = operation.20500 days = 1 } #나에겐 실패이벤트를 띄우기
					}
				}
				1 = { #적의 암호화가 우리 복호화보다 높으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = {
								relative_encryption_decryption = {
									target = owner
									value > 1.0
								}
							}
                        }
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}			
				}
				1 = { #적이 방첩부 신설 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_one }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}
				1 = { #적이 방첩에 전념 시행령을 켰으면 이만큼 실패확률을 넣는다.
                    modifier = {
                        factor = 0
                        target = {
							NOT = { has_edict = counter_intel_two }
						}
                    }
					target = {
						country_event = { id = operation.20503 days = 1 }
					}					
					owner = {
						country_event = { id = operation.20500 days = 1 }
					}
				}				
			}			
		}
	}
}
##함대 사고 발생
country_event = {
	id = operation.20433
	title = operation.20433.name
	desc = operation.20433.desc
	picture = GFX_evt_sabotaged_ship
	show_sound = event_hand_shake

	is_triggered_only = yes
	
    trigger = {
        exists = from
        exists = event_target:fleet_accident
    }
	
	option = {
		name = LAUNCH_OPERATION
		add_resource = { influence = 5 }
		hidden_effect = {
			fromfrom = {
				event_target:fleet_accident = { #위에서 설정한 함대를 대상으로
					every_owned_ship = {
						random_list = {
							12 = {
								reduce_hp_percent = 100 #파괴				
							}
							10 = {
								reduce_hp_percent = 98 #함선내구도의 98%상실							
							}
							18 = {
								reduce_hp_percent = 90 #함선내구도의 90%상실						
							}
							24 = {
								reduce_hp_percent = 50 #함선내구도의 50%상실						
							}
							36 = {
								reduce_hp_percent = 30 #함선내구도의 30%상실						
							}							
						}	
					}
					order_forced_return = yes #강제 FTL후퇴를 시킨다
				}
			}
		}
        from.spynetwork = {
            add_spy_network_level_on_success_effect = { VALUE = -45 }
        }
        owner = {
            if = {  
                limit = { has_ascension_perk = ap_become_the_crisis }
                complete_crisis_objective = crisobj_perform_upsetting_operations 
            }
        }		
	}
	
    after = {
        hidden_effect = {
            from.target = {
                country_event = { id = operation.20439 } #피해국에 피해상황 보고됨
            }
        }
        set_timed_country_flag = {
            flag = recently_fleet_accident@from.target
            days = @FleetAccTimer
        }		
        destroy_espionage_operation = from
    }	
}
##피해국에 피해상황 보고됨
country_event = {
	id = operation.20439
	title = operation.20439.name
	desc = operation.20439.desc
	picture = GFX_evt_debris
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
		add_resource = { influence = 5 }
	}
}
## 상황변화. 작전 종료
country_event = {
    id = operation.20438
    title = operation.20438.name
    desc = operation.20438.desc
    picture = GFX_evt_intelligence_report
    show_sound = event_default
    is_triggered_only = yes

    immediate = { }

    option = {
        name = UNFORTUNATE
		add_resource = { influence = 5 }
    }

    after = {
        destroy_espionage_operation = from
    }
}

# 적대적 첩보망 수사 페이즈1
espionage_operation_event = {
	id = operation.20440
	title = operation.20440.name
	desc = operation.20440.desc
	espionage_operation = yes
	picture = GFX_evt_spymaster
	show_sound = event_default
	is_triggered_only = yes

	option = { name = ACKNOWLEDGED }
}

# 적대적 첩보망 수사 페이즈2
espionage_operation_event = {
	id = operation.20441
	title = operation.20441.name
	desc = operation.20441.desc
	espionage_operation = yes
	picture = GFX_evt_decryption
	show_sound = event_default
	is_triggered_only = yes

	immediate = {
		set_espionage_operation_progress_locked = yes
	}

	option = {
		name = LAUNCH_OPERATION
	}

	after = {
		set_espionage_operation_progress_locked = no
		owner = {
			country_event = { id = operation.20442 }
		}		
	}
}
# 발동
country_event = {
	id = operation.20442
	title = operation.20442.name
	desc = operation.20442.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
	
	after = {
        from.target = {
            country_event = { id = operation.20443 } #목표국에서 판별이벤트 발동
        }	
        set_timed_country_flag = {
            flag = recently_spy_check@from.target
            days = @SpyCheckTimer
        }		
	}
}
##판별 이벤트
country_event = {
	id = operation.20443
	hide_window = yes
	is_triggered_only = yes

    immediate = {	
		if = {
			limit = { #첩보망이 형성되어 있으면서 역정보가 배치되었는지 체크
				AND = {
					any_envoy = { #새로운 판별 매카니즘 테스트. 이제 스파이 네트워크가 존재하냐가 아니라 사절이 박혀있는지를 체크할것.
						has_envoy_task = {
							task = spy_network
							target = from
						}
					}				
					#any_spynetwork = {
					#	owner = { is_same_value = root }
					#	target =  { is_same_value = from }
					#}
					has_country_flag = recently_dis_inform
				}	
			}
			from = {
				country_event = { id = operation.20445 } #감지실패 이벤트 반환
			}
			owner = {
				country_event = { id = operation.20453 } #낚시 보상 이벤트 발동
			}
		}
		else_if = {
			limit = { # 역정보가 없다면 첩보망이 형성되어있는지 체크
				any_envoy = { #새로운 판별 매카니즘 테스트. 이제 스파이 네트워크가 존재하냐가 아니라 사절이 박혀있는지를 체크할것.
					has_envoy_task = {
						task = spy_network
						target = from
					}
				}		
				#any_spynetwork = {
				#	owner = { is_same_value = root }
				#	target =  { is_same_value = from }
				#}
			}
			from = {
				country_event = { id = operation.20444 } #간파성공 이벤트 반환
			}
		}
		else = { #그냥 아무것도 없는지 체크
			from = {
				country_event = { id = operation.20445 } #감지실패 이벤트 반환
			}
		}	
    }
}
##첩보망 간파
country_event = {
	id = operation.20444
	title = operation.20444.name
	desc = operation.20444.desc
	picture = GFX_evt_decryption
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = EXCELLENT
        owner = {
			add_resource = { influence = 75 }	
			add_modifier = {
				modifier = "lia_op_spy_check"
				days = 1080
			}			
		}
		remove_country_flag = recently_spy_check@from.from.from.target
        set_timed_country_flag = {
            flag = recently_spy_check@from.from.from.target
            days = @ExtSpyCheckTimer
        }
		destroy_espionage_operation = from.from.from		
	}
}
##첩보활동 감지 실패
country_event = {
	id = operation.20445
	title = operation.20445.name
	desc = operation.20445.desc
	picture = GFX_evt_assembly_fight
	show_sound = event_spymaster

	is_triggered_only = yes

	option = {
		name = CURSES
        owner = {
			add_resource = { influence = -5 }						
		}
		destroy_espionage_operation = from.from.from		
	}
}

#역정보 배치 페이즈1
espionage_operation_event = {
	id = operation.20450
	title = operation.20450.name
	desc = operation.20450.desc
	espionage_operation = yes
	picture = GFX_evt_spymaster
	show_sound = event_default
	is_triggered_only = yes

	option = { name = ACKNOWLEDGED }
}
#역정보 배치 페이즈2
espionage_operation_event = {
	id = operation.20451
	title = operation.20451.name
	desc = operation.20451.desc
	espionage_operation = yes
	picture = GFX_evt_decryption
	show_sound = event_default
	is_triggered_only = yes

	immediate = {
		set_espionage_operation_progress_locked = yes
	}

	option = {
		name = LAUNCH_OPERATION
	}

	after = {
		set_espionage_operation_progress_locked = no
		owner = {
			country_event = { id = operation.20452 }
		}		
	}
}
# 발동
country_event = {
	id = operation.20452
	title = operation.20452.name
	desc = operation.20452.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
	
	after = {	
        set_timed_country_flag = {
            flag = recently_Counter_Check@from.target
            days = @CounterCheckTimer
        }
        set_timed_country_flag = { #역정보가 살아있는 시간
            flag = recently_dis_inform
            days = @DisInformTimer
        }
		destroy_espionage_operation = from		
	}
}
##보상 이벤트
country_event = {
	id = operation.20453
	title = operation.20453.name
	desc = operation.20453.desc
	picture = GFX_evt_conclave
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
        owner = {
			add_resource = { influence = 150 }
			add_modifier = {
				modifier = "lia_op_counter_check"
				days = 1800
			}			
		}		
	}
}

#특화 부서 확충 페이즈1
espionage_operation_event = {
	id = operation.20460
	title = operation.20460.name
	desc = operation.20460.desc
	espionage_operation = yes
	picture = GFX_evt_spymaster
	show_sound = event_default
	is_triggered_only = yes

	option = { name = ACKNOWLEDGED }
}
#특화 부서 확충 페이즈2
espionage_operation_event = {
	id = operation.20461
	title = operation.20461.name
	desc = operation.20461.desc
	espionage_operation = yes
	picture = GFX_evt_decryption
	show_sound = event_default
	is_triggered_only = yes

	immediate = {
		set_espionage_operation_progress_locked = yes
        if = {
            limit = {
                target = { is_hive_empire = yes }
            }
            espionage_acquire_asset_hive = yes
        }
        else_if = {
            limit = {
                target = { is_machine_empire = yes }
            }
            espionage_acquire_asset_machine = yes
        }
        else = {
            espionage_acquire_asset_regular = yes
        }		
	}

	option = {
		name = LAUNCH_OPERATION
	}

	after = {
		set_espionage_operation_progress_locked = no
		owner = {
			country_event = { id = operation.20462 }
			country_event = { id = operation.20463 }			
		}
		hidden_effect = {
			espionage_operation_event = { id = operation.20464 }
		}	
	}
}
#타이머 플래그 설정용 컨트리이벤트
country_event = {
    id = operation.20462
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        set_timed_country_flag = {
            flag = recently_expend_division@from.target
            days = @ExpDivTimer
        }		
    }
}
#첩보자산 획득용 컨트리이벤트
country_event = {
    id = operation.20463
    hide_window = yes
	location = from.target.capital_scope
    is_triggered_only = yes

    immediate = {
        root = {
            espionage_acquire_asset_create_asset = yes
        }		
    }
}
# 발동
espionage_operation_event = {
	id = operation.20464
	title = operation.20464.name
	desc = operation.20464.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
		spynetwork = {
			add_modifier = {
				modifier = "lia_op_expend_division"
				years = 10
			}
		}
	}
	
	after = {	
		destroy_espionage_operation = this
	}
}

#특활비 재배정 페이즈1
espionage_operation_event = {
	id = operation.20470
	title = operation.20470.name
	desc = operation.20470.desc
	espionage_operation = yes
	picture = GFX_evt_spymaster
	show_sound = event_default
	is_triggered_only = yes

	option = { name = ACKNOWLEDGED }
}
#특활비 재배정 페이즈2
espionage_operation_event = {
	id = operation.20471
	title = operation.20471.name
	desc = operation.20471.desc
	espionage_operation = yes
	picture = GFX_evt_decryption
	show_sound = event_default
	is_triggered_only = yes

	immediate = {
		set_espionage_operation_progress_locked = yes
	}

	option = {
		name = LAUNCH_OPERATION
	}

	after = {
		set_espionage_operation_progress_locked = no
		owner = {
			country_event = { id = operation.20472 }
		}		
	}
}
# 발동
country_event = {
	id = operation.20472
	title = operation.20472.name
	desc = operation.20472.desc
	picture = GFX_evt_intelligence_report
	show_sound = event_espionage_concluded
	is_triggered_only = yes

	option = {
		name = EXCELLENT
	}
	
	after = {	
        set_timed_country_flag = {
            flag = recently_budget_allin@from.target
            days = @BudgetAllTimer
        }
		from.spynetwork = {
			set_saved_date = {
				key = recently_stole_technology
				days_from_present = @ResetStealTechnologyTimer
				expires = @ResetStealTechnologyTimer
			}
		}		
        remove_country_flag = recently_trade_agreement@from.target
        remove_country_flag = recently_financial_crisis@from.target
        remove_country_flag = recently_fake_news@from.target
        remove_country_flag = recently_support_antigov@from.target
        remove_country_flag = recently_war_crime@from.target
        remove_country_flag = recently_vietnam_war@from.target
        remove_country_flag = recently_diplo_plus@from.target
        remove_country_flag = recently_disturb_hive@from.target
        remove_country_flag = recently_disturb_mach@from.target
        remove_country_flag = recently_fleet_accident@from.target
        remove_country_flag = recently_hyperlane_dist@from.target
        remove_country_flag = recently_recently_spy_check@from.target
        remove_country_flag = recently_counter_check@from.target
        remove_country_flag = recently_aggresive_use@from.target
        remove_country_flag = recently_aggresive_net@from.target
        remove_country_flag = recently_expend_division@from.target
        remove_country_flag = recently_nemesis@from.target
		destroy_espionage_operation = from		
	}
}

###와 오늘 진짜많이 넣었다 
###악 내 손목!
###버그 시발 존나 많이나오네 ㅂㄹ패ㅑㅣㅁ봴부ㅐㅣㅑㅗㅜ먀ㅐㅣㅗㅞ매;ㅓㅜ해;보ㅓ;ㅗㅓㅔ;뫼ㅣ;ㅡ먀ㅔ23ㅡㅎ;ㅣㅜ흗;ㅣ게9 