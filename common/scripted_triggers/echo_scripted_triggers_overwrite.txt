is_valid_target_fe_stop_atrocities = {
	OR = {
		allows_slavery = yes
		allows_purge = yes
	}
	NOT = { has_ethic = ethic_gestalt_consciousness }
	NOR = {
		has_valid_civic = civic_machine_terminator
		has_valid_civic = civic_hive_devouring_swarm
        has_valid_civic = civic_fanatic_purifiers
        has_origin = origin_vb_psi_soul_eater
	}
}

is_country_type_with_subjects = {
	OR = {
		is_country_type = default
        is_country_type = awakened_fallen_empire
        is_country_type = fallen_empire
	}
}

is_energy_being = {
	has_trait = "complex_species_trait_Energy_Being"
}

is_soul_eater = {
	has_trait = "trait_vb_psi_soul_eater"
}

is_robot = { # The pop is a robot
	has_trait = "trait_mechanical"
	NAND = {
		exists = owner
		owner = { 
			NOT = { has_technology = "tech_synthetic_workers" }
			NOT = { has_policy_flag = ai_outlawed } 
		}
	}
}

is_dry = {
	OR = {
		is_planet_class = pc_arid
		is_planet_class = pc_desert
		is_planet_class = pc_savannah
		is_planet_class = pc_shrouded_paradise
	}
}

is_cold = {
	OR = {
		is_planet_class = pc_arctic
		is_planet_class = pc_tundra
		is_planet_class = pc_alpine
		#is_planet_class = pc_shrouded_paradise
		is_planet_class = pc_mushroom
	}
}

is_wet = {
	OR = {
		is_planet_class = pc_ocean
		is_planet_class = pc_continental
		is_planet_class = pc_tropical
		#is_planet_class = pc_shrouded_paradise
	}
}

can_have_habitable_deposits = {
	OR = {
		is_planet_class = pc_nuked
		is_planet_class = pc_desert
		is_planet_class = pc_tropical
		is_planet_class = pc_arid
		is_planet_class = pc_continental
		is_planet_class = pc_ocean
		is_planet_class = pc_tundra
		is_planet_class = pc_arctic
		is_planet_class = pc_alpine
		is_planet_class = pc_savannah
		is_planet_class = pc_gaia
		is_planet_class = pc_mushroom
        is_planet_class = pc_shrouded_paradise
        is_planet_class = pc_relic
	}
}

habitable_planet = {
	OR = {
		is_planet_class = pc_desert
		is_planet_class = pc_tropical
		is_planet_class = pc_arid
		is_planet_class = pc_continental
		is_planet_class = pc_ocean
		is_planet_class = pc_tundra
		is_planet_class = pc_arctic
		is_planet_class = pc_alpine
		is_planet_class = pc_savannah
		is_planet_class = pc_gaia
		is_planet_class = pc_city
		is_planet_class = pc_mushroom
        is_planet_class = pc_shrouded_paradise
        is_planet_class = pc_relic
		is_planet_class = pc_hollow
	}
}

is_a_habitable_planet_megastructure = {
	OR = {
		is_planet_class = pc_nuked
		is_planet_class = pc_infested
		is_planet_class = pc_matryoshka
		habitable_planet = yes
		habitable_structure = yes
	}
}

is_shackled_robot = { # The pop is a non-free robot
    NOT = { has_trait = trait_holy_machines }
	has_trait = "trait_mechanical"
	NAND = {
		exists = owner
		owner = {
			OR = {
				AND = {
					has_policy_flag = ai_full_rights 
					OR = {
						has_technology = "tech_synthetic_workers" #Robits don't get rights until they are Synths
                        has_country_flag = robots_have_souls #syndaw.545
					}
				}
				is_mechanical_empire = yes
			}
		}
	}
}

can_destroy_planet_with_PLANET_KILLER_NEUTRON = {
	custom_tooltip = {
		fail_text = has_planetary_shield
		this = {
			NOR = {
				has_active_building = building_planetary_shield_generator_heavy
				has_active_building = building_planetary_shield_generator_orila
				has_modifier = gpm_precursor_planetary_shield
			}
		}
	}
	custom_tooltip = {
		fail_text = is_not_a_habitable_planet_or_megastructure
		is_a_habitable_planet_megastructure = yes
	}
	custom_tooltip = {
		fail_text = is_shielded
		NOR = {
			is_planet_class = pc_shielded
			is_planet_class = pc_ringworld_shielded
			is_planet_class = pc_habitat_shielded
		}
	}
	custom_tooltip = {
		fail_text = is_not_hostile
		OR = {
			planet_is_hostile_or_crisis = yes
			AND = {
				exists = owner
				owner = {
					is_country_type = primitive
				}
				from.owner = {
					OR = {
						has_ethic = ethic_xenophobe
						has_ethic = ethic_fanatic_xenophobe
					}
				}
			}
			AND = { # at war with primitive space owner
				exists = space_owner
				exists = owner
				owner = {
					is_primitive = yes
				}
				space_owner = {
					OR = {
						is_at_war_with = from.owner
						is_country_type = swarm
						is_country_type = extradimensional
						is_country_type = extradimensional_2
						is_country_type = extradimensional_3
						is_country_type = ai_empire
					}
				}
			}
		}
	}
	custom_tooltip = {
		fail_text = is_unpopulated
		OR = {
			num_pops > 0
			is_planet_class = pc_infested
		}
	}
}

can_set_ai_policy = {
	is_mechanical_empire = no
	NOT = { has_origin = origin_vb_psi_soul_eater }
	OR = {
		has_technology = tech_synthetic_workers
		has_technology = tech_sapient_ai
		any_relation = {
			has_communications = prev
			OR = {
				has_technology = tech_synthetic_workers
				has_technology = tech_sapient_ai
				has_authority = auth_machine_intelligence
			}
			OR = {
				is_country_type = default
				has_ai_personality_behaviour = robot_exploiter
				has_ai_personality_behaviour = robot_liberator
			}
		}
	}
}

is_resort_planet = {
	exists = planet
	OR = {
		has_modifier = resort_colony
		has_modifier = sanctuary_colony
	}
}

#Country (target) scope | root = operation
has_sabotage_starbase_valid_target = {
	any_owned_starbase = {
		#OR = {
		#	count_starbase_modules = { type != shipyard count > 0 }
			has_nonshipyard_starbase_buildings = yes
		#}
	}
}

#Starbase scope
has_nonshipyard_starbase_buildings = {
	OR = {
		has_starbase_building = art_college
		has_starbase_building = black_hole_observatory
		has_starbase_building = command_center
		has_starbase_building = communications_jammer
		has_starbase_building = crew_quarters
		has_starbase_building = curator_think_tank
		has_starbase_building = deep_space_black_site
		has_starbase_building = disruption_field
		has_starbase_building = fleet_academy
		has_starbase_building = hydroponics_bay
		has_starbase_building = listening_post
		has_starbase_building = naval_logistics_office
		has_starbase_building = nebula_refinery
		has_starbase_building = offworld_trading_company
		has_starbase_building = resource_silo
		has_starbase_building = target_uplink_computer
		has_starbase_building = trader_proxy_office
		has_starbase_building = warp_fluctuator
		has_starbase_building = drydock
		has_starbase_building = orbital_fracking_cannon
		has_starbase_building = echo_starbase_wormhole_fortification
		has_starbase_building = echo_starbase_mine_field
		has_starbase_building = echo_cyno_jammer
		has_starbase_building = orbital_trading_beacon
		has_starbase_building = warp_fluctuator_gestalt
		has_starbase_building = folksda_platform_module
		has_starbase_building = gpm_precursor_shipyards_uplink
		has_starbase_building = pulsar_mod
		has_starbase_building = nhsc_starbase_reactor
		has_starbase_building = sensor_station
		has_starbase_building = starbase_management
		has_starbase_building = starbase_management_machine
		has_starbase_building = starbase_management_hive
		has_starbase_building = mining_base
		has_starbase_building = power_station
		has_starbase_building = farming_base
		has_starbase_building = customs_office
		has_starbase_building = nsc_nanite_field
	}
}

is_resort_colony = {
	OR = {
		has_modifier = resort_colony
		has_designation = col_sanctuary
	}
}