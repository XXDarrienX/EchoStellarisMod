#########################
###                   ###
### Written by Fiiral ###
###                   ###
#########################

####################
# Variables (Copy) #
####################
@distance = 50
@base_moon_distance = 10

the_true_empire_system = {
	class = "rl_standard_stars"

	flags = { the_true_empire_system }

	init_effect = {
		create_starbase = {
			size = starbase_citadel
			owner = event_target:the_true_empire
		}
		save_global_event_target_as = the_true_empire_system
	}
	
	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}
	
	change_orbit = @distance
	planet = {
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = @distance
	planet = {
		class = pc_gas_giant
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
		satellite_naming_policy = upper_case_roman_numerals
		
		change_orbit = 30
		moon = {
			count = 1
			orbit_distance = 5
			class = "pc_gaia"
			name = NAME_New_Hope
			deposit_blockers = none
			orbit_angle = { min = 90 max = 270 }
			size = 15
			
			change_orbit = @base_moon_distance
			moon = {
				count = 1
				orbit_distance = 2
				class = "pc_barren_cold"
				orbit_angle = { min = 90 max = 270 }
				size = 6
			}

			init_effect = {
				set_planet_flag = fallen_empire_world
				clear_blockers = yes
				prevent_anomaly = yes
				set_owner = event_target:the_true_empire
				add_building = building_ancient_palace
				add_building = building_fe_dome
				add_building = building_dimensional_fabricator
				add_building = building_class_4_singularity
				add_building = building_nano_forge
				while = {
					count = 5
					add_district = {
						district_type = district_city
						ignore_cap = yes
					}
				}
				while = {
					count = 3
					add_district = {
						district_type = district_generator
						ignore_cap = yes
					}
				}
				while = {
					count = 3
					add_district = {
						district_type = district_mining
						ignore_cap = yes
					}
				}
				while = {
					count = 3
					add_district = {
						district_type = district_farming
						ignore_cap = yes
					}
				}
				while = {
					count = 18
					create_pop = {
						species = event_target:the_original_empire.owner_main_species
					}
				}
				while = {
					count = 18
					create_army = {
						name = random
						owner = event_target:the_true_empire
						species = event_target:the_true_empire.owner_main_species
						type = "true_empire_army"
					}
				}
				
				# Fleets
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_fleet = yes
				create_true_empire_main_fleet = yes
				create_true_empire_construction_ships = yes
			}
		}
		
		change_orbit = @base_moon_distance
		moon = {
			count = 1
			orbit_distance = 5
			class = "pc_barren_cold"
			orbit_angle = { min = 90 max = 270 }
			size = 6
		}
	}

	change_orbit = @distance
	planet = {
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}
	
	change_orbit = @distance
	planet = {
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}
}