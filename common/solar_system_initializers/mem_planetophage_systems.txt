mem_planetophage_system = {
	# name = Aleeck
	name = "Beta Zunari"
	class = rl_standard_stars
	usage = misc_system_init
	usage_odds = {
		base = 20
		modifier = {
			factor = 0
			is_bottleneck_system = yes
		}
		modifier = {
			factor = 0
			has_star_flag = empire_cluster
		}
		modifier = {
			factor = 0
			is_fe_cluster = yes
		}
		
	}
	spawn_chance = 100
	max_instances = 1
	flags = {
		mem_planetophage_system
		unique_system
	}
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 135
	}
	asteroid_belt = {
		type = icy_asteroid_belt
		radius = 275
	}
	planet = {
		class = star
		orbit_distance = 0
	}
	change_orbit = 25
	planet = {
		count = 3
		class = random_non_colonizable
		orbit_distance = 20
		init_effect = {
			mem_planetophage_createateplanet = yes
			mem_planetophage_create_deposit = yes
		}
	}
	planet = {
		class = pc_mem_broken_city
		orbit_distance = 25
		size = 25
		flags = {
			
		}
		init_effect = {
			prevent_anomaly = yes
			
			#mem_planetophage_createateplanet = yes
		}
		moon = { # make a cracked world ambient object and put it above the machine world
			class = pc_shattered
			orbit_distance = 10
			size = 12
			flags = {
				mem_planetophage_broken_planet
			}
			init_effect = {
				# add_modifier = {
				# 	modifier = mem_planetophage_disabled_powergrid
				# }
				# add_modifier = {
				# 	modifier = mem_planetophage_debris
				# }
				prevent_anomaly = yes
				add_anomaly = {
					category = mem_planetophage_category
				}
				
				create_ambient_object = {
					type = large_debris_object
					location = this
					entity_offset = 15
					use_3d_location = yes
				}
				create_ambient_object = {
					type = medium_debris_01_object
					entity_offset = 30
					use_3d_location = yes
					location = this
				}
				create_ambient_object = {
					type = small_debris_object
					entity_offset = 20
					location = this
					use_3d_location = yes
				}
				create_ambient_object = {
					type = mem_planetophage_ambient
					use_3d_location = yes
					location = this
					scale = 1.2
				}
				clear_blockers = yes
			}
		}

	}
	change_orbit = 25
	planet = {
		count = {
			min = 2
			max = 5
		}
		class = pc_asteroid
		size = {
			min = 4
			max = 8
		}
		orbit_distance = 0
		init_effect = {
			mem_planetophage_createateplanet = yes
			mem_planetophage_create_deposit = yes
		}
	}
	planet = {
		count = 3
		class = pc_broken
		orbit_distance = 35
		change_orbit = 5
		
		init_effect = {
			mem_planetophage_createateplanet = yes
			mem_planetophage_create_deposit = yes
		}
	}
	change_orbit = 35
	planet = { # so he may eat something after spawning
		count = {
			min = 2
			max = 5
		}
		class = pc_asteroid
		size = {
			min = 6
			max = 8
		}
		orbit_distance = 0
		init_effect = {
			#mem_planetophage_createateplanet = yes
		}
	}
	init_effect = {
		set_global_flag = mem_planetophage_system_spawned
	}
}
