@resolution_weight_hated = 3
@resolution_weight_disliked = 4
@resolution_weight_unpopular = 5
@resolution_weight_normal = 6
@resolution_weight_popular = 6.5
@resolution_weight_loved = 7

@resolution_cost_t1 = 100
@resolution_cost_t2 = 150
@resolution_cost_t3 = 200
@resolution_cost_t4 = 250
@resolution_cost_t5 = 300
@resolution_cost_denounce = 25

@resolution_flag_timer = 360

#example_resolution = {
#	icon = "name of the icon key"
#	resources = {} # cost and category
#	target = yes/no # if this resolution requires a target country
#	harmful = yes/no # if the AI should consider this harmful when choosing target
#	modifier = {} # modifier to be applied to all community members if passed
#	triggered_modifier = {} # triggered modifier to be applied, scope is country
#	effect = {} # effect to be applied if passed, scope is proposer unless there is a target country - then scope is target country, with proposer in from scope
#	fail_effects = {} # effect to be applied if failed, scope is proposer unless there is a target country - then scope is target country, with proposer in from scope
#	potential = {} # potential trigger, scope is country
#	allow = {} # allow trigger, scope is country
#	active = {} # Enacted resolutions are cancelled if this trigger fails
#
#	ai_weight = {} # ai weight modifiers, scope is country. from scope is the target country for targeted resolutions
#	NOTE: all ai_weight modifiers are multiplicative. The end result is also multiplied with a factor based on the opinion towards the proposer and/or target,
#	see RESOLUTION_TARGET_OPINION_MIN_FACTOR etc. in 00_defines.txt. Also see RESOLUTION_VOTE_SUPPORT_THRESHOLD etc. for balancing the values.
#
#	valid_target = {} # valid targets trigger, scope is country
#}

# NOTE: Remember to add Resolutions to a Resolution Category!

### DECLARE CRISIS

resolution_declare_crisis = {
	icon = "GFX_resolution_declare_crisis"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = yes

	valid_target = {
		NOT = { is_same_value = from }
		OR = {
			is_country_type = default
			AND = {
				is_fallen_empire = yes
				NOT = { has_global_flag = war_in_heaven_ongoing }
			}
		}
		NOT = { has_country_flag = declared_crisis }
	}

	modifier = {
		starbase_shipyard_build_speed_mult = 0.20
		ships_upkeep_mult = -0.1
	}

	effect = {
		custom_tooltip = resolution_declare_crisis_tooltip
		hidden_effect = {
			if = {
				limit = { is_galactic_community_member = yes }
				remove_from_galactic_community = yes
			}
			if = {
				limit = {
					is_galactic_council_established = yes
					is_part_of_galactic_council = yes
				}
				remove_from_galactic_council = yes
			}
			every_subject = {
				if = {
					limit = { is_galactic_community_member = yes }
					remove_from_galactic_community = yes
				}
				if = {
					limit = {
						is_galactic_council_established = yes
						is_part_of_galactic_council = yes
					}
					remove_from_galactic_council = yes
				}
			}
			set_country_flag = declared_crisis
			save_event_target_as = new_crisis
			country_event = { id = crisis.4105 }
			every_playable_country = {
				limit = {
					is_ai = no
					NOT = { is_same_value = prev }
				}
				country_event = { id = crisis.4100 }
			}
			if = {
				limit = { has_galactic_custodian = yes }
				galactic_custodian = {
					save_event_target_as = community_war_leader
					if = {
						limit = { is_in_federation_with = event_target:new_crisis }
						event_target:new_crisis = {
							leave_alliance = { override_requirements = yes }
						}
					}
				}
			}
			else_if = {
				limit = { has_galactic_emperor = yes }
				galactic_emperor = {
					save_event_target_as = community_war_leader
				}
			}
			else = {
				random_playable_country = {
					limit = {
						is_galactic_community_member = yes
						NOT = { is_in_federation_with = event_target:new_crisis }
					}
					weights = {
						base = 1
						modifier = {
							add = 10000
							galactic_community_rank = 1
						}
						modifier = {
							add = 1000
							galactic_community_rank = 2
						}
						modifier = {
							add = 100
							galactic_community_rank = 3
						}
						modifier = {
							add = 10
							is_galactic_council_established = yes
							is_part_of_galactic_council = yes
						}
					}
					save_event_target_as = community_war_leader
				}
			}
			if = {
				limit = {
					from = { has_ascension_perk = ap_become_the_crisis }
					NOR = {
						is_homicidal = yes
						has_ascension_perk = ap_become_the_crisis
						AND = {
							is_fallen_empire = yes
							NOT = { has_global_flag = war_in_heaven_ongoing }
						}

					}
				}
				from = { complete_crisis_objective = crisobj_perform_upsetting_operations }
			}

			declare_crisis_war_effect = yes
		}
	}

	potential = {
		has_nemesis = yes
		has_galactic_emperor = no
		is_part_of_galactic_council = yes
	}

	ai_weight = {
		base = @resolution_weight_hated

		# Should almost always declare on Crisis countries in end game
		modifier = {
			factor = 50
			from = {
				has_country_flag = crisis_sphere_revealed
			}
			desc = gal_com_crisis_sphere_revealed
		}

		# More likely to declare on very powerful homicidal empires
		modifier = {
			factor = 10
			from = {
				is_homicidal = yes
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_very_strong_homicidal_empire
		}
		# More likely to declare on very powerful homicidal empires
		modifier = {
			factor = 5
			from = {
				is_homicidal = yes
				relative_power = {
					who = prev
					category = fleet
					value = superior
				}
			}
			desc = gal_com_target_is_strong_homicidal_empire
		}
		
		# More likely to declare on very powerful assimilator empires
		modifier = {
			factor = 8
			from = {
				is_civic_machine_assimilator = yes
				is_pacifist = no
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_very_strong_assimilator_empire
		}
		# More likely to declare on very powerful assimilator empires
		modifier = {
			factor = 4
			from = {
				is_civic_machine_assimilator = yes
				is_pacifist = no
				relative_power = {
					who = prev
					category = fleet
					value = superior
				}
			}
			desc = gal_com_target_is_strong_assimilator_empire
		}

		# More likely to declare on rivals
		modifier = {
			factor = 5
			is_rival = from
			desc = gal_com_target_is_rival
		}
		modifier = {
			factor = 5
			is_at_war_with = from
			desc = gal_com_target_is_rival
		}

		# Never on yourself
		modifier = {
			factor = 0
			is_same_value = from
			desc = gal_com_target_is_me
		}

		# More likely to declare on rivals
		modifier = {
			factor = 6
			from = { has_country_flag = cracked_first_star }
			desc = gal_com_target_has_cracked_stars
		}

		# Should be reluctant to use on normal countries
		modifier = {
			factor = 0.2
			from = {
				NOR = { 
					is_homicidal = yes
					has_country_flag = crisis_sphere_revealed
					has_country_flag = cracked_first_star
					AND = {
						is_civic_machine_assimilator = yes
						is_pacifist = no
					}
				}
			}
			desc = gal_com_target_is_a_normal_empire
		}
		
		modifier = {
			factor = 0.5
			is_civic_machine_assimilator = yes
			from = { is_civic_machine_assimilator = yes }
			desc = gal_com_assimilator_civic
		}

		# Very unlikely to use on Custodian
		modifier = {
			factor = 0.1
			from = { is_galactic_custodian = yes }
			NOR = { has_ascension_perk = ap_become_the_crisis }
			desc = gal_com_target_is_the_custodian
		}
		
		# Crisis will want to remove the Custodian as a threat
		modifier = {
			factor = 5
			from = { is_galactic_custodian = yes }
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_target_is_the_custodian
		}

		# Unlikely to use on scary Fallen Empire
		modifier = {
			factor = 0.2
			from = {
				is_fallen_empire = yes
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_powerful_fallen_empire
		}

		modifier = {
			factor = 0.5
			from = {
				NOT = { has_ascension_perk = ap_become_the_crisis }
			}
			desc = gal_com_target_does_not_have_crisis_perk
		}

		modifier = {
			factor = 3
			from = {
				has_crisis_level = crisis_level_3
			}
			has_intel_level = {
				who = from
				category = government
				level >= 2
			}
			desc = gal_com_crisis_level_3
		}

		modifier = {
			factor = 5
			from = {
				has_crisis_level = crisis_level_4
			}
			has_intel_level = {
				who = from
				category = government
				level >= 2
			}
			desc = gal_com_crisis_level_4
		}

		modifier = {
			factor = 10
			from = {
				has_crisis_level = crisis_level_5
			}
			has_intel_level = {
				who = from
				category = government
				level >= 2
			}
			desc = gal_com_crisis_level_5
		}
		
		modifier = {
			factor = 0
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
			from = {
				NOR = {
					has_ascension_perk = ap_become_the_crisis
					is_homicidal = yes
					AND = {
						is_fallen_empire = yes
						NOT = { has_global_flag = war_in_heaven_ongoing }
					}
				}
			}
		}
		
		modifier = {
			factor = 3
			OR = {
				is_militarist = yes
				is_civic_militarist = yes
			}
			desc = ethic_militarist
		}
		modifier = {
			factor = 0.75
			has_ethic = ethic_pacifist
			from = {
				NOT = { has_country_flag = crisis_sphere_revealed }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 0.5
			has_ethic = ethic_fanatic_pacifist
			from = {
				NOT = { has_country_flag = crisis_sphere_revealed }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 10
			has_ascension_perk = ap_defender_of_the_galaxy
			from = {
				OR = {
					has_crisis_level = crisis_level_3
					is_homicidal = yes
				}
			}
			desc = ap_defender_of_the_galaxy
		}
	}
}

resolution_repeal_crisis = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = no

	valid_target = {
		OR = {
			is_country_type = default
			is_fallen_empire = yes
		}
		has_country_flag = declared_crisis
	}

	effect = {
		hidden_effect = {
			remove_country_flag = declared_crisis
			save_event_target_as = former_crisis
			random_war = {
				limit = {
					using_war_goal = {
						type = wg_declared_crisis
						owner = event_target:former_crisis
					}
				}
				every_war_participant = {
					limit = {
						NOT = { is_same_value = event_target:former_crisis }
					}
					country_event = { id = crisis.4110 }
				}
				every_war_participant = {
					prev = {
						remove_war_participant = prev
					}
				}
			}
			country_event = { id = crisis.4111 }
		}
	}

	potential = {
		has_galactic_emperor = no
		has_nemesis = yes
	}

	ai_weight = {
		base = @resolution_weight_hated

		# More likely to repeal if it's a normal country
		modifier = {
			factor = 4
			from = {
				is_homicidal = no
				NOR = {
					has_country_flag = crisis_sphere_revealed
					has_country_flag = cracked_first_star
					has_crisis_level = crisis_level_5
				}
			}
			desc = gal_com_target_is_a_normal_empire
		}

		# Should be very unlikely to repeal end game crisis country
		modifier = {
			factor = 0.2
			from = {
				OR = {
					has_country_flag = crisis_sphere_revealed
					has_country_flag = cracked_first_star
				}
			}
			desc = gal_com_target_is_a_crisis_empire
		}

		# Unlikely to repeal very powerful homicidal countries
		modifier = {
			factor = 0.2
			from = {
				is_homicidal = yes
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_strong_homicidal_empire
		}
		
		# Unlikely to repeal very powerful assimilator empires
		modifier = {
			factor = 0.2
			from = {
				is_civic_machine_assimilator = yes
				is_pacifist = no
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_strong_assimilator_empire
		}
		
		modifier = {
			factor = 20
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
			from = {
				NOR = {
					has_ascension_perk = ap_become_the_crisis
					is_homicidal = yes
					AND = {
						is_fallen_empire = yes
						NOT = { has_global_flag = war_in_heaven_ongoing }
					}
				}
			}
		}
		
		modifier = {
			factor = 0.5
			OR = {
				is_militarist = yes
				is_civic_militarist = yes
			}
			desc = ethic_militarist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_pacifist
			from = {
				NOT = { has_country_flag = crisis_sphere_revealed }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 6
			has_ethic = ethic_fanatic_pacifist
			from = {
				NOT = { has_country_flag = crisis_sphere_revealed }
			}
			desc = ethic_pacifist
		}
		
		modifier = {
			factor = 0.75
			from = {
				has_crisis_level = crisis_level_4
			}
			desc = gal_com_crisis_level_4
		}
		modifier = {
			factor = 0.25
			from = {
				has_crisis_level = crisis_level_5
			}
			desc = gal_com_crisis_level_5
		}
		
		modifier = {
			factor = 5
			from = {
				NOR = {
					has_ascension_perk = ap_become_the_crisis
					is_homicidal = yes
					AND = {
						is_fallen_empire = yes
						NOT = { has_global_flag = war_in_heaven_ongoing }
					}
				}
			}
			NOT = { has_ascension_perk = ap_become_the_crisis }
			desc = gal_com_target_does_not_have_crisis_perk
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_defender_of_the_galaxy
			from = {
				OR = {
					has_crisis_level = crisis_level_3
					is_homicidal = yes
				}
			}
			desc = ap_defender_of_the_galaxy
		}
	}
}

resolution_declare_crisis_empire = {
	icon = "GFX_resolution_declare_crisis"

	resources = {
		category = military_resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = yes

	valid_target = {
		NOT = { is_same_value = from }
		is_galactic_emperor = no
		OR = {
			is_country_type = default
			AND = {
				is_fallen_empire = yes
				NOT = { has_global_flag = war_in_heaven_ongoing }
			}
		}
		if = {
			limit = { is_active_resolution = resolution_emperor_the_step_towards_a_united_galaxy }
			is_galactic_community_member = no
		}
		NOT = { has_country_flag = declared_crisis }
	}

	modifier = {
		starbase_shipyard_build_speed_mult = 0.20
		ships_upkeep_mult = -0.1
	}

	effect = {
		custom_tooltip = resolution_declare_crisis_empire_tooltip
		hidden_effect = {
			if = {
				limit = { is_galactic_community_member = yes }
				remove_from_galactic_community = yes
			}
			if = {
				limit = {
					is_galactic_council_established = yes
					is_part_of_galactic_council = yes
				}
				remove_from_galactic_council = yes
			}
			every_subject = {
				if = {
					limit = { is_galactic_community_member = yes }
					remove_from_galactic_community = yes
				}
				if = {
					limit = {
						is_galactic_council_established = yes
						is_part_of_galactic_council = yes
					}
					remove_from_galactic_council = yes
				}
			}

			set_country_flag = declared_crisis
			save_event_target_as = new_crisis
			country_event = { id = crisis.4106 }
			every_playable_country = {
				limit = {
					is_ai = no
					NOT = { is_same_value = prev }
				}
				country_event = { id = crisis.4101 }
			}
			galactic_emperor = {
				save_event_target_as = community_war_leader
			}
			declare_crisis_war_effect = yes
			if = { #兼容 Expanded Diplomacy and Espionage
				limit = {
					has_global_flag = better_diplo_installed
					from = { has_ascension_perk = ap_become_the_crisis }
					NOR = {
						is_homicidal = yes
						has_ascension_perk = ap_become_the_crisis
						AND = {
							is_fallen_empire = yes
							NOT = { has_global_flag = war_in_heaven_ongoing }
						}
					}
				}
				from = { complete_crisis_objective = crisobj_perform_upsetting_operations }
			}
		}
	}

	potential = {
		has_galactic_emperor = yes
		has_nemesis = yes
		is_part_of_galactic_council = yes
	}

	ai_weight = {
		base = @resolution_weight_hated

		# Should almost always declare on Crisis countries in end game
		modifier = {
			factor = 50
			from = {
				has_country_flag = crisis_sphere_revealed
			}
			desc = gal_com_crisis_sphere_revealed
		}

		# More likely to declare on very powerful homicidal empires
		modifier = {
			factor = 10
			from = {
				is_homicidal = yes
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_very_strong_homicidal_empire
		}
		# More likely to declare on very powerful homicidal empires
		modifier = {
			factor = 5
			from = {
				is_homicidal = yes
				relative_power = {
					who = prev
					category = fleet
					value = superior
				}
			}
			desc = gal_com_target_is_strong_homicidal_empire
		}
		
		# More likely to declare on rivals
		modifier = {
			factor = 2
			is_rival = from
			desc = gal_com_target_is_rival
		}

		# Never on yourself
		modifier = {
			factor = 0
			is_same_value = from
			desc = gal_com_target_is_me
		}

		# More likely to declare on empire who hvae cracked a star
		modifier = {
			factor = 6
			from = { has_country_flag = cracked_first_star }
			desc = gal_com_target_has_cracked_stars
		}

		# Should be reluctant to use on normal countries
		modifier = {
			factor = 0.2
			OR = {
			from = {
					is_homicidal = no
				NOR = { 
					has_country_flag = crisis_sphere_revealed
					has_country_flag = cracked_first_star
					}
				}
			}
			desc = gal_com_target_is_a_normal_empire
		}
		
		# Very unlikely to use on Custodian
		modifier = {
			factor = 0.2
			from = { is_galactic_custodian = yes }
			desc = gal_com_target_is_the_custodian
		}

		# Unlikely to use on scary Fallen Empire
		modifier = {
			factor = 0.2
			from = {
				is_fallen_empire = yes
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_powerful_fallen_empire
		}
	}
}

resolution_repeal_crisis_empire = {
	icon = "GFX_resolution_repeal_red"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = no

	valid_target = {
		OR = {
			is_country_type = default
			is_fallen_empire = yes
		}
		has_country_flag = declared_crisis
	}

	effect = {
		hidden_effect = {
			remove_country_flag = declared_crisis
			save_event_target_as = former_crisis
			random_playable_country = {
				limit = { is_galactic_emperor = yes }
				save_event_target_as = gal_emperor
			}
			random_war = {
				limit = {
					using_war_goal = {
						type = wg_declared_crisis
						owner = event_target:former_crisis
					}
				}
				every_war_participant = {
					limit = {
						NOT = { is_same_value = event_target:former_crisis }
					}
					country_event = { id = crisis.4112 }
				}
				every_war_participant = {
					prev = {
						remove_war_participant = prev
					}
				}
			}
			country_event = { id = crisis.4113 }
		}
	}

	potential = {
		has_galactic_emperor = yes
		has_nemesis = yes
	}

	ai_weight = {
		base = @resolution_weight_hated

		# More likely to repeal if it's a normal country
		modifier = {
			factor = 4
			from = {
				is_homicidal = no
				NOR = {
					has_country_flag = crisis_sphere_revealed
					has_country_flag = cracked_first_star
					has_crisis_level = crisis_level_5
				}
			}
			desc = gal_com_target_is_a_normal_empire
		}

		# Should be very unlikely to repeal end game crisis country
		modifier = {
			factor = 0.2
			from = {
				OR = {
					has_country_flag = crisis_sphere_revealed
					has_country_flag = cracked_first_star
				}
			}
			desc = gal_com_target_is_a_crisis_empire
		}

		# Unlikely to repeal very powerful homicidal countries
		modifier = {
			factor = 0.2
			from = {
				is_homicidal = yes
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_very_strong_homicidal_empire
		}
		
		# Unlikely to repeal very powerful assimilator empires
		modifier = {
			factor = 0.2
			from = {
				is_civic_machine_assimilator = yes
				is_pacifist = no
				relative_power = {
					who = prev
					category = fleet
					value = overwhelming
				}
			}
			desc = gal_com_target_is_very_strong_assimilator_empire
		}
		
		modifier = {
			factor = 20
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
			from = {
				NOR = {
					has_ascension_perk = ap_become_the_crisis
					is_homicidal = yes
					AND = {
						is_fallen_empire = yes
						NOT = { has_global_flag = war_in_heaven_ongoing }
					}
				}
			}
		}
		
		modifier = {
			factor = 0.5
			OR = {
				is_militarist = yes
				is_civic_militarist = yes
			}
			desc = ethic_militarist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_pacifist
			from = {
				NOT = { has_country_flag = crisis_sphere_revealed }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 6
			has_ethic = ethic_fanatic_pacifist
			from = {
				NOT = { has_country_flag = crisis_sphere_revealed }
			}
			desc = ethic_pacifist
		}
		
		modifier = {
			factor = 0.75
			from = {
				has_crisis_level = crisis_level_4
			}
			desc = gal_com_crisis_level_4
		}
		modifier = {
			factor = 0.25
			from = {
				has_crisis_level = crisis_level_5
			}
			desc = gal_com_crisis_level_5
		}
		
		modifier = {
			factor = 5
			from = {
				NOR = {
					has_ascension_perk = ap_become_the_crisis
					is_homicidal = yes
					AND = {
						is_fallen_empire = yes
						NOT = { has_global_flag = war_in_heaven_ongoing }
					}
				}
			}
			NOT = { has_ascension_perk = ap_become_the_crisis }
			desc = gal_com_target_does_not_have_crisis_perk
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_defender_of_the_galaxy
			from = {
				OR = {
					has_crisis_level = crisis_level_3
					is_homicidal = yes
				}
			}
			desc = ap_defender_of_the_galaxy
		}
	}
}

### GALACTIC CUSTODIANSHIP

# Nominate Custodian
resolution_galacticreforms_nominate_custodian = {
	icon = "GFX_resolution_nominate_custodian"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = no
	valid_target = {
		is_country_type = default
		is_galactic_community_member = yes
		is_part_of_galactic_council = yes
		custom_tooltip = {
			fail_text = "nominate_other_custodian_requires_independence"
			is_subject = no
		}
		custom_tooltip = {
			fail_text = "nominate_other_custodian_not_crisis"
			NOR = {
				has_ascension_perk = ap_become_the_crisis
				has_valid_civic = civic_pompous_purists
			}
		}
	}

	effect = {
		set_galactic_custodian = yes
		hidden_effect = {
			country_event = { id = custodian.1 }
			if = {
				limit = { has_global_flag = gdf_active }
				country_event = { id = custodian.35 days = 10 }
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_council_established = yes
		has_galactic_custodian = no
		has_galactic_emperor = no
	}

	allow = {
		custom_tooltip = {
			fail_text = "nominate_custodian_requires_independence"
			is_subject = no
		}
		custom_tooltip = {
			fail_text = "nominate_custodian_not_crisis"
			NOT = { has_ascension_perk = ap_become_the_crisis }
		}
	}

	active = {
		has_galactic_custodian = no
	}

	ai_weight = {
		base = @resolution_weight_normal
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 5
			is_same_value = from
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 2
			is_same_value = from
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 4
			is_same_value = from
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 2
			is_same_value = from
			has_ethic = ethic_fanatic_militarist
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			is_same_value = from
			desc = gal_com_target_is_me
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 0
			is_rival = from
			desc = gal_com_target_is_rival
		}
		modifier = {
			factor = 0
			is_at_war_with = from
			desc = gal_com_target_is_rival
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = {
			factor = 2
			is_civic_machine_servitor = yes
			desc = civic_machine_servitor
		}
		modifier = {
			factor = 5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

# Unseat Custodian
resolution_galacticreforms_unseat_custodian = { # 和平视窗计划生效时不可罢免监管人
	icon = "GFX_resolution_end_custodianship"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = yes
	harmful = yes
	valid_target = {
		is_galactic_custodian = yes
	}

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_galacticreforms_unseat_custodian_tooltip
		hidden_effect = {
			if = {
				limit = { is_active_resolution = "resolution_custodian_perpetual_custodianship" }
				cancel_resolution = "resolution_custodian_perpetual_custodianship"
			}
			country_event = { id = custodian.16 }
		}
	}

	fail_effects = {
	}

	potential = {
		is_galactic_custodian = no
		NOT = { is_active_resolution = resolution_custodian_peace_windows_project }
	}

	active = {
		has_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 1.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 0.2
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 0.2
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}

		modifier = {
			factor = 0.2
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_ongoing_grey_goo_crisis
		}

		modifier = {
			factor = 0.2
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_ongoing_great_khan_crisis
		}

		modifier = {
			factor = 0.2
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 0.2
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 0.1
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 0
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 0
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}

		modifier = {
			factor = 0
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}

		modifier = {
			factor = 20
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}

		modifier = {
			factor = 0
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}

		modifier = {
			factor = 20
			is_subject = yes
			overlord = { 
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 20
			is_rival = from
			desc = gal_com_target_is_rival
		}
		modifier = {
			factor = 5
			is_at_war_with = from
			desc = gal_com_target_is_rival
		}
		modifier = {
			factor = 20
			desc = gal_com_custodian_threat
			from = { has_country_flag = tried_to_become_emperor }
			OR = {
				is_egalitarian = yes
				is_xenophobe = yes
				has_ai_personality = xenophobic_isolationists
				is_civic_cutthroat_politics = yes
				is_civic_machine_servitor = yes
			}
			is_authoritarian = no
			is_civic_authoritarian = no
		}
		modifier = {
			factor = 10
			desc = gal_com_custodian_threat
			from = { has_country_flag = tried_to_become_emperor }
			NOR = {
				is_egalitarian = yes
				is_xenophobe = yes
				has_ai_personality = xenophobic_isolationists
				is_authoritarian = yes
				is_civic_authoritarian = yes
				is_civic_cutthroat_politics = yes
				is_civic_machine_servitor = yes
			}
		}
		modifier = {
			factor = 3
			desc = gal_com_custodian_threat
			from = { has_country_flag = tried_to_become_emperor }
			has_galactic_republic = yes
			is_authoritarian = no
			is_civic_authoritarian = no
		}
		modifier = {
			factor = 0.2
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 0.2
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
			
		}
		modifier = {
			factor = 3
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}
		modifier = {
			factor = 2
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 2
			is_civic_cutthroat_politics = yes
			desc = gal_com_cutthroat_civic # wants chance to be custodian
			is_galactic_custodian = no
		}
		modifier = {
			factor = 0.5
			is_civic_machine_servitor = yes
			desc = civic_machine_servitor
		}
		modifier = {
			factor = 0.25
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

# Form the Galactic Empire
resolution_custodian_form_empire = {
	icon = "GFX_resolution_form_galactic_empire"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		if = {
			limit = { is_gestalt = no }
			custom_tooltip = resolution_custodian_form_empire_tooltip
		}
		if = {
			limit = { is_machine_empire = yes }
			custom_tooltip = resolution_custodian_form_empire_tooltip_machine
		}
		if = {
			limit = { is_hive_empire = yes }
			custom_tooltip = resolution_custodian_form_empire_tooltip_hive
		}
		if = { #兼容Expanded Diplomacy and Espionage
			limit = { has_global_flag = better_diplo_installed }
			hidden_effect = {
				set_global_flag = galactic_headquarter_founded
				if = {
					limit = { exists = event_target:headquarter_founder }
					event_target:headquarter_founder = { remove_modifier = galactic_headquarter_founder }
				}
				if = {
					limit = { exists = event_target:headquarter_founder_planet }
					event_target:headquarter_founder_planet = { remove_deposit = d_galactic_senate }
				}
				clear_global_event_target = headquarter_founder
				clear_global_event_target = headquarter_founder_planet
				random_playable_country = {
					limit = { is_galactic_custodian = yes }
					set_timed_country_flag = { flag = faction_egalitarian_outraged_gc days = 7200 }
					add_modifier = {
						modifier = galactic_headquarter_founder
						days = -1
					}
					save_global_event_target_as = headquarter_founder
					capital_scope = {
						add_deposit = d_galactic_senate
						save_global_event_target_as = headquarter_founder_planet
					}
				}
			}
		}
		hidden_effect = {
			random_playable_country = {
				limit = { is_galactic_custodian = yes }
				country_event = { id = emperor.1 }
			}
		}
		if = { #兼容星海帝皇起源
			limit = { has_global_flag = better_diplo_installed }
			hidden_effect = {
				random_playable_country = {
					limit = { is_galactic_custodian = yes }
					set_tax_resolutions = yes
					set_advanced_tax_resolutions = yes
				}
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = "resolution_custodian_perpetual_custodianship"
		has_galactic_emperor = no
		NOT = { any_federation = { has_federation_perk = galactic_confederation_passive } }
		if = { #兼容舰R
			limit = { has_global_flag = has_wsg_mod }
			has_emperor_auth_trigger = no
		}
		if = { #兼容xpanded Diplomacy and Espionage
			limit = { has_global_flag = better_diplo_installed }
			is_subject = no
			has_galactic_republic = no
		}
		NOT = { #兼容Grand Custodianship
			has_global_flag = grand_custodianship_declared
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "requires_no_war_in_heaven"
			NOT = { has_global_flag = war_in_heaven_ongoing } # Can't become Emperor during WiH
		}
	}

	active = {
		has_galactic_custodian = yes
				}
					##################################### 法令：整合度
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = centralization_imperium_mid
			}
		}
		key = law_category_centralization_imperium
		modifier = {
			law_category_centralization_imperium_resolution_cost = 1
		}
	}
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = centralization_imperium_high
			}
		}
		key = law_category_centralization_imperium
		modifier = {
			law_category_centralization_imperium_resolution_cost = 2
		}
	}
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = centralization_imperium_max
			}
		}
		key = law_category_centralization_imperium
		modifier = {
			law_category_centralization_imperium_resolution_cost = 3
		}
	}
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = centralization_imperium_unified_imperium
			}
		}
		key = law_category_centralization_imperium
		modifier = {
			law_category_centralization_imperium_resolution_cost = 4
		}
	}
	##################################### 法令：自由迁移
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = free_migration_yes_imperium
			}
		}
		key = law_category_imperium_free_migration
		modifier = {
			free_migration_yes_imperium_modifier = 1
		}
	}
	##################################### 法令：人工智能
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperium_ai_policy_ai_outlawed
			}
		}
		key = law_category_imperium_ai_policy
		modifier = {
			imperium_ai_policy_ai_outlawed_modifier = 1
		}
	}
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperium_ai_policy_ai_servitude
			}
		}
		key = law_category_imperium_ai_policy
		modifier = {
			imperium_ai_policy_ai_servitude_modifier = 1
		}
	}
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperium_ai_policy_ai_full_rights
			}
		}
		key = law_category_imperium_ai_policy
		modifier = {
			imperium_ai_policy_ai_full_rights_modifier = 1
		}
	}
	##################################### 法令：奴隶制
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperium_slavery_policy_slavery_not_allowed
			}
		}
		key = law_category_imperium_slavery_policy
		modifier = {
			imperium_slavery_policy_slavery_not_allowed_modifier = 1
		}
	}
	triggered_modifier = {
		potential = {
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperium_slavery_policy_slavery_allowed
			}
		}
		key = law_category_imperium_slavery_policy
		modifier = {
			imperium_slavery_policy_slavery_allowed_modifier = 1
		}
	}
	##################################### 部门：帝国中央银行
	# 2级：+25%行星飞升效果
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_bank
			galactic_emperor = {
				has_federation = yes
				federation = {
					OR = {
						has_federation_law = imperial_bank_administration
						has_federation_law = imperial_bank_control
					}
				}
			}
		}
		key = law_category_imperial_bank
		modifier = {
			resolution_emperor_imperial_bank_lvl_2 = 1
		}
	}
	# 3级：+1000000资源上限
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_bank
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperial_bank_control
			}
		}
		key = law_category_imperial_bank
		modifier = {
			resolution_emperor_imperial_bank_lvl_3 = 1
		}
	}
	# 行省规模行政：
	triggered_modifier = { #3级
		potential = {
			is_active_resolution = resolution_emperor_imperial_bank
			galactic_emperor = {
				has_federation = yes
				federation = {
					has_federation_law = imperial_bank_control
				}
			}
		}
		key = law_category_imperial_bank
		modifier = {
			imperial_governance_usage_per_provincial_sprawl = 0.25
		}
	}
	##################################### 部门：帝国安全总局
	# 2级：稳定度+8，行省月忠诚+2，罪企执行屈服（在法案on_enact）
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				OR = {
					has_federation_law = isd_public_police
					has_federation_law = isd_peoples_police
				}
			}
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_2 = 1
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_public_police
			}
			is_imperial_province = yes
		}
		key = law_category_isd
		modifier = {
			isd_loyalty_effect_lv2 = 1
		}
	}
	# 3级：执法者岗位凝聚产出+2，罪犯岗位-2，如果不是行省得到一半效果，行省月忠诚+4
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			NOT = { has_ethic = ethic_gestalt_consciousness }
			is_galactic_emperor = no
			is_imperial_province = no
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_3 = 0.5
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			is_machine_empire = yes
			is_galactic_emperor = no
			is_imperial_province = no
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_3_machine = 0.5
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			is_hive_empire = yes
			is_galactic_emperor = no
			is_imperial_province = no
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_3_hive = 0.5
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			NOT = { has_ethic = ethic_gestalt_consciousness }
			OR = {
				is_galactic_emperor = yes
				is_imperial_province = yes
			}
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_3 = 1
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			is_machine_empire = yes
			OR = {
				is_galactic_emperor = yes
				is_imperial_province = yes
			}
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_3_machine = 1
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			is_hive_empire = yes
			OR = {
				is_galactic_emperor = yes
				is_imperial_province = yes
			}
		}
		key = law_category_isd
		modifier = {
			resolution_emperor_isd_lvl_3_hive = 1
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = isd_peoples_police
			}
			is_imperial_province = yes
		}
		key = law_category_isd
		modifier = {
			isd_loyalty_effect_lv3 = 1
		}
	}
	##################################### 部门：帝国科学院
	# 3级：帝国行省每获得一项科技，忠诚度+5持续三个月（可累积）
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_isd
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperial_academy_of_sciences_technical_unification
			}
			is_imperial_province = yes
			check_variable = { which = ias_get_new_tech_loyalty_bonus value > 0 }
		}
		key = law_category_imperial_academy_of_sciences
		modifier = {
			ias_lv3_loyalty_effect = 1
		}
	}
	# 行省规模行政：
	triggered_modifier = { #2级
		potential = {
			is_active_resolution = law_category_imperial_academy_of_sciences
			galactic_emperor = {
				has_federation = yes
				federation = {
					has_federation_law = imperial_academy_of_sciences_research_integration
				}
			}
		}
		key = law_category_isd
		modifier = {
			imperial_governance_usage_per_provincial_sprawl = 0.1
		}
	}
	triggered_modifier = { #3级
		potential = {
			is_active_resolution = law_category_imperial_academy_of_sciences
			galactic_emperor = {
				has_federation = yes
				federation = {
					has_federation_law = imperial_academy_of_sciences_technical_unification
				}
			}
		}
		key = law_category_isd
		modifier = {
			imperial_governance_usage_per_provincial_sprawl = 0.3
		}
	}
	##################################### 部门：帝国工程署
	# 3级：
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_department_of_engineering
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperial_department_of_engineering_project_new_world
			}
		}
		key = law_category_imperial_department_of_engineering
		modifier = {
			resolution_emperor_imperial_department_of_engineering_lvl_3 = 1
		}
	}
	# 行省规模行政：
	triggered_modifier = { #2级
		potential = {
			is_active_resolution = law_category_imperial_academy_of_sciences
			galactic_emperor = {
				has_federation = yes
				federation = {
					OR = {
						has_federation_law = imperial_department_of_engineering_personnel_coordination
						has_federation_law = imperial_department_of_engineering_project_new_world
					}
				}
			}
		}
		key = law_category_imperial_department_of_engineering
		modifier = {
			imperial_governance_usage_per_provincial_sprawl = 0.1
		}
	}
	##################################### 部门：帝国教育部
	# 基础：每月权威增加0.2
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_ministry_of_education
			is_galactic_emperor = yes
		}
		key = resolution_emperor_imperial_ministry_of_education
		modifier = {
			imperial_authority_monthly_get = 0.2
		}
	}
	# 2级：领袖池+2，每月权威增加0.3
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_ministry_of_education
			OR = {
				is_galactic_emperor = yes
				is_imperial_province = yes
			}
			galactic_emperor = {
				has_federation = yes
				federation = {
					OR = {
						has_federation_law = imperial_ministry_of_education_solidarity_movement
						has_federation_law = imperial_ministry_of_education_critical_view_of_history
					}
				}
			}
		}
		key = law_category_imperial_ministry_of_education
		modifier = {
			resolution_emperor_imperial_ministry_of_education_lvl_2 = 1
		}
	}
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_ministry_of_education
			is_galactic_emperor = yes
			has_federation = yes
			federation = {
				OR = {
					has_federation_law = imperial_ministry_of_education_solidarity_movement
					has_federation_law = imperial_ministry_of_education_critical_view_of_history
				}
			}
		}
		key = law_category_imperial_ministry_of_education
		modifier = {
			imperial_authority_monthly_get = 0.3
		}
	}
	# 行省规模行政：
	triggered_modifier = { #3级
		potential = {
			is_active_resolution = law_category_imperial_academy_of_sciences
			galactic_emperor = {
				has_federation = yes
				federation = {
					has_federation_law = imperial_ministry_of_education_critical_view_of_history
				}
			}
		}
		key = law_category_imperial_ministry_of_defence
		modifier = {
			imperial_governance_usage_per_provincial_sprawl = 0.15
		}
	}
	##################################### 部门：帝国国防部
	# 3级：指挥上限
	triggered_modifier = {
		potential = {
			is_active_resolution = resolution_emperor_imperial_ministry_of_defence
			has_federation = yes
			federation = {
				has_federation_perk = imperium_federation_passive
				has_federation_law = imperial_ministry_of_defence_joint_headquarter
			}
		}
		key = law_category_imperial_ministry_of_defence
		modifier = {
			resolution_emperor_imperial_ministry_of_defence_lvl_3 = 1
		}
	}
	# 行省规模行政：
	triggered_modifier = { #3级
		potential = {
			is_active_resolution = law_category_imperial_academy_of_sciences
			galactic_emperor = {
				has_federation = yes
				federation = {
					has_federation_law = imperial_ministry_of_defence_joint_headquarter
				}
			}
		}
		key = law_category_imperial_ministry_of_defence
		modifier = {
			imperial_governance_usage_per_provincial_sprawl = 0.1
		}
	}
	##################################### 状态：帝国治理
	triggered_modifier = {
		potential = {
			is_galactic_emperor = yes
			any_situation = {
				is_situation_type = situation_imperial_governance
				current_stage = stage_ipg_solidary
			}
		}
		key = situation_imperial_governance
		modifier = {
			imperial_authority_monthly_get = 0.2
		}
	}
	triggered_modifier = {
		potential = {
			is_galactic_emperor = yes
			any_situation = {
				is_situation_type = stage_ipg_orderly
				current_stage = stage_ipg_solidary
			}
		}
		key = situation_imperial_governance
		modifier = {
			imperial_authority_monthly_get = -0.2
		}
	}
	triggered_modifier = {
		potential = {
			is_galactic_emperor = yes
			any_situation = {
				is_situation_type = stage_ipg_disorderly
				current_stage = stage_ipg_solidary
			}
		}
		key = situation_imperial_governance
		modifier = {
			imperial_authority_monthly_get = -0.4
		}
	}
	triggered_modifier = {
		potential = {
			is_galactic_emperor = yes
			any_situation = {
				is_situation_type = stage_ipg_incontrollable
				current_stage = stage_ipg_solidary
			}
		}
		key = situation_imperial_governance
		modifier = {
			imperial_authority_monthly_get = -0.8
		}
	}
	##################################### 外交姿态
	triggered_modifier = { #荣耀征服
		potential = {
			is_galactic_emperor = yes
			has_policy_flag = diplo_stance_glory_conquest
		}
		key = diplo_stance_glory_conquest
		modifier = {
			envoy_improve_relations_mult = -0.5
		}
	}
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 1 } }		modifier = { imperial_authority_monthly_get = -0.1 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 2 } }		modifier = { imperial_authority_monthly_get = -0.2 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 3 } }		modifier = { imperial_authority_monthly_get = -0.3 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 4 } }		modifier = { imperial_authority_monthly_get = -0.4 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 5 } }		modifier = { imperial_authority_monthly_get = -0.5 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 6 } }		modifier = { imperial_authority_monthly_get = -0.6 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 7 } }		modifier = { imperial_authority_monthly_get = -0.7 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 8 } }		modifier = { imperial_authority_monthly_get = -0.8 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value = 9 } }		modifier = { imperial_authority_monthly_get = -0.9 } key = diplo_stance_glory_conquest }
	triggered_modifier = { potential = { is_galactic_emperor = yes has_policy_flag = diplo_stance_glory_conquest years_of_peace = { value >= 10 } }		modifier = { imperial_authority_monthly_get = -1.0 } key = diplo_stance_glory_conquest }

	
	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 10
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}

		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}

		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}

		modifier = {
			factor = 20
			is_galactic_custodian = yes
			is_authoritarian = yes
			desc = gal_com_authoritarian_custodian
		}

		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}

		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 0
			is_egalitarian = yes
			desc = ethic_egalitarian
		}

		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}

		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}

		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
	}
}

# United Front
resolution_custodian_united_front = {
	icon = "GFX_resolution_united_front"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		description = resolution_custodian_united_front_modifier_desc
		damage_vs_country_type_swarm_mult = 0.2
    	damage_vs_country_type_extradimensional_mult = 0.2
    	damage_vs_country_type_extradimensional_2_mult = 0.2
    	damage_vs_country_type_extradimensional_3_mult = 0.2
    	damage_vs_country_type_ai_empire_mult = 0.2
    	damage_vs_country_type_gray_goo_mult = 0.2
		damage_vs_player_crisis_mult = 0.2
    	country_energy_produces_mult = -0.03
	}

	effect = {
		hidden_effect = {
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = socialistt.51 }
			}
			set_global_flag = resolution_with_breach_effect_passed
		}
	}
	fail_effects = {
	}

	breach = {
		AND = {
			NOT = { has_global_flag = war_in_heaven_ongoing }
			is_at_war = yes
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_united_front }
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		any_country = { is_crisis_faction = yes }
		
	}
	
	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}

		modifier = {
			factor = 1.6
				is_militarist = yes
			desc = ethic_militarist
		}

		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}

		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}

		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}

		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = personality_xenophobic_isolationists
		}

		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}

		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}

		modifier = {
			factor = 20
				is_militarist = yes
			is_galactic_custodian = yes
			desc = gal_com_militarist_custodian
		}

		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Galactic Mobilization
resolution_custodian_galactic_mobilization = {
	icon = "GFX_resolution_galactic_mobilization"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	triggered_modifier = {
		potential = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		modifier = {
			resolution_custodian_galactic_mobilization = 1
		}
	}
	triggered_modifier = {
		potential = {
			has_ethic = ethic_gestalt_consciousness
		}
		modifier = {
			resolution_custodian_galactic_mobilization_gestalt = 1
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_galactic_mobilization }
		}
		custom_tooltip = {
			fail_text = "galaxy_must_be_in_danger"
			galaxy_is_peace = no
		}
	}

	effect = {
		hidden_effect = { set_global_flag = galactic_mobilization_activated }
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		NOT = { has_global_flag = galactic_republic_formed }	# Expanded Diplomacy and Espionage mod 
	}
	
	active = {
		has_galactic_custodian = yes
		galaxy_is_peace = no
		NOT = { has_global_flag = galactic_republic_formed }	# Expanded Diplomacy and Espionage mod 
		#NOT = { is_active_resolution = resolution_emperor_galactic_mobilization }
	}

	ai_weight = {
		base = @resolution_weight_hated

		modifier = {
			factor = 1.6
				is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0
			 has_ascension_perk = ap_become_the_crisis
			 desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 20
				is_militarist = yes
			is_galactic_custodian = yes
			desc = gal_com_militarist_custodian
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Introduce Galactic Standard
resolution_custodian_galactic_standard = {
	icon = "GFX_resolution_galactic_standard"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	triggered_modifier = {
		potential = { NOT = { is_active_resolution = resolution_emperor_galactic_standard } }
		modifier = { resolution_custodian_galactic_standard = 1 }
	}
	triggered_modifier = {
		potential = {
			NOT = { is_active_resolution = resolution_emperor_galactic_standard }
			has_global_flag = flag_galactic_standard_set_timer
		}
		modifier = { resolution_custodian_galactic_standard_price = 1 }
	}

	effect = {
		set_timed_country_flag = { flag = faction_xenophobe_isolationist_outraged_gc days = 7200 }
		set_timed_country_flag = { flag = faction_xenophobe_supremacist_outraged_gc days = 7200 }
		hidden_effect = {
			if = {
				limit = { NOT = { has_global_flag = flag_galactic_standard_set } }
				custom_tooltip = "resolution_custodian_galactic_standard_price_effect"
				set_global_flag = flag_galactic_standard_set
				set_timed_global_flag = {
					flag = flag_galactic_standard_set_timer
					years = 25
	}
				event_target:global_event_country = {
					set_saved_date = {
						key = galactic_standard_set_timer
						days_from_present = 9000
						expires = 9000
					}
				}
				set_global_flag = galactic_standard_activated
			}
			else_if = {
				limit = { has_global_flag = flag_galactic_standard_set_timer }
				custom_tooltip = "resolution_custodian_galactic_standard_price_effect_active"
			}
	}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_galactic_standard }
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		NOT = { has_global_flag = galactic_republic_formed } # for compatibility with Expanded Diplomacy and Espionage mod 
	}
	
	active = {
		has_galactic_custodian = yes
		#NOT = { is_active_resolution = resolution_emperor_galactic_standard }
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 2
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 1.25
			OR = {
			has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
		}
			desc = gal_com_trader_ai_personality
		}
		modifier = {
			factor = 0.5
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 1.5
			is_galactic_custodian = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
	}
}

# Anti-Piracy Initiative
resolution_custodian_anti_piracy = {
	icon = "GFX_resolution_anti_piracy_initiative"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		description = resolution_custodian_anti_piracy_modifier_desc
		local_trade_protection_add = 5
    	ship_piracy_suppression_mult = 0.25
    	damage_vs_country_type_pirate_mult = 0.2
    	damage_vs_country_type_dormant_marauders_mult = 0.2
    	damage_vs_country_type_awakened_marauders_mult = 0.2
    	country_energy_produces_mult = -0.03
	}

	effect = {
	}

	fail_effects = {
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_anti_piracy }
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		has_galactic_republic = no
	}
	
	active = {
		has_galactic_custodian = yes
		has_galactic_republic = no
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 0.25
			is_gestalt = yes
			is_civic_machine_servitor = no
			NOT = {
				any_neighbor_country = { is_country_type = dormant_marauders }
			}
			desc = ethic_gestalt_consciousness
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}
		modifier = {
			factor = 2
			is_civic_machine_servitor = yes
			desc = civic_machine_servitor # cares about the safety of organics
		}
		modifier = {
			factor = 1.5
			OR = { is_militarist = yes is_civic_militarist = yes }
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 0.75
			is_spy_empire = yes
			desc = gal_com_spy_civic
		}
		modifier = {
			factor = 0.5
			is_criminal_syndicate = yes
			desc = gov_criminal_syndicate
		}
		modifier = {
			factor = 10
			any_neighbor_country = { is_country_type = dormant_marauders }
			desc = gal_com_neighboring_marauders
		}
		modifier = {
			factor = 0.75
			has_monthly_income = { resource = energy  value < 20 }
			desc = gal_com_energy_income
		}
		modifier = {
			factor = 0.5
			has_deficit = energy
			desc = gal_com_energy_income
		}
	}
}

# Extend Custodianship
resolution_custodian_extend_custodianship = {
	icon = "GFX_resolution_term_limits"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_custodian_extend_custodianship_tooltip
		hidden_effect = {
			add_custodian_term_days = 10800
			set_country_flag = extended_custodianship
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		NOT = { 
			is_active_resolution = "resolution_custodian_perpetual_custodianship"
			has_country_flag = extended_custodianship
		}
		has_galactic_republic = no
	}

	active = {
		has_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_normal
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 20
			is_authoritarian  = yes
			desc = gal_com_authoritarian_custodian
			is_galactic_custodian = yes
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = {
			factor = 1.25
			is_civic_has_elite = yes
			desc = gal_com_elite_civic
		}
		modifier = {
			factor = 1.25
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 1.25
			is_civic_authoritarian = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 0.75
			is_civic_has_meritocracy = yes
			desc = gal_com_meritocracy_civic
		}
		modifier = {
			factor = 0.75
			is_civic_cutthroat_politics = yes
			desc = gal_com_cutthroat_civic # wants to be emperor
			is_galactic_custodian = no
		}
		modifier = {
			factor = 4
			is_civic_cutthroat_politics = yes
			desc = gal_com_cutthroat_civic # wants to be emperor
			is_galactic_custodian = yes
		}
		modifier = {
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 0.8
			is_anti_corp = yes
			desc = gal_com_anti_corp_civic
		}
	}
}

# Remove Custodianship Term Limit
resolution_custodian_perpetual_custodianship = {
	icon = "GFX_resolution_term_limits"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_custodian_perpetual_custodianship_tooltip
		hidden_effect = {
			set_timed_country_flag = { flag = galcom_resolution_passed_anti_progressive days = 7200 }
			set_custodian_term_days = -1 # -1 means that the timer will stop counting
		}
	}

	fail_effects = {
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_perpetual_custodianship }
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		has_galactic_republic = no
	}

	active = {
		has_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		
		modifier = {
			factor = 0.4
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		modifier = {
			factor = 0
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0
			is_democratic_crusaders = yes
			desc = personality_democratic_crusaders
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 20
			is_authoritarian  = yes
			desc = gal_com_authoritarian_custodian
			is_galactic_custodian = yes
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}

		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}

		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = {
			factor = 1.5
			is_civic_has_elite = yes
			desc = gal_com_elite_civic
		}
		modifier = {
			factor = 1.5
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 1.5
			is_civic_authoritarian = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 0.75
			is_civic_has_meritocracy = yes
			desc = gal_com_meritocracy_civic
		}
		modifier = {
			factor = 0.5
			is_civic_cutthroat_politics = yes
			desc = gal_com_cutthroat_civic # wants chance to be custodian
			is_galactic_custodian = no
		}
		modifier = {
			factor = 4
			is_civic_cutthroat_politics = yes
			desc = gal_com_cutthroat_civic # wants chance to be custodian
			is_galactic_custodian = yes
		}
		modifier = {
			factor = 1.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

# Prematurely End Custodianship
resolution_custodian_end_custodianship = { # 和平视窗计划生效时不可结束监管人任期
	icon = "GFX_resolution_end_custodianship"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_custodian_end_custodianship_tooltip
		hidden_effect = {
			country_event = { id = custodian.14 }
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		NOT = { is_active_resolution = resolution_custodian_peace_windows_project }
	}

	active = {
		has_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_popular
		
		modifier = {
			factor = 0
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
	}
}

# Galactic Defense force
resolution_custodian_gdf = {
	icon = "GFX_resolution_galactic_defense_force"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_gdf }
		}
	}

	modifier = {
		resolution_custodian_gdf = 1
	}
	################################# 银河邦联提供的额外舰容
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_low_confederation } }
		modifier = { country_community_gdf_naval_capacity = 40 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_medium_confederation } }
		modifier = { country_community_gdf_naval_capacity = 80 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_high_confederation } }
		modifier = { country_community_gdf_naval_capacity = 120 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_very_high_confederation } }
		modifier = { country_community_gdf_naval_capacity = 160 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_combined_fleet_confederation } }
		modifier = { country_community_gdf_naval_capacity = 200 }
	}

	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
		}
		modifier = {
			gdf_naval_cap = 1
		}
	}
	################################# 银河邦联提供的额外舰容
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_low_confederation }
		}
		modifier = { country_naval_cap_add = 40 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_medium_confederation }
		}
		modifier = { country_naval_cap_add = 80 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_high_confederation }
		}
		modifier = { country_naval_cap_add = 120 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_very_high_confederation }
		}
		modifier = { country_naval_cap_add = 160 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_combined_fleet_confederation }
		}
		modifier = { country_naval_cap_add = 200 }
	}

	effect = {
		set_galactic_defense_force = yes
		hidden_effect = {
			set_global_flag = gdf_active
			random_playable_country = {
				limit = { is_galactic_custodian = yes }
				save_event_target_as = custodian
			}
			every_playable_country = {
				limit = { is_ai = no }
				country_event = { id = custodian.30 }
			}
			#cancel_resolution = resolution_custodian_disband_gdf
			event_target:global_event_country = {
				set_variable = { which = gdf_expand_size value = 1 }
		}
	}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 0.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 1.4
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 14
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 14
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 14
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 20
			is_militarist = yes
			is_galactic_custodian = yes
			desc = gal_com_militarist_custodian
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Expand GDF
resolution_custodian_expand_gdf = {
	icon = "GFX_resolution_expand_gdf"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_custodian_expand_gdf" }
		}
	}

	modifier = {
		resolution_custodian_gdf_2 = 1
	}
	triggered_modifier = {
		potential = {
			NOT = {
				any_federation = {
					has_federation_perk = galactic_confederation_passive
					OR = {
						has_federation_law = fleet_contribution_low_confederation
						has_federation_law = fleet_contribution_medium_confederation
						has_federation_law = fleet_contribution_high_confederation
						has_federation_law = fleet_contribution_very_high_confederation
						has_federation_law = fleet_contribution_combined_fleet_confederation
					}
				}
			}
		}
		modifier = { country_community_gdf_naval_capacity = 400 }
	}
	################################# 银河邦联提供的额外舰容
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_low_confederation } }
		modifier = { country_community_gdf_naval_capacity = 440 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_medium_confederation } }
		modifier = { country_community_gdf_naval_capacity = 480 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_high_confederation } }
		modifier = { country_community_gdf_naval_capacity = 520 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_very_high_confederation } }
		modifier = { country_community_gdf_naval_capacity = 560 }
	}
	triggered_modifier = {
		potential = { any_federation = { has_federation_law = fleet_contribution_combined_fleet_confederation } }
		modifier = { country_community_gdf_naval_capacity = 600 }
	}

	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
		}
		modifier = {
			gdf_naval_cap_2 = 1
		}
	}
	################################# 银河邦联提供的额外舰容
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_low_confederation }
		}
		modifier = { country_naval_cap_add = 40 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_medium_confederation }
		}
		modifier = { country_naval_cap_add = 80 }
	}
	triggered_modifier = {
		potential = {
					has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_high_confederation }
				}
		modifier = { country_naval_cap_add = 120 }
				}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_very_high_confederation }
			}
		modifier = { country_naval_cap_add = 160 }
		}
	triggered_modifier = {
		potential = {
			has_global_flag = independent_gdf
			is_same_value = event_target:gdf_country
			any_federation = { has_federation_law = fleet_contribution_combined_fleet_confederation }
		}
		modifier = { country_naval_cap_add = 200 }
	}

	effect = {
		hidden_effect = {
			event_target:global_event_country = {
				set_variable = { which = gdf_expand_size value = 2 }
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		is_active_resolution = "resolution_custodian_gdf"
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 0.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 1.4
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 2
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 20
			is_militarist = yes
			is_galactic_custodian = yes
			desc = gal_com_militarist_custodian
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Disband the GDF
resolution_custodian_disband_gdf = {
	icon = "GFX_resolution_disband_gdf"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_3" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_4" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_5" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_6" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_7" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_8" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_9" }
			influence = 75
		}
		cost = {
			trigger = { is_active_resolution = "resolution_custodian_expand_gdf_10" }
			influence = 75
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		hidden_effect = {
			remove_global_flag = gdf_active
			if = {
				limit = { has_global_flag = independent_gdf }
				remove_global_flag = independent_gdf
			}
			if = {
				limit = { exists = event_target:gdf_country }
				event_target:gdf_country = {
					every_owned_fleet = { delete_fleet = this }
					destroy_country = yes
				}
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf" }
				cancel_resolution = "resolution_custodian_expand_gdf"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_3" }
				cancel_resolution = "resolution_custodian_expand_gdf_3"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_4" }
				cancel_resolution = "resolution_custodian_expand_gdf_4"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_5" }
				cancel_resolution = "resolution_custodian_expand_gdf_5"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_6" }
				cancel_resolution = "resolution_custodian_expand_gdf_6"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_7" }
				cancel_resolution = "resolution_custodian_expand_gdf_7"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_8" }
				cancel_resolution = "resolution_custodian_expand_gdf_8"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_9" }
				cancel_resolution = "resolution_custodian_expand_gdf_9"
			}
			if = {
				limit = { is_active_resolution = "resolution_custodian_expand_gdf_10" }
				cancel_resolution = "resolution_custodian_expand_gdf_10"
			}
			cancel_resolution = "resolution_custodian_gdf"
			every_playable_country = {
				limit = { is_ai = no }
				country_event = { id = custodian.40 }
			}
			event_target:global_event_country = {
				clear_variable = gdf_expand_size
		}
	}
		set_galactic_defense_force = no
	}

	allow = {
		NOT = { is_active_resolution = resolution_custodian_establish_the_galactic_confederation }
	}

	potential = {
		has_nemesis = yes
		is_active_resolution = "resolution_custodian_gdf"
		has_galactic_emperor = no
		OR = {
			is_galactic_custodian = yes
			and = {
				is_part_of_galactic_council = yes
				NOT = { is_active_resolution = resolution_custodian_expand_gdf }
			}
		}
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 2
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 1.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.8
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 0.2
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.2
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.2
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.2
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.2
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 0.1
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 0
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 0
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 0
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 20
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 0
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 20
			is_subject = yes
			overlord = { 
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 0.2
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 0.2
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Interstellar Navigation Agency
resolution_custodian_ina = {
	icon = "GFX_resolution_form_ina"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_custodian_ina = 1
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_ina }
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
	}

	active = {
		has_galactic_emperor = no
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 0.8
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}
		modifier = {
			factor = 1.2
			has_ai_personality = peaceful_traders
			desc = gal_com_trader_ai_personality
		}
		modifier = {
			factor = 1.2
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 2
			has_ai_personality = erudite_explorers
			desc = personality_erudite_explorers
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
	}
}

# Disband the Interstellar Navigation Agency
resolution_custodian_disband_ina = {
	icon = "GFX_resolution_disband_ina"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		cancel_resolution = "resolution_custodian_ina"
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_active_resolution = "resolution_custodian_ina"
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 1.2
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 2
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}
		modifier = {
			factor = 0.8
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 0.4
			has_ai_personality = erudite_explorers
			desc = personality_erudite_explorers
		}
		modifier = {
			factor = 0
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 0.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 0.75
			OR = { is_militarist = yes is_civic_militarist = yes }
			desc = ethic_militarist
		}
		modifier = {
			factor = 1.25
			has_monthly_income = { resource = energy  value < 20 }
			desc = gal_com_energy_income
		}
		modifier = {
			factor = 1.5
			has_deficit = energy
			desc = gal_com_energy_income
		}
	}
}

# Galactic Trade Organization
resolution_custodian_gto = {
	icon = "GFX_resolution_form_gto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_custodian_gto = 1
	}

	active = {
		has_galactic_emperor = no
	}

	effect = {
		set_timed_country_flag = { flag = galcom_resolution_passed_anti_isolationist days = 7200 }
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		has_galactic_emperor = no
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_custodian_gto }
		}
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 1.5
			is_capitalist = yes
			desc = auth_corporate 
		}

		modifier = {
			factor = 1.5
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
			}
			desc = gal_com_trader_ai_personality
		}

		modifier = {
			factor = 0.7
			is_xenophobe = yes
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}

		modifier = {
			factor = 0.2
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
		}
		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 3
			is_civic_free_traders = yes
			desc = gal_com_trade_civic
		}
		modifier = {
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 0.5
			is_anti_corp = yes
			desc = gal_com_anti_corp_civic
		}
	}
}

# Disband the Galactic Trade Organization
resolution_custodian_disband_gto = {
	icon = "GFX_resolution_disband_gto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		cancel_resolution = "resolution_custodian_gto"
		set_timed_country_flag = { flag = galcom_resolution_passed_anti_prosperity days = 7200 }
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_active_resolution = "resolution_custodian_gto"
		has_galactic_emperor = no
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 0.6
			is_capitalist = yes
			desc = auth_corporate 
		}

		modifier = {
			factor = 0.6
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
			}
			desc = gal_com_trader_ai_personality
		}

		modifier = {
			factor = 1.3
			is_xenophobe = yes
			desc = ethic_xenophobe
		}

		modifier = {
			factor = 1.8
			has_ai_personality = xenophobic_isolationists
			desc = gal_com_isolationist_civic
		}

		modifier = {
			factor = 2
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
		}

		modifier = {
			factor = 0
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
		modifier = {
			factor = 0.25
			is_civic_free_traders = yes
			desc = gal_com_trade_civic
		}
		modifier = {
			factor = 0.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 2
			is_anti_corp = yes
			desc = gal_com_anti_corp_civic
		}
	}
}

# GALPOL
resolution_custodian_galpol = { # 银河刑警组织在邦联建立后移动到邦联分类下
	icon = "GFX_resolution_form_galpol"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	triggered_modifier = {
		potential = { NOT = { is_active_resolution = resolution_custodian_establish_the_galactic_confederation } }
		modifier = { resolution_custodian_galpol = 1 }
	}

	effect = {
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_custodian = yes
		NOT = { is_active_resolution = resolution_custodian_establish_the_galactic_confederation }
	}
	active = {
		has_nemesis = yes
		is_galactic_custodian = yes
		NOT = { is_active_resolution = resolution_custodian_establish_the_galactic_confederation }
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_custodian_galpol" }
		}
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 2
			any_owned_planet = {
				planet_crime > 40
			}
			desc = gal_com_owns_high_crime_planet
		}

		modifier = {
			factor = 2
			any_owned_planet = {
				has_branch_office = yes
				branch_office_owner = { is_criminal_syndicate = yes }
			}
			desc = gal_com_owns_planet_with_criminal_syndicate_branch_office
		}

		modifier = {
			factor = 0
			is_criminal_syndicate = yes
			desc = gov_criminal_syndicate
		}

		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}

		modifier = {
			factor = 4
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
	}
}

# Disband GALPOL
resolution_custodian_disband_galpol = {
	icon = "GFX_resolution_disband_galpol"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		cancel_resolution = "resolution_custodian_galpol"
		hidden_effect = {
			remove_global_flag = resolution_custodian_confed_galpol_upgrade_1
			remove_global_flag = resolution_custodian_confed_galpol_upgrade_2
			remove_global_flag = resolution_custodian_confed_galpol_upgrade_3
			remove_global_flag = resolution_custodian_confed_galpol_upgrade_4
		}
	}

	fail_effects = {
	}

	potential = {
		is_active_resolution = "resolution_custodian_galpol"
		NOT = { is_active_resolution = resolution_custodian_establish_the_galactic_confederation }
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 6
			is_criminal_syndicate = yes
			desc = gov_criminal_syndicate
		}

		modifier = {
			factor = 1.8
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}

		modifier = {
			factor = 0.4
			any_owned_planet = {
				planet_crime > 40
			}
			desc = gal_com_owns_high_crime_planet
		}

		modifier = {
			factor = 0.2
			any_owned_planet = {
				has_branch_office = yes
				branch_office_owner = { is_criminal_syndicate = yes }
			}
			desc = gal_com_owns_planet_with_criminal_syndicate_branch_office
		}

		modifier = {
			factor = 0
			is_galactic_custodian = yes
			desc = gal_com_is_the_custodian
		}
	}
}

### GALACTIC EMPIRE

# Imperial Crusade
resolution_galactic_empire_imperial_crusade = {
	icon = "GFX_resolution_imperial_crusade"

	potential = {
		has_galactic_emperor = yes
		NOR = { # Only one crusade at a time
			any_war = {
				using_war_goal = {
					type = wg_imperial_crusade
					owner = attacker
				}
			}
			any_war = {
				using_war_goal = {
					type = wg_imperial_crusade_total_war
					owner = attacker
				}
			}
			any_war = { #不用
				using_war_goal = {
					type = wg_imperial_crusade_anti_federation
					owner = attacker
				}
			}
		}
	}

	resources = {
		category = military_resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}

	target = yes
	harmful = yes
	valid_target = {
		OR = {
		is_country_type = default
			is_country_type = fallen_empire
			AND = {
				is_country_type = awakened_fallen_empire
				NOT = { has_global_flag = war_in_heaven_ongoing }
			}
		}
		is_galactic_community_member = no
		NOR = { 
			has_country_flag = imperial_crusade_target
			has_country_flag = empire_rebel
		}
		has_federation = no
		NOT = { is_at_war_with = galactic_emperor }
	}

	allow = {
		imperial_authority >= 140
	}

	active = {
		has_galactic_emperor = yes
		from = { is_at_war_with = galactic_emperor }
	}

	effect = {
		if = {
			limit = {
				NOT = { is_active_resolution = resolution_emperor_imperial_unification }
				is_country_type = default
				is_homicidal = no
			}
		custom_tooltip = resolution_imperial_crusade_tooltip
		}
		else = {
			custom_tooltip = resolution_imperial_crusade_tooltip_total_war
		}
		hidden_effect = {
			save_event_target_as = crusade_target
			galactic_emperor = {
				save_event_target_as = gal_emperor
				if = {
					limit = {
						event_target:crusade_target = {
							is_country_type = default
							is_homicidal = no
						}
					}
				declare_war = {
					target = event_target:crusade_target
					name = "NAME_Imperial_Crusade_War"
					attacker_war_goal = "wg_imperial_crusade"
				}
			}
				else = {
					declare_war = {
						target = event_target:crusade_target
						name = "NAME_Imperial_Crusade_War"
						attacker_war_goal = "wg_imperial_crusade_total_war"
					}
				}
			}
			random_war = {
				limit = {
					OR = {
					using_war_goal = {
						type = wg_imperial_crusade
						owner = event_target:gal_emperor
					}
						using_war_goal = {
							type = wg_imperial_crusade_total_war
							owner = event_target:gal_emperor
						}
					}
				}
				save_event_target_as = imperial_crusade_war
			}
			every_playable_country = {
				limit = { 
					is_galactic_emperor = no
					is_galactic_community_member = yes
					NOR = {
						is_in_federation_with = event_target:crusade_target
						AND = {
							exists = overlord
							overlord = { is_same_value = event_target:crusade_target }
						}
					}
				}
				if = {
					limit = {
						any_war = { 
							any_war_participant = {
								is_same_value = event_target:crusade_target
							}
						}
					}
					every_war = {
						limit = {
							any_war_participant = {
								is_same_value = event_target:crusade_target
							}
						}
						remove_war_participant = event_target:crusade_target
					}
				}
				join_war_on_side = {
					war = event_target:imperial_crusade_war
					side = event_target:gal_emperor
				}
			}
			event_target:crusade_target = {
				country_event = { id = emperor.350 }
			}
			every_playable_country = {
				limit = {
					is_ai = no
					has_communications = event_target:gal_emperor
					has_communications = event_target:crusade_target
					NOT = { is_same_value = event_target:crusade_target }
				}
				country_event = { id = emperor.351 }
			}
		}
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 0.2
			is_pacifist = yes
			desc = ethic_pacifist 
		}
		modifier = {
			factor = 0.6
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		modifier = {
			factor = 1.4
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 1.4
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 2
			is_rival = from
			desc = gal_com_proposer_is_rival
		}
	}
}

# United Front (Imperial version)
resolution_emperor_united_front = {
	icon = "GFX_resolution_united_front"

	resources = {
		category = military_resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		description = resolution_custodian_united_front_modifier_desc
		damage_vs_country_type_swarm_mult = 0.2
    	damage_vs_country_type_extradimensional_mult = 0.2
    	damage_vs_country_type_extradimensional_2_mult = 0.2
    	damage_vs_country_type_extradimensional_3_mult = 0.2
    	damage_vs_country_type_ai_empire_mult = 0.2
    	damage_vs_country_type_gray_goo_mult = 0.2
		damage_vs_player_crisis_mult = 0.2
    	country_energy_produces_mult = -0.03
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_united_front" }
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		any_country = { is_crisis_faction = yes }
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 1.6
				is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 0
			has_ascension_perk = ap_become_the_crisis
			desc = gal_com_we_have_crisis_perk
		}
		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 20
				is_militarist = yes
			is_galactic_emperor = yes
			desc = militarist_galactic_emperor
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Imperial Armada
resolution_emperor_imperial_armada = {
	icon = "GFX_resolution_imperial_armada"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_emperor_ia = 1
	}
	triggered_modifier = {
		potential = {
			galactic_emperor = {
				has_federation = yes
				federation = { has_federation_law = imperial_ministry_of_defence_joint_headquarter }
			}
		}
		modifier = {
			country_community_gdf_naval_capacity = 100
		}
	}
	triggered_modifier = { #帝国治理点数需求
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage_naval = 200 }
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_imperial_armada" }
		}
	}

	effect = {
		if = {
			limit = { galactic_defense_force_exists = no } #e.g. Custodian becomes Emperor
			set_galactic_defense_force = yes
		}
		hidden_effect = {
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = emperor.50 }
			}
		}
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		NOT = {
			any_country = { has_country_flag = gdf_turned_into_armada }
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 0.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 1.2
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 50
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 10
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 10
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}
		modifier = {
			factor = 0
			is_subject = yes
			overlord = {
				OR = {
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
			desc = gal_com_subject_of_fallen_empire
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Expand Imperial Armada
resolution_emperor_expand_ia = {
	icon = "GFX_resolution_expand_armada"

	resources = {
		category = military_resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	allow = {
		imperial_authority >= 100
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_expand_ia" }
		}
	}

	modifier = {
		resolution_emperor_ia_2 = 1
	}
	triggered_modifier = {
		potential = {
			NOT = {
				galactic_emperor = {
					has_federation = yes
					federation = { has_federation_law = imperial_ministry_of_defence_joint_headquarter }
	}
			}
		}
		modifier = {
			country_community_gdf_naval_capacity = 400
		}
	}
	triggered_modifier = {
		potential = {
			galactic_emperor = {
				has_federation = yes
				federation = { has_federation_law = imperial_ministry_of_defence_joint_headquarter }
			}
		}
		modifier = {
			country_community_gdf_naval_capacity = 500
	}
	}
	triggered_modifier = { #帝国治理点数需求
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage = 100 }
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		is_active_resolution = "resolution_emperor_imperial_armada"
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 0.6
			is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 0.6
			is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 1.2
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 2
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 8
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 20
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 5
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 5
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Imperial Legions
resolution_emperor_imperial_legions = {
	icon = "GFX_resolution_imperial_legions"

	resources = {
		category = military_resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_imperial_legions" }
		}
	}

	modifier = {
	}
	triggered_modifier = { #帝国治理点数需求
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage_naval = 125 }
	}

	effect = {
		custom_tooltip = resolution_emperor_imperial_legions_tooltip_basic
				if = {
			limit = { galactic_emperor = { NOT = { has_ethic = ethic_gestalt_consciousness } } }
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_emperor_is_regular
				}
		else_if = {
			limit = { galactic_emperor = { is_machine_empire = yes } }
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_emperor_is_machine
			}
		else = {
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_emperor_is_hive
		}
		if = {
			limit = {
				is_active_resolution = resolution_emperor_imperial_legions
				is_galactic_emperor = yes
			}
			custom_tooltip = resolution_emperor_imperial_legions_tooltip_count
		}
		hidden_effect = {
			galactic_emperor = {
				#招募界面的显示
				set_variable = { which = imperial_legion_soldier_count value = 0 }
				set_variable = { which = imperial_legion_soldier_count_mega_warform value = 0 }
				set_variable = { which = imperial_legion_soldier_count_warrior_drones value = 0 }
				every_owned_army = {
					limit = {
						is_defensive_army = no
						OR = {
							army_type = imperial_legion
							army_type = imperial_mega_warform
							army_type = imperial_warrior_drones
						}
					}
					switch = {
						trigger = army_type
						imperial_legion = { prev = { change_variable = { which = imperial_legion_soldier_count value = 1 } } }
						imperial_mega_warform = { prev = { change_variable = { which = imperial_legion_soldier_count_mega_warform value = 1 } } }
						imperial_warrior_drones = { prev = { change_variable = { which = imperial_legion_soldier_count_warrior_drones value = 1 } } }
					}
				}
				set_variable = { which = var_imperial_legion_cap value = value:imperial_legion_cap }
				set_variable = { which = var_imperial_mega_warform_cap value = value:imperial_mega_warform_cap }
				set_variable = { which = var_imperial_warrior_drones_cap value = value:imperial_warrior_drones_cap }

				if = { #给ai皇帝招募20支帝国军团，机械优先，普通和蜂群随机
					limit = {
						is_ai = yes
					}
					while = {
						count = 20
				if = {
							limit = {
								check_variable = {
									which = "imperial_legion_soldier_count_mega_warform"
									value < value:imperial_mega_warform_cap
								}
							}
							capital_scope = {
								create_army = {
									owner = galactic_emperor
									type = "imperial_mega_warform"
								}
							}
							change_variable = {
								which = "imperial_legion_soldier_count_mega_warform"
								value = 1
							}
						}
						else_if = {
							limit = {
								OR = {
									check_variable = {
										which = "imperial_legion_soldier_count"
										value < value:imperial_legion_cap
									}
									check_variable = {
										which = "imperial_legion_soldier_count_warrior_drones"
										value < value:imperial_warrior_drones_cap
									}
								}
							}
							random_list = {
								10 = {
									modifier = {
										factor = 0
										NOT = {
											check_variable = {
												which = "imperial_legion_soldier_count"
												value < value:imperial_legion_cap
											}
										}
									}
									capital_scope = {
										create_army = {
											owner = galactic_emperor
											type = "imperial_legion"
										}
									}
									change_variable = {
										which = "imperial_legion_soldier_count"
										value = 1
									}
								}
								10 = {
									modifier = {
										factor = 0
										NOT = {
											check_variable = {
												which = "imperial_legion_soldier_count_warrior_drones"
												value < value:imperial_warrior_drones_cap
											}
										}
									}
									capital_scope = {
										create_army = {
											owner = galactic_emperor
											type = "imperial_warrior_drones"
										}
									}
									change_variable = {
										which = "imperial_legion_soldier_count_warrior_drones"
										value = 1
									}
								}
							}
						}
				}
			}
		}
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = emperor.55 }
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0.4
				is_pacifist = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_pacifist
		}
		modifier = {
			factor = 0.6
				is_xenophobe = yes
			NOT = {
				any_neighbor_country = { is_crisis_faction = yes }
			}
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 1.2
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 12
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}
		modifier = {
			factor = 6
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}
		modifier = {
			factor = 8
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}
		modifier = {
			factor = 20
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 20
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 14
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 8
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 14
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 2
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 2
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}
		modifier = {
			factor = 10
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 20
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
	}
}

# Imperial Navigation Agency
resolution_emperor_ina = {
	icon = "GFX_resolution_form_ina"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_emperor_ina = 1
	}
	triggered_modifier = { #帝国治理点数需求
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage = 75 }
	}

	effect = {
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown }
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_ina" }
		}
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 0.8
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 1.2
			has_ai_personality = peaceful_traders
			desc = personality_peaceful_traders
		}
		modifier = {
			factor = 1.2
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 2
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 2
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}
	}
}

# Disband the Interstellar Navigation Agency
resolution_emperor_disband_ina = {
	icon = "GFX_resolution_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		cancel_resolution = "resolution_emperor_ina"
		hidden_effect = { cancel_resolution = "resolution_custodian_ina" }
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown }
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		is_active_resolution = "resolution_emperor_ina"
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 1.2
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 2
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 0.8
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 0.4
			has_ai_personality = erudite_explorers
			desc = personality_erudite_explorers
		}
		modifier = {
			factor = 0
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 0.4
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
	}
}

# Galactic Trade Organization
resolution_emperor_gto = {
	icon = "GFX_resolution_form_gto"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
		resolution_emperor_gto = 1
	}
	triggered_modifier = {
		potential = { is_active_resolution = resolution_emperor_imperial_bank }
		modifier = {
			resolution_emperor_gto_enhanced = 1
		}
	}
	triggered_modifier = { #帝国治理点数需求
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage = 75 }
	}

	effect = {
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown }
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = resolution_emperor_gto }
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = {
			factor = 1.5
			has_authority = auth_corporate
			desc = auth_corporate 
		}
		modifier = {
			factor = 1.5
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
			}
			desc = gal_com_trader_ai_personality
		}
		modifier = {
			factor = 0.7
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 0.5
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 0.2
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
		}
		modifier = {
			factor = 4
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 2
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 2
			is_subject = yes
			overlord = { is_galactic_emperor = yes }
			desc = gal_com_emperors_subject
		}
	}
}

# Disband the Galactic Trade Organization
resolution_emperor_disband_gto = {
	icon = "GFX_resolution_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes

	effect = {
		cancel_resolution = "resolution_emperor_gto"
		hidden_effect = { cancel_resolution = "resolution_custodian_gto" }
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_institutions_reset_cooldown }
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		is_active_resolution = "resolution_emperor_gto"
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 0.6
			has_authority = auth_corporate
			desc = auth_corporate 
		}
		modifier = {
			factor = 0.6
			OR = {
				has_ai_personality = peaceful_traders
				has_ai_personality = ruthless_capitalists
			}
			desc = gal_com_trader_ai_personality
		}
		modifier = {
			factor = 1.3
			is_xenophobe = yes
			desc = ethic_xenophobe
		}
		modifier = {
			factor = 1.8
			has_ai_personality = xenophobic_isolationists
			desc = personality_xenophobic_isolationists
		}
		modifier = {
			factor = 2
			is_gestalt = yes
			desc = ethic_gestalt_consciousness
		}
		modifier = {
			factor = 0
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		modifier = {
			factor = 0.4
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
	}
}

# Imperial Security Directorate
resolution_emperor_isd = {
	icon = "GFX_resolution_imperial_security_directorate"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t4
		}
	}
	target = no

	modifier = {
		resolution_emperor_isd = 1
		}
	triggered_modifier = {
		potential = {
			is_galactic_emperor = yes
			has_federation = yes
			federation = { has_federation_perk = imperium_federation_passive }
	}
	modifier = {
			spy_network_levels_add = 200
		}
	}
	triggered_modifier = {
		potential = {
			has_global_flag = flag_crack_down_on_criminal_syndicate
			is_megacorp = no
			NOT = { has_ethic = ethic_gestalt_consciousness }
			any_country = {
				is_criminal_syndicate = yes
				is_galactic_community_member = yes
			}
		}
		modifier = { resolution_custodian_crack_down_on_criminal_syndicate_anti_inner = 1 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = flag_crack_down_on_criminal_syndicate
			any_owned_planet = {
				has_branch_office = yes
				branch_office_owner = {
					is_criminal_syndicate = yes
					is_galactic_community_member = no
				}
			}
		}
		modifier = { resolution_custodian_crack_down_on_criminal_syndicate_anti_outer = 1 }
	}
	triggered_modifier = {
		potential = {
			has_global_flag = flag_crack_down_on_criminal_syndicate
			is_criminal_syndicate = yes
		}
		modifier = { resolution_custodian_crack_down_on_criminal_syndicate_criminal = 1 }
	}
	triggered_modifier = { #帝国治理点数需求
		potential = { is_galactic_emperor = yes }
		modifier = { imperial_governance_usage = 250 }
	}

	effect = {
		custom_tooltip = "non_repealable_department"
		random_playable_country =  {
			limit = { is_galactic_emperor = yes }
			add_modifier = { modifier = "imperial_security_directorate" }
		}
		hidden_effect = {
			every_playable_country = {
				limit = { is_galactic_community_member = yes }
				country_event = { id = emperor.70 }
			}
			galactic_emperor = {
				country_event = {
					id = MECR.1992
					days = 1
				}
			}
		}
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_isd" }
		}
		custom_tooltip = {
			fail_text = "can_support_less_upgraded_institutions_resolution"
			OR = {
				is_active_resolution = resolution_emperor_isd
				NOT = { any_federation = { has_federation_perk = imperium_federation_passive } }
				federation = {
					check_variable = {
						which = imperial_institutions_upgrades_support
						value > value:imperial_institutions_upgrades_used
					}
				}
			}
		}
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		NOT = {
			any_country = { has_country_flag = galpol_turned_into_isd }
		}
	}

	breach = {
		custom_tooltip = {
			AND = {
				has_global_flag = flag_crack_down_on_criminal_syndicate
				has_valid_civic = civic_criminal_heritage
			}
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 2
			any_owned_planet = {
				planet_crime > 40
			}
			desc = gal_com_owns_high_crime_planet
		}
		modifier = {
			factor = 2
			any_owned_planet = {
				has_branch_office = yes
				exists = branch_office_owner
				branch_office_owner = { is_criminal_syndicate = yes }
			}
			desc = gal_com_owns_planet_with_criminal_syndicate_branch_office
		}
		modifier = {
			factor = 0
			is_criminal_syndicate = yes
			desc = gov_criminal_syndicate
		}
		modifier = {
			factor = 0.6
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		modifier = {
			factor = 1.4
			is_part_of_galactic_council = yes
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 20
			is_galactic_emperor = yes
			desc = galactic_emperor
		}
		
		modifier = {
			factor = 0.5
			is_spy_empire = yes
			desc = gal_com_spy_civic
		}
		
		modifier = {
			factor = 5
			is_civic_police_state = yes
			desc = gal_com_police_civic
		}
		
		modifier = {
			factor = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 0.75
			has_monthly_income = { resource = energy  value < 20 }
			desc = gal_com_energy_income
		}
		modifier = {
			factor = 0.5
			has_deficit = energy
			desc = gal_com_energy_income
		}
	}
}

# Imperial Charter
resolution_emperor_imperial_charter = {
	icon = "GFX_resolution_imperial_trade_company"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}

	target = yes
	harmful = no

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_imperial_charter" }
		}
	}

	valid_target = {
		is_country_type = default
		is_galactic_community_member = yes
		is_megacorp = yes
		is_criminal_syndicate = no
		is_galactic_emperor = no
	}

	effect = {
		custom_tooltip = resolution_emperor_imperial_charter_tooltip
		custom_tooltip = resolution_emperor_imperial_charter_tooltip_weaken_effect
		hidden_effect = {
			set_global_flag = imperial_charter_granted
			add_modifier = { modifier = imperial_charter }
			random_playable_country = {
				limit = { is_galactic_emperor = yes }
				set_variable = {
					which = imp_concession_ports
					value = 0
				}
			}
			every_playable_country = {
				limit = {
					is_ai = no
					NOT = { is_same_value = prev }
					is_galactic_community_member = yes
					is_galactic_emperor = no
				}
				country_event = { id = emperor.60 }
			}
		}
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_members_reset_cooldown }
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		NOR = {
			any_country = {
				is_galactic_emperor = yes
				has_civic = civic_galactic_sovereign_megacorp # Megacorp Emperors build their own concession ports
			}
			has_global_flag = imperial_charter_granted
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 3
			is_galactic_emperor = no
			is_part_of_galactic_council = yes
			is_megacorp = no
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 20
			is_same_value = from
			desc = gal_com_target_is_me
		}
	}
}

# Revoke Imperial Charter
resolution_emperor_revoke_imperial_charter = {
	icon = "GFX_resolution_imperial_trade_company"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	
	target = yes
	harmful = yes
	fire_and_forget = yes

	valid_target = {
		is_country_type = default
		is_galactic_community_member = yes
		is_megacorp = yes
		is_galactic_emperor = no
		has_modifier = imperial_charter
	}

	effect = {
		hidden_effect = {
			remove_global_flag = imperial_charter_granted
			remove_modifier = imperial_charter
			every_galaxy_planet = {
				limit = { has_planet_flag = imp_concession_port }
				remove_holding = { holding = building_imperial_concession_port owner = planet.branch_office_owner }
				remove_planet_flag = imp_concession_port
			}
			random_playable_country = {
				limit = { is_galactic_emperor = yes }
				set_variable = {
					which = "imp_concession_ports"
					value = 0
				}
				add_imp_concession_ports_0 = yes
			}
		}
		hidden_effect = { pass_resolution_no_cooldown = resolution_category_imperial_members_reset_cooldown }
	}

	potential = {
		has_nemesis = yes
		OR = {
		is_galactic_emperor = yes
			and = {
				has_galactic_emperor = yes
				is_part_of_galactic_council = yes
				is_active_resolution = "resolution_emperor_expand_power_of_council"
			}
			is_country_type = imperial_senator
		}
		has_global_flag = imperial_charter_granted
	}

	ai_weight = {
		weight = @resolution_weight_disliked

		modifier = {
			factor = 3
			is_megacorp = yes
			NOT = { is_same_value = ROOT }
			desc = gal_com_targets_competitor
		}
		modifier = {
			factor = 0
			is_same_value = ROOT
			desc = gal_com_target_is_me
		}
		modifier = {
			factor = 20
			is_galactic_emperor = yes
			OR = {
				is_hostile_to = FROM
				is_domineering_to = FROM
				is_unfriendly_to = FROM
			}
			desc = gal_com_emperor_unfriendly_to_proposer
		}
	}
}

### IMPERIAL COUNCIL

# Abolish Imperial Council
resolution_emperor_abolish_council = {
	icon = "GFX_resolution_abolish_imperial_council"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_abolish_council_tooltip
		hidden_effect = {
			set_council_size = 0
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		NOT = { has_global_flag = imperial_unification_start }
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_hated

		modifier = {
			factor = 0
			is_part_of_galactic_council = yes
			is_galactic_emperor = no
			desc = gal_com_on_galatic_council
		}
		modifier = {
			factor = 0.5
			is_subject = yes
			overlord = {
				opinion_level = { who = prev level >= neutral }
				is_part_of_galactic_council = yes
				is_galactic_emperor = no
			}
			desc = gal_com_support_overlord_on_galatic_council
		}
	}
}

# Restore Imperial Council
resolution_emperor_restore_council = {
	icon = "GFX_resolution_imperial_council"

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = no
	}

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t1
		}
	}
	target = no

	modifier = {
	}

	allow = {
	}

	active = {
		has_galactic_emperor = yes
	}

	effect = {
		custom_tooltip = resolution_emperor_restore_council_tooltip
		hidden_effect = {
			set_council_size = 3
			set_council_veto = no
			set_global_flag = galactic_community_resolution_passed

			set_global_flag = resolution_with_breach_effect_passed # council denouncement

			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	ai_weight = {
		base = @resolution_weight_loved

		modifier = {
			factor = 3
			OR = {
				is_civic_diplomatic_corps = yes
				is_civic_machine_servitor = yes
			}
			desc = gal_com_supporting_civics
		}

		modifier = {
			factor = 1.5
			OR = {
				galactic_community_rank <= 3
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank <= 3
					}
				}
			}
			desc = gal_com_they_or_overlord_high_ranked
		}

		modifier = {
			factor = 0.8
			galactic_community_rank > 5
			NAND = {
				is_subject = yes
				overlord = {
					opinion_level = { who = prev level >= neutral }
					galactic_community_rank <= 3
				}
			}
			desc = gal_com_neither_they_or_overlord_high_ranked
		}

		modifier = {
			factor = 1.2
			is_xenophile = yes
			desc = ethic_xenophile
		}
		modifier = {
			factor = 1.2
			has_ethic = ethic_fanatic_xenophile
			desc = ethic_xenophile
		}
		
		modifier = {
			factor = 3
			is_egalitarian = yes
			desc = ethic_egalitarian # closest thing to democracy the imperium has
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		modifier = {
			factor = 3
			is_democratic_crusaders = yes
			desc = personality_democratic_crusaders
		}
		modifier = {
			factor = 0.75
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		modifier = {
			factor = 0.75
			is_civic_authoritarian = yes
			desc = ethic_authoritarian
		}
	}
}

resolution_emperor_council_size_1 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 1
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		num_council_positions = 2
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_hated
		
		modifier = {
			factor = 3
			OR = {
				galactic_community_rank = 1
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 1
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 0
			galactic_community_rank = 2
			desc = gal_com_second_rank
		}

		modifier = {
			factor = 0
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		
		modifier = {
			factor = 0
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}

		modifier = {
			factor = 1.5
			is_authoritarian  = yes
			desc = ethic_authoritarian
		}
		
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
	}
}

resolution_emperor_council_size_2 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 2
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		OR = {
			num_council_positions = 1
			num_council_positions = 3
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = { # raising the number of slots is more popular than lowering it
			factor = 1.25
			num_council_positions = 1
			desc = gal_com_increase_council_size_positive
		}
		
		modifier = {
			factor = 0

			AND = {
				num_council_positions = 3
				OR = {
					galactic_community_rank = 3
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank = 3
						}
					}
				}
			}
			desc = gal_com_they_or_overlord_would_be_removed_from_council
		}

		modifier = {
			factor = 0
			num_council_positions = 1
			OR = {
				galactic_community_rank = 1
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 1
					}
				}
			}
			desc = gal_com_alone_on_council_or_overlord
		}


		modifier = {
			factor = 3
			
				AND = {
					num_council_positions = 1
					OR = {
						galactic_community_rank = 2
						AND = {
							is_subject = yes
							overlord = {
								opinion_level = { who = prev level >= neutral }
								galactic_community_rank = 2
							}
						}
					}
				}
			
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}

		modifier = {
			factor = 3
			AND = {
				num_council_positions = 3
				OR = {
					galactic_community_rank <= 2
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank <= 2
						}
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}
		
		modifier = {
			factor = 10
			num_council_positions = 3
			galactic_community_rank <= 2
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = {
			factor = 10
			num_council_positions = 1
			galactic_community_rank = 2
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 0.5
			OR = {
				AND = {
					num_council_positions = 3
					is_egalitarian = yes
				}
				AND = {
					num_council_positions = 1
					is_authoritarian = yes
				}
			}
			desc = gal_com_opposing_ethics
		}
		
		modifier = {
			factor = 0
			num_council_positions = 3
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		
		modifier = {
			factor = 0.5
			num_council_positions = 1
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
		
		modifier = {
			factor = 1.5
			OR = {
				AND = {
					num_council_positions = 3
					has_ethic = ethic_fanatic_authoritarian
				}
				AND = {
					num_council_positions = 1
					has_ethic = ethic_fanatic_egalitarian
				}
			}
			desc = gal_com_supporting_ethics
		}

		modifier = {
			factor = 1.5
			OR = {
				AND = {
					num_council_positions = 3
					is_authoritarian = yes
				}
				AND = {
					num_council_positions = 1
					is_egalitarian = yes
				}
			}
			desc = gal_com_supporting_ethics
		}
		
		modifier = {
			factor = 0.5
			num_council_positions = 3
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		
		modifier = {
			factor = 1.5
			num_council_positions = 1
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

resolution_emperor_council_size_3 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 3
		set_global_flag = galactic_council_formed

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		OR = {
			num_council_positions = 2
			num_council_positions = 4
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = { # raising the number of slots is more popular than lowering it
			factor = 1.25
			num_council_positions = 2
			desc = gal_com_increase_council_size_positive
		}

		modifier = {
			factor = 0

			AND = {
				num_council_positions = 4
				OR = {
					galactic_community_rank = 4
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank = 4
						}
					}
				}
			}
			desc = gal_com_they_or_overlord_would_be_removed_from_council
		}

		modifier = {
			factor = 0
			is_egalitarian = no
			AND = {
				num_council_positions = 2
				OR = {
					galactic_community_rank <= 2
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank <= 2
						}
					}
				}
			}
			desc = gal_com_dont_let_others_in_on_the_council
		}

		modifier = {
			factor = 3

			AND = {
				num_council_positions = 4
				OR = {
					galactic_community_rank <= 3
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank <= 3
						}
					}
				}
			}
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 3
			AND = {
				num_council_positions = 2
				OR = {
					galactic_community_rank = 3
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank = 3
						}
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = {
			factor = 10
			num_council_positions = 4
			galactic_community_rank <= 3
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = {
			factor = 10
			num_council_positions = 2
			galactic_community_rank = 3
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 0.75
			OR = {
				AND = {
					num_council_positions = 4
					is_egalitarian = yes
				}
				AND = {
					num_council_positions = 2
					is_authoritarian = yes
				}
			}
			desc = gal_com_opposing_ethics
		}

		modifier = {
			factor = 1.33
			OR = {
				AND = {
					num_council_positions = 4
					is_authoritarian = yes
				}
				AND = {
					num_council_positions = 2
					is_egalitarian = yes
				}
			}
			desc = gal_com_supporting_ethics
		}
		
		modifier = {
			factor = 0.75
			OR = {
				AND = {
					num_council_positions = 2
					has_ethic = ethic_fanatic_authoritarian
				}
				AND = {
					num_council_positions = 4
					has_ethic = ethic_fanatic_egalitarian
				}
			}
			desc = gal_com_opposing_ethics
		}
		
		modifier = {
			factor = 1.33
			OR = {
				AND = {
					num_council_positions = 4
					has_ethic = ethic_fanatic_authoritarian
				}
				AND = {
					num_council_positions = 2
					has_ethic = ethic_fanatic_egalitarian
				}
			}
			desc = gal_com_supporting_ethics
		}
		
		modifier = {
			factor = 0.5
			num_council_positions = 4
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		
		modifier = {
			factor = 1.5
			num_council_positions = 2
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

resolution_emperor_council_size_4 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 4
		set_global_flag = galactic_council_formed

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		OR = {
			num_council_positions = 3
			num_council_positions = 5
		}
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_normal

		modifier = { # raising the number of slots is more popular than lowering it
			factor = 1.25
			num_council_positions = 3
			desc = gal_com_increase_council_size_positive
		}

		modifier = {
			factor = 0

			AND = {
				num_council_positions = 5
				OR = {
					galactic_community_rank = 5
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank = 5
						}
					}
				}
			}
			desc = gal_com_they_or_overlord_would_be_removed_from_council
		}


		modifier = {
			factor = 0
			is_egalitarian = no
			AND = {
				num_council_positions = 3
				OR = {
					galactic_community_rank <= 3
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank <= 3
						}
					}
				}
			}
			desc = gal_com_dont_let_others_in_on_the_council
		}


		modifier = {
			factor = 3

			AND = {
				num_council_positions = 5
				OR = {
					galactic_community_rank <= 4
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank <= 4
						}
					}
				}
			}	
			desc = gal_com_wants_to_reduce_council_size
		}


		modifier = {
			factor = 3
			AND = {
				num_council_positions = 3
				OR = {
					galactic_community_rank = 4
					AND = {
						is_subject = yes
						overlord = {
							opinion_level = { who = prev level >= neutral }
							galactic_community_rank = 4
						}
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = {
			factor = 10
			num_council_positions = 5
			galactic_community_rank <= 4
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = {
			factor = 10
			num_council_positions = 3
			galactic_community_rank = 4
			desc = gal_com_wants_to_reduce_council_size
		}

		modifier = {
			factor = 0.5
			OR = {
				AND = {
					num_council_positions = 5
					is_egalitarian = yes
				}
				AND = {
					num_council_positions = 3
					is_authoritarian = yes
				}
			}
			desc = gal_com_opposing_ethics
		}

		modifier = {
			factor = 1.5
			OR = {
				AND = {
					num_council_positions = 5
					is_authoritarian = yes
				}
				AND = {
					num_council_positions = 3
					is_egalitarian = yes
				}
			}
			desc = gal_com_supporting_ethics
		}
		
		modifier = {
			factor = 0.5
			num_council_positions = 5
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		
		modifier = {
			factor = 0
			num_council_positions = 3
			has_ethic = ethic_fanatic_authoritarian
			desc = ethic_authoritarian
		}
		
		modifier = {
			factor = 1.5
			OR = {
				AND = {
					num_council_positions = 5
					has_ethic = ethic_fanatic_authoritarian
				}
				AND = {
					num_council_positions = 3
					has_ethic = ethic_fanatic_egalitarian
				}
			}
			desc = gal_com_supporting_ethics
		}
		
		modifier = {
			factor = 0.5
			num_council_positions = 5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		
		modifier = {
			factor = 1.5
			num_council_positions = 3
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

resolution_emperor_council_size_5 = {
	icon = "GFX_resolution_imperial_council_size"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		set_council_size = 5
		set_global_flag = galactic_council_formed

		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_passed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_passed_diplomatic_weight
				days = 2200
			}
		}
	}

	fail_effects = {
		hidden_effect = {
			set_timed_country_flag = { flag = galactic_community_resolution_failed_general days = @resolution_flag_timer }
			add_modifier = {
				modifier = resolution_failed_diplomatic_weight
				days = 2200
			}
		}
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		num_council_positions = 4
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_popular

		modifier = {
			factor = 3
			num_council_positions = 4
			OR = {
				galactic_community_rank = 5
				AND = {
					is_subject = yes
					overlord = {
						opinion_level = { who = prev level >= neutral }
						galactic_community_rank = 5
					}
				}
			}
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}
		
		modifier = {
			factor = 10
			num_council_positions = 4
			galactic_community_rank = 5
			desc = gal_com_wants_to_add_themselves_or_overlord_to_council
		}

		modifier = {
			factor = 0.8
			is_part_of_galactic_council = yes
			is_egalitarian = no
			desc = gal_com_negative_sentiment
		}

		modifier = {
			factor = 0
			is_authoritarian = yes
			desc = ethic_authoritarian
		}

		modifier = {
			factor = 1.5
			is_egalitarian = yes
			desc = ethic_egalitarian
		}
		
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_egalitarian
			desc = ethic_egalitarian
		}
		
		modifier = {
			factor = 1.5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
	}
}

# Permanent Seat
resolution_emperor_permanent_seat = {
	icon = "GFX_resolution_imperial_council_member_permanent"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = no
	valid_target = {
		is_country_type = default
		is_galactic_community_member = yes
		is_part_of_galactic_council = yes
		is_permanent_councillor = no
		is_galactic_emperor = no
	}

	effect = {
		add_permanent_councillor = yes
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		NOR = { 
			is_active_resolution = "resolution_emperor_trial_of_advancement"
			is_active_resolution = "resolution_emperor_by_appointment"
		}
		NOT = { has_global_flag = imperial_unification_start }
	}

	active = {
		has_galactic_emperor = yes
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_permanent_seat" }
		}
	}

	ai_weight = {
		base = @resolution_weight_disliked
	}
}

# Revoke Permanent Seat
resolution_emperor_revoke_permanent_seat = {
	icon = "GFX_resolution_imperial_council_member_permanent"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t5
		}
	}

	target = yes
	harmful = yes
	valid_target = {
		is_country_type = default
		is_galactic_community_member = yes
		is_part_of_galactic_council = yes
		is_permanent_councillor = yes
		is_galactic_emperor = no
	}

	effect = {
		remove_permanent_councillor = yes
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		is_galactic_council_established = yes
		NOR = { 
			is_active_resolution = "resolution_emperor_trial_of_advancement"
			is_active_resolution = "resolution_emperor_by_appointment"
		}
		NOT = { has_global_flag = imperial_unification_start }
	}

	active = {
		has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_disliked
	}
}

# Trial of Advancement
resolution_emperor_trial_of_advancement = {
	icon = "GFX_resolution_imperial_council_trial"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_trial_of_advancement_tooltip
		hidden_effect = {
			# Suspend Council Elections
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_part_of_galactic_council = yes
					is_galactic_emperor = no
				}
				add_permanent_councillor = yes
			}
			if = {
				limit = { is_active_resolution = "resolution_emperor_by_appointment" }
				cancel_resolution = "resolution_emperor_by_appointment"
			}
			else_if = {
				limit = { is_active_resolution = "resolution_emperor_by_election" }
				cancel_resolution = "resolution_emperor_by_election"
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		NOT = { has_global_flag = imperial_unification_start }
	}

	active = {
		has_galactic_emperor = yes
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_trial_of_advancement" }
		}
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			weight = 10
			is_part_of_galactic_council = no
			any_playable_country = {
				is_part_of_galactic_council = yes
				is_galactic_emperor = no
				relative_power = {
					who = prev
					category = fleet
					value <= equivalent
				}
			}
			desc = gal_com_stronger_than_council_member
		}
		modifier = {
			weight = 0
			is_pacifist = yes
			desc = ethic_pacifist 
		}
		modifier = {
			weight = 1.6
			is_militarist = yes
			desc = ethic_militarist
		}
		modifier = {
			weight = 4
			has_ai_personality = honorbound_warriors
			desc = personality_honorbound_warriors
		}
		modifier = {
			weight = 4
			has_civic = civic_warrior_culture
			desc = civic_warrior_culture
		}
		modifier = {
			weight = 0
			is_part_of_galactic_council = yes
			is_galactic_emperor = no
			any_playable_country = {
				is_part_of_galactic_council = no
				relative_power = {
					who = prev
					category = fleet
					value >= equivalent
				}
			}
			desc = gal_com_weaker_than_non_council_member
		}
	}
}

# By Appointment
resolution_emperor_by_appointment = {
	icon = "GFX_resolution_imperial_council_appointment"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_by_appointment_tooltip
		hidden_effect = {
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_part_of_galactic_council = yes
					is_galactic_emperor = no
				}
				add_permanent_councillor = yes
			}
			set_emperor_can_change_council_members = yes
			if = {
				limit = { is_active_resolution = "resolution_emperor_trial_of_advancement" }
				cancel_resolution = "resolution_emperor_trial_of_advancement"
			}
			else_if = {
				limit = { is_active_resolution = "resolution_emperor_by_election" }
				cancel_resolution = "resolution_emperor_by_election"
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
	}

	active = {
		has_galactic_emperor = yes
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_by_appointment" }
		}
	}

	ai_weight = {
		base = @resolution_weight_hated
	}
}

# By Election
resolution_emperor_by_election = {
	icon = "GFX_resolution_imperial_council_diplomatic_weight"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_by_election_tooltip
		hidden_effect = {
			# Restore Council Elections
			every_playable_country = {
				limit = {
					is_galactic_community_member = yes
					is_part_of_galactic_council = yes
					is_galactic_emperor = no
					is_permanent_councillor = yes
				}
				remove_permanent_councillor = yes
			}
			if = {
				limit = { is_active_resolution = "resolution_emperor_trial_of_advancement" }
				cancel_resolution = "resolution_emperor_trial_of_advancement"
			}
			else_if = {
				limit = { is_active_resolution = "resolution_emperor_by_appointment" }
				cancel_resolution = "resolution_emperor_by_appointment"
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		is_galactic_emperor = yes
		NOT = { has_global_flag = imperial_unification_start }
	}

	active = {
		has_galactic_emperor = yes
	}

	allow = {
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_by_election" }
		}
	}

	ai_weight = {
		base = @resolution_weight_disliked

		modifier = {
			factor = 10
			num_council_positions = 1
			galactic_community_rank = 1
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}
		modifier = {
			factor = 10
			num_council_positions = 2
			galactic_community_rank = 2
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}
		modifier = {
			factor = 10
			num_council_positions = 3
			galactic_community_rank = 3
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}
		modifier = {
			factor = 10
			num_council_positions = 4
			galactic_community_rank = 4
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}
		modifier = {
			factor = 10
			num_council_positions = 5
			galactic_community_rank = 5
			is_part_of_galactic_council = no
			desc = gal_com_empire_council_candidate
		}
		modifier = {
			factor = 0
			galactic_community_rank <= 2
			is_part_of_galactic_council = no
			desc = gal_com_top_two_rank
		}
	}
}

# Pax Galactica
resolution_emperor_pax_galactica = {
	icon = "GFX_resolution_pax_galactica"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_pax_galactica_tooltip
		hidden_effect = {
			set_timed_country_flag = { flag = galcom_resolution_passed_anti_supremacist days = 7200 }
			every_war = {
				limit = {
					NOR = {
						using_war_goal = {
							type = wg_seize_council_seat
							owner = attacker
						}
						using_war_goal = {
							type = wg_seize_council_seat
							owner = defender
						}
						using_war_goal = {
							type = wg_declared_crisis
							owner = attacker
						}
					}
					any_attacker = { is_galactic_community_member = yes }
					any_defender = { is_galactic_community_member = yes }
				}
				every_war_participant = {
					limit = { is_galactic_community_member = yes }
					prev = { remove_war_participant = prev }
					country_event = { id = emperor.360 }
				}
			}
		}
	}

	fail_effects = {
	}

	potential = {
		has_nemesis = yes
		OR = {
			is_galactic_emperor = yes
			is_galactic_president = yes
		}
	}

	allow = {
		if = {
			limit = { has_galactic_emperor = yes }
			imperial_authority >= 180
		}
		else_if = {
			limit = { has_galactic_republic = yes }
			is_active_resolution = resolution_custodian_expand_gdf
			is_active_resolution = resolution_custodian_expand_galpol
			is_active_resolution = resolution_custodian_ina
		}
		custom_tooltip = {
			fail_text = "resolution_already_active"
			NOT = { is_active_resolution = "resolution_emperor_pax_galactica" }
		}
	}

	active = {
		OR = {
			has_galactic_emperor = yes
			has_galactic_republic = yes
		}
	}

	ai_weight = {
		base = @resolution_weight_unpopular
		modifier = {
			factor = 5
			is_pacifist = yes
			desc = ethic_pacifist 
		}
		modifier = {
			factor = 0.2
			OR = { is_militarist = yes is_civic_militarist = yes }
			desc = ethic_militarist
		}
		modifier = {
			factor = 4
			any_country = { is_crisis_faction = yes }
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 4
			any_neighbor_country = { is_crisis_faction = yes }
			desc = gal_com_neighboring_crisis_empire
		}
		modifier = {
			factor = 4
			has_crisis_stage_1 = yes
			desc = gal_com_crisis_stage_1
		}

		modifier = {
			factor = 4
			has_crisis_stage_2 = yes
			desc = gal_com_crisis_stage_2
		}

		modifier = {
			factor = 4
			has_crisis_stage_3 = yes
			desc = gal_com_crisis_stage_3
		}

		modifier = {
			factor = 4
			has_crisis_stage_4 = yes
			desc = gal_com_crisis_stage_4
		}
		modifier = {
			factor = 4
			any_playable_country = { has_country_flag = crisis_sphere_revealed }
			desc = gal_com_crisis_sphere_revealed
		}
		modifier = {
			factor = 2
			any_playable_country = { has_been_declared_crisis = yes }
			desc = gal_com_someone_declared_crisis
		}
		modifier = {
			factor = 4
			has_global_flag = gray_goo_crisis_active
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 4
			has_global_flag = marauder_crisis_ongoing
			desc = gal_com_someone_is_revealed_crisis
		}
		modifier = {
			factor = 2
			any_country = { is_country_type = awakened_fallen_empire }
			desc = gal_com_exists_awakened_fallen_empire
		}
		modifier = {
			factor = 4
			has_global_flag = war_in_heaven_ongoing
			desc = gal_com_ongoing_war_in_heaven
		}
		modifier = {
			factor = 5
			is_civic_diplomatic_corps = yes
			desc = gal_com_diplo_civic
		}
		modifier = {
			factor = 0
			has_ai_personality = honorbound_warriors
			desc = personality_honorbound_warriors
		}
		modifier = {
			factor = 1.5
			has_ai_personality = erudite_explorers
			desc = personality_erudite_explorers
		}
		modifier = {
			factor = 0.5
			is_civic_cutthroat_politics = yes
			desc = gal_com_cutthroat_civic
		}
		modifier = {
			factor = 1.25
			is_civic_efficient_bureaucracy = yes
			desc = gal_com_efficient_civic
		}
		modifier = {
			factor = 1.25
			is_civic_free_traders = yes
			desc = gal_com_trade_civic
		}
		modifier = {
			factor = 1.25
			has_ai_personality = peaceful_traders
			desc = gal_com_trader_ai_personality
		}
	}
}

# Repeal Pax Galactica
resolution_emperor_repeal_pax_galactica = { # 整合星海帝国时不能取消帝国治下的和平
	icon = "GFX_resolution_repeal_pax_galactica"

	resources = {
		category = resolutions
		cost = {
			influence = @resolution_cost_t3
		}
	}
	target = no
	fire_and_forget = yes

	modifier = {
	}

	effect = {
		custom_tooltip = resolution_emperor_repeal_pax_galactica_tooltip
		hidden_effect = {
			cancel_resolution = "resolution_emperor_pax_galactica"
		}
	}

	potential = {
		has_nemesis = yes
			is_galactic_emperor = yes
		is_active_resolution = "resolution_emperor_pax_galactica"
		NOT = { any_federation = { has_federation_perk = imperium_federation_passive } }
	}

	active = {
			has_galactic_emperor = yes
	}

	ai_weight = {
		base = @resolution_weight_unpopular

		modifier = {
			factor = 0
			is_pacifist = yes
			desc = ethic_pacifist 
		}
		modifier = {
			factor = 4
			is_militarist = yes
			desc = ethic_militarist
		}
	}
}