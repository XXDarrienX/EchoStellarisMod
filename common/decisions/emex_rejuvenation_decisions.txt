# Transform into Bio-Mechanical World
decision_emex_biomech_transformation = {
	owned_planets_only = yes
	icon = decision_cybernetics

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			alloys = 2000
			food = 1000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_emex_bio_mechanical
			is_planet_class = pc_emex_processing_core
		}
		exists = owner
		owner = {
			has_origin = origin_born_of_knowledge
			has_technology = tech_emex_biomech_world
			check_variable = {
				which = bok_biomech_world_cap
				value > bok_biomech_world_amount
			}
		}
	}
	allow = {
		num_pops >= 15
		num_uncleared_blockers = 0
	}
	
	effect = {
		#custom_tooltip = decision_emex_biomech_transformation_effects
		change_pc = pc_emex_bio_mechanical
		add_modifier = {
			modifier = "bok_new_biomech_world"
			days = 1800 #5 years
		}
		hidden_effect = {		
			planet_event = { id = bok.9 }
			owner = {
				change_variable = {
					which = bok_biomech_world_amount
					value = 1
				}
			}
		}
	}
	
	ai_weight = {
		weight = 25
	}
}

decision_emex_processing_transformation = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 1080
	resources = {
		category = decisions
		cost = {
			alloys = 2000
			minerals = 3000
		}
	}
	
	potential = {
		is_planet_class = pc_emex_bio_mechanical
		exists = owner
		owner = {
			has_origin = origin_born_of_knowledge
			has_technology = tech_emex_processing_world
			check_variable = {
				which = bok_pros_world_cap
				value > bok_pros_world_amount
			}
		}
	}
	allow = {
		num_pops >= 30
	}
	
	effect = {
		#custom_tooltip = decision_emex_processing_transformation_effects
		hidden_effect = {
			planet_event = { id = bok.10 }
			owner = {
				change_variable = {
					which = bok_pros_world_amount
					value = 1
				}
				subtract_variable = {
					which = bok_biomech_world_amount
					value = 1
				}
			}
		}
		change_pc = pc_emex_processing_core
		owner = {
			add_resource = {
				food = 5000
			}
		}
	}
	
	ai_weight = {
		weight = 15
	}
}

# Use Motes for Farming
decision_vfm_convert_planet = {
	owned_planets_only = yes
	icon = decision_resources
	sound = event_administrative_work

	enactment_time = 10
	resources = {
		category = decisions
		cost = {
			minerals = 250
			volatile_motes = 10
		}
	}
	
	potential = {
		exists = owner
		owner = {
			has_valid_civic = civic_volatile_farming_methods
		}
		NOT = {
			has_modifier = pm_mote_food_planet
		}
	}
	
	allow = {
	}
	
	effect = {
		add_modifier = { modifier = "pm_mote_food_planet" days = -1 }
	}
	
	ai_weight = {
		weight = 10
	}
}

# Revert to Mundane Farming
decision_vfm_convert_planet_back = {
	owned_planets_only = yes
	icon = decision_resources
	sound = event_administrative_work

	enactment_time = 5
	resources = {
		category = decisions
		cost = {
			minerals = 200
		}
	}
	
	potential = {
		has_modifier = pm_mote_food_planet
	}
	
	allow = {
	}
	
	effect = {	
		custom_tooltip = decision_vfm_pm_tt2
		hidden_effect = {
			remove_modifier = pm_mote_food_planet
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

# Use Gases for Fracking
decision_gft_convert_planet = {
	owned_planets_only = yes
	icon = decision_drilling_for_gas
	sound = event_administrative_work

	enactment_time = 10
	resources = {
		category = decisions
		cost = {
			minerals = 250
			exotic_gases = 10
		}
	}
	
	potential = {
		exists = owner
		owner = {
			has_valid_civic = civic_gaseous_fracking_techniques
		}
		NOT = {
			has_modifier = pm_gas_minerals_planet
		}
	}
	
	allow = {
	}
	
	effect = {
		add_modifier = { modifier = "pm_gas_minerals_planet" days = -1 }
	}
	
	ai_weight = {
		weight = 10
	}
}

# Revert to Mundane Mining
decision_gtf_convert_planet_back = {
	owned_planets_only = yes
	icon = decision_drilling_for_gas
	sound = event_administrative_work

	enactment_time = 5
	resources = {
		category = decisions
		cost = {
			minerals = 200
		}
	}
	
	potential = {
		has_modifier = pm_gas_minerals_planet
	}
	
	allow = {
	}
	
	effect = {	
		custom_tooltip = decision_gft_pm_tt2
		hidden_effect = {
			remove_modifier = pm_gas_minerals_planet
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

# Machinarchy: AA - Convene Heads
decision_machinarchy_aa = {
	owned_planets_only = yes
	icon = decision_deal
	sound = event_administrative_work

	enactment_time = 3
	resources = {
		category = decisions
		cost = {
			unity = 100
		}
	}
	
	potential = {
		owner = {
			has_valid_civic = civic_machinarchy
			has_policy_flag = artificial_aristocracy
		}
	}
	
	allow = {
		any_owned_pop = {
			has_job = head_of_operations_machine
		}
	}
	
	effect = {	
		custom_tooltip = decision_machinarchy_aa_tt
		hidden_effect = {
			planet_event = { id = civic.10 }
			machinarchy_aa_reset = yes
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

# # Anarcho-Tyranny - Recruitment Campaign
# decision_anty_recruitment = {
# 	owned_planets_only = yes
# 	icon = decision_alien_propaganda
# 	sound = event_administrative_work

# 	enactment_time = 720
# 	resources = {
# 		category = decisions
# 		cost = {
# 			unity = 2000
# 			energy = 1000
# 		}
# 	}
	
# 	potential = {
# 		owner = {
# 			has_valid_civic = civic_anarcho_tyranny
# 		}
# 		any_owned_pop = { has_job = job_criminal }
# 	}
	
# 	allow = {
# 		num_assigned_jobs = {
# 			job = job_loyal_criminal
# 			value < 6
# 		}
# 	}
	
# 	effect = {	
# 		custom_tooltip = decision_anty_recruitment
# 		hidden_effect = {
# 			planet_event = { id = civic.30 } #todo
# 		}
# 	}
	
# 	ai_weight = {
# 		weight = 1
# 	}
# }

# Sovereign Nations - Deal with Nation
decision_sn_dealwithnation = {
	owned_planets_only = yes
	icon = decision_politics
	sound = event_administrative_work

	enactment_time = 30
	resources = {
		category = decisions
		cost = {
			influence = 20
		}
	}
	
	potential = {
		owner = {
			has_valid_civic = civic_sovereign_nations
		}
	}
	
	allow = {
		NOT = { has_modifier = sn_dealing_with_nation }
	}
	
	effect = {	
		custom_tooltip = decision_sn_effect
		hidden_effect = {
			planet_event = { id = civic.31 } 
		}
	}
	
	ai_weight = {
		weight = 10
	}
}

# Defensive Policies - Fortify World
decision_df_fortify = {
	owned_planets_only = yes
	icon = decision_martial_law_hive
	sound = event_administrative_work

	enactment_time = 30
	resources = {
		category = decisions
		cost = {
			trigger = {
				count_planet_army = {
					count <= 5
				}
			}
			alloys = 1000
		}
		cost = {
			trigger = {
				count_planet_army = {
					count > 5
				}
				count_planet_army = {
					count < 10
				}
			}
			alloys = 1500
		}
		cost = {
			trigger = {
				count_planet_army = {
					count > 10
				}
				count_planet_army = {
					count < 20
				}
			}
			alloys = 3000
		}
		cost = {
			trigger = {
				count_planet_army = {
					count > 20
				}
				count_planet_army = {
					count < 30
				}
			}
			alloys = 4500
		}
		cost = {
			trigger = {
				count_planet_army = {
					count > 30
				}
				count_planet_army = {
					count < 50
				}
			}
			alloys = 6000
		}
		cost = {
			trigger = {
				count_planet_army = {
					count > 50
				}
			}
			alloys = 9000
		}
	}
	
	potential = {
		owner = {
			has_valid_civic = civic_defensive_policies
		}
	}
	
	allow = {
		num_pops > 3
		NOT = { has_modifier = df_world_fortified }
	}
	
	effect = {	
		add_modifier = { modifier = "df_world_fortified" days = -1 }
	}
	
	ai_weight = {
		weight = 10
	}
}

# Stop Fortification
decision_end_fortification = {
	owned_planets_only = yes
	icon = decision_end_martial_law_hive
	sound = event_administrative_work

	enactment_time = 5
	resources = {
		category = decisions
		cost = {
			influence = 5
		}
	}
	
	potential = {
		has_modifier = df_world_fortified
	}
	
	allow = {
	}
	
	effect = {	
		custom_tooltip = decision_end_fortify_tt
		hidden_effect = {
			remove_modifier = df_world_fortified
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_planet_feeding_frenzy = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_resources

	resources = {
		category = decisions
		cost = {
			food = 1000
		}
	}

	potential = {
		owner = {
			has_valid_civic = civic_hive_food_focus
		}
	}

	allow = {
		NOR = {
			has_modifier = planet_growth_discouraged
			has_modifier = planet_population_control
			has_modifier = planet_food_boost
		}
	}

	effect = {
		add_modifier = { modifier = "planet_food_boost" days = 3600 }
	}

	ai_weight = {
		weight = 5

		# don't encourage growth if there is no free housing
		modifier = {
			factor = 0
			free_housing < 1
		}
	}
}