##########################################################################
# Decisions
##########################################################################
decision_mem_eden_protocol_turntoxic = {
	#owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_colony_settlement
	#resources = {
	#	category = decisions
	#	cost = {
	#		energy = 500
	#	}
	#}
	#enactment_time = 180
	potential = {
		is_planet_class = pc_toxic
		solar_system = {
			exists = owner
			owner = {
				has_country_flag = mem_eden_protocol_canterraformtoxic
			}
		}		
		#always = yes
	
	}
	allow = {
		always = yes
	}
	effect = {
		change_pc = pc_nuked
	}
	on_queued = {
		owner = { remove_country_flag = mem_eden_protocol_canterraformtoxic }
	}
	on_unqueued = { # this should never happen, just in case
		owner = { set_country_flag = mem_eden_protocol_canterraformtoxic }
	}
	ai_weight = {
		weight = 100
	}
}

decision_mem_eden_protocol_turn_primitive = {
	owned_planets_only = yes

	potential = {
		owner = {
			has_origin = origin_mem_eden_protocol
			NOR = {
				has_country_flag = mem_eden_protocol_became_assimilator
				has_country_flag = mem_eden_protocol_became_servitor
			}
		}
		mem_is_spherical_world = yes
		any_owned_pop = {
			NOR = {
				is_species = owner_main_species
				is_species_class = MACHINE
			}
		}
	}

	allow = {
		always = yes
	}

	effect = {
		custom_tooltip = mem_eden_protocol_turn_primitive_effect
		owner = {
			add_monthly_resource_mult = {
				resource = unity
				value = @tier3unityreward
				min = @tier3unitymin
				max = @tier3unitymax
			}
		}
		hidden_effect = {
			every_owned_pop = {
				limit = {
					OR = {
						is_species = owner_main_species
						is_species_class = MACHINE
					}				
				}
				resettle_pop = {
					pop = this
					planet = owner.capital_scope
				}
			}
			random_owned_pop = {
				save_event_target_as = mem_eden_protocol_future_primitive
			}
			create_country = {
				name = random
				authority = random
				civics = {
					civic = civic_increasing_urbanization
					civic = civic_atmospheric_pollution
				}
				species = event_target:mem_eden_protocol_future_primitive
				ethos = random
				flag = {
					icon = {
						category = "pre_ftl"
						file = "preftl_industrial_age.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"turquoise"
						"green"
						"null"
						"null"
					}
				}
				origin = "origin_default"
				type = primitive
			}
			last_created_country = {
				set_country_flag = machine_age
				set_pre_ftl_age = machine_age
				change_country_flag = {
					icon = {
						category = "pre_ftl"
						file = "preftl_machine_age.dds"
					}
					background= {
						category = "backgrounds"
						file = "new_dawn.dds"
					}
					colors={
						"yellow"
						"orange"
						"null"
						"null"
					}
				}
				every_country = {
					establish_communications_no_message = prev
				}
			}		
			set_pre_ftl_origin = yes
			add_building = building_primitive_capital
		}		
	}
}