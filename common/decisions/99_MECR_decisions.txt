##########################################################################
# Decisions
##########################################################################
decision_strike_the_criminal_syndicate_branch_office = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_crime

	resources = {
		category = decisions
		cost = {
			influence = 100
		}
		cost = {
			trigger = { has_modifier = crime_lord_deal }
			influence = 150
		}
	}

	allow = {
		planet_crime = 0
		num_armies > 3
	}

	potential = {
		owner = { is_regular_empire = yes }
		has_branch_office = yes
		branch_office_owner = {
			is_criminal_syndicate = yes
			is_galactic_community_member = no
		}
		has_global_flag = flag_crack_down_on_criminal_syndicate
		OR = {
			has_galactic_custodian = yes
			has_galactic_emperor = yes
		}
		owner = {
			is_galactic_community_member = yes
		}
	}

	effect = {
		hidden_effect = {
			branch_office_owner = {
				change_variable = { which = crack_downed_branch_office value = 1 }
			}
		}
		close_branch_office = yes
		every_owned_pop = {
			limit = { has_job = criminal }
			kill_pop = yes
		}
		if = {
			limit = { has_modifier = crime_lord_deal }
			remove_modifier = crime_lord_deal
		}
		if = {
			limit = { has_modifier = criminal_underworld }
			remove_modifier = criminal_underworld
		}
		owner = {
			add_resource = {
				energy = 2000
			}
		}
		hidden_effect = { #移除全部犯罪相关修正
			if = {
				limit = { has_modifier = gang_wars }
				remove_modifier = gang_wars
			}
			if = {
				limit = { has_modifier = center_of_drug_trade }
				remove_modifier = center_of_drug_trade
			}
			if = {
				limit = { has_modifier = mob_rule }
				remove_modifier = mob_rule
			}
			if = {
				limit = { has_modifier = bribed_officials }
				remove_modifier = bribed_officials
			}
			if = {
				limit = { has_modifier = substance_abuse }
				remove_modifier = substance_abuse
			}
			if = {
				limit = { has_modifier = smuggler_activity }
				remove_modifier = smuggler_activity
			}
			if = {
				limit = { has_modifier = crime_wave }
				remove_modifier = crime_wave
			}
			if = {
				limit = { has_modifier = travel_advisory }
				remove_modifier = travel_advisory
			}
			if = {
				limit = { has_modifier = cartel_war }
				remove_modifier = cartel_war
			}
			if = {
				limit = { has_modifier = protection_racket }
				remove_modifier = protection_racket
			}
			if = {
				limit = { has_modifier = corrupt_administration }
				remove_modifier = corrupt_administration
			}
			if = {
				limit = { has_modifier = trade_pilfering }
				remove_modifier = trade_pilfering
			}
			if = {
				limit = { has_modifier = crime_lord_deal_broken }
				remove_modifier = crime_lord_deal_broken
			}
		}
	}

	ai_weight = {
		weight = 500
	}
}

decision_strike_the_criminal_syndicate_branch_office_ai = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_crime

	resources = {
		category = decisions
	}

	potential = {
		owner = {
			is_ai = yes
			NOT = { has_country_flag = flag_decision_strike_the_criminal_syndicate_branch_office_ai }
		}
		owner = { is_regular_empire = yes }
		has_branch_office = yes
		branch_office_owner = {
			is_criminal_syndicate = yes
			is_galactic_community_member = no
		}
		has_global_flag = flag_crack_down_on_criminal_syndicate
		OR = {
			has_galactic_custodian = yes
			has_galactic_emperor = yes
		}
		owner = {
			is_galactic_community_member = yes
		}
	}

	effect = {
		hidden_effect = {
			branch_office_owner = {
				change_variable = { which = crack_downed_branch_office value = 1 }
			}
		}
		close_branch_office = yes
		if = {
			limit = { has_modifier = crime_lord_deal }
			remove_modifier = crime_lord_deal
		}
		if = {
			limit = { has_modifier = criminal_underworld }
			remove_modifier = criminal_underworld
		}
		every_owned_pop = {
			limit = { has_job = criminal }
			kill_pop = yes
		}
		owner = {
			add_resource = {
				energy = 2000
			}
			set_timed_country_flag = {
				flag = flag_decision_strike_the_criminal_syndicate_branch_office_ai
				months = 6
			}
		}
		hidden_effect = { #移除全部犯罪相关修正
			if = {
				limit = { has_modifier = gang_wars }
				remove_modifier = gang_wars
			}
			if = {
				limit = { has_modifier = center_of_drug_trade }
				remove_modifier = center_of_drug_trade
			}
			if = {
				limit = { has_modifier = mob_rule }
				remove_modifier = mob_rule
			}
			if = {
				limit = { has_modifier = bribed_officials }
				remove_modifier = bribed_officials
			}
			if = {
				limit = { has_modifier = substance_abuse }
				remove_modifier = substance_abuse
			}
			if = {
				limit = { has_modifier = smuggler_activity }
				remove_modifier = smuggler_activity
			}
			if = {
				limit = { has_modifier = crime_wave }
				remove_modifier = crime_wave
			}
			if = {
				limit = { has_modifier = travel_advisory }
				remove_modifier = travel_advisory
			}
			if = {
				limit = { has_modifier = cartel_war }
				remove_modifier = cartel_war
			}
			if = {
				limit = { has_modifier = protection_racket }
				remove_modifier = protection_racket
			}
			if = {
				limit = { has_modifier = corrupt_administration }
				remove_modifier = corrupt_administration
			}
			if = {
				limit = { has_modifier = trade_pilfering }
				remove_modifier = trade_pilfering
			}
			if = {
				limit = { has_modifier = crime_lord_deal_broken }
				remove_modifier = crime_lord_deal_broken
			}
		}
	}

	ai_weight = {
		weight = 1000
	}
}