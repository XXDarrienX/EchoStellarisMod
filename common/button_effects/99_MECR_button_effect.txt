
#Scope type varies depending on what is selected
# This = selected object (if planet, ship, fleet, system, ambient object, megastructure, federation, espionage operation, arc site or first contact) or player country
# From = player country
# Note: It's advised to check is_scope_type = planet/whatever in the allow trigger, since it's possible to confuse the scopes if multiple interfaces are open

# Usage example in a .gui file:
#	effectbuttonType = {
#		name = button_effect_test
#		quadTextureSprite = GFX_fleetview_destroy_fleet
#		position = { x = 283 y = 0 }
#		scale = 1
#		orientation = UPPER_LEFT
#		effect = example_button_effect
#	}
MECR_open_setting_menu_effect_non = {
	potential = {
		is_galactic_community_formed = yes
		has_galactic_custodian = no
		has_galactic_emperor = no
		from = {
			is_ai = no
			has_country_flag = flag_reload_game_MECR
		}
	}
	allow = {
		custom_tooltip = {
			from = { NOT = { has_country_flag = flag_MECR_setting_menu_opened } }
		}
	}

	effect = {
		custom_tooltip = MECR_open_setting_menu_effect_tooltip
		hidden_effect = {
			from = {
				country_event = {
					id = MECR.999
				}
			}
		}
	}
}
MECR_open_setting_menu_effect_cus = {
	potential = {
		has_galactic_custodian = yes
		from = {
			is_ai = no
			has_country_flag = flag_reload_game_MECR
		}
	}
	allow = {
		custom_tooltip = {
			from = { NOT = { has_country_flag = flag_MECR_setting_menu_opened } }
		}
	}

	effect = {
		custom_tooltip = MECR_open_setting_menu_effect_tooltip
		hidden_effect = {
			from = {
				country_event = {
					id = MECR.999
				}
			}
		}
	}
}
MECR_open_setting_menu_effect_imp = {
	potential = {
		has_galactic_emperor = yes
		from = {
			is_ai = no
			has_country_flag = flag_reload_game_MECR
		}
	}
	allow = {
		custom_tooltip = {
			from = { NOT = { has_country_flag = flag_MECR_setting_menu_opened } }
		}
	}

	effect = {
		custom_tooltip = MECR_open_setting_menu_effect_tooltip
		hidden_effect = {
			from = {
				country_event = {
					id = MECR.999
				}
			}
		}
	}
}
turn_on_imperial_authority_additional_display_effect = {
	potential = {
		is_galactic_community_formed = yes
	}
	allow = {
		always = yes
	}

	effect = {
		hidden_effect = {
			from = {
				if = {
					limit = { NOT = { has_country_flag = flag_reload_game_MECR } }
					set_country_flag = flag_reload_game_MECR
					if = {
						limit = { has_galactic_emperor = yes }
						imperial_authority_trend_check_part_1 = yes
						imperial_authority_trend_check_part_2 = yes
					}
				}
			}
		}
	}
}
imperial_authority_trend_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		always = yes
	}

	effect = {
		if = {
			limit = {
				from = {
					OR = {
						is_galactic_community_member = yes
						check_variable = { which = diplo_intel_of_imperium value >= 2 }
					}
				}
			}
			custom_tooltip = "IMPERIAL_AUTHORITY_TREND"
		}
		else = {
			custom_tooltip = "IMPERIAL_AUTHORITY_TREND_NO_INTEL"
		}
		hidden_effect = {
			imperial_authority_trend_check_part_1 = yes
			imperial_authority_trend_check_part_2 = yes
		}
	}
}
imperial_authority_additional_change_refresh_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		always = yes
	}

	effect = {
		custom_tooltip = "imperial_authority_additional_change_refresh_effect_tooltip"
		hidden_effect = {
			imperial_authority_trend_check_part_1 = yes
			imperial_authority_trend_check_part_2 = yes
		}
	}
}
imperial_authority_additional_change_display_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		always = yes
	}

	effect = {
		if = {
			limit = {
				from = {
					OR = {
						is_galactic_community_member = yes
						check_variable = { which = diplo_intel_of_imperium value >= 3 }
					}
				}
			}
			custom_tooltip = "imperial_authority_additional_change_display_effect_tooltip"
		}
		else = {
			custom_tooltip = "imperial_authority_additional_change_display_effect_tooltip_no_intel"
		}
		hidden_effect = {
			imperial_authority_trend_check_part_1 = yes
			imperial_authority_trend_check_part_2 = yes
		}
	}
}
envoy_icon_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = "envoy_icon_effect_tooltip"
		if = {
			limit = { is_galactic_community_member = no }
			if = {
				limit = { check_variable = { which = diplo_intel_of_imperium value >= 3 } }
				custom_tooltip = "envoy_icon_effect_tooltip_outsider_intel"
				custom_tooltip = "---------------"
				custom_tooltip = "STRENGTHENING_EMPIRE"
				every_galcom_member = {
					limit = { check_variable = { which = authority_action_type value = 1 } }
					custom_tooltip = "authority_action_willing_strengthen"
				}
				every_galcom_member = {
					limit = { check_variable = { which = authority_action_type value = 2 } }
					custom_tooltip = "authority_action_willing_strengthen_auto"
				}
				custom_tooltip = "---------------"
				custom_tooltip = "UNDERMINING_EMPIRE"
				every_galcom_member = {
					limit = { check_variable = { which = authority_action_type value = -1 } }
					custom_tooltip = "authority_action_willing_undermine"
				}
				every_galcom_member = {
					limit = { check_variable = { which = authority_action_type value = -2 } }
					custom_tooltip = "authority_action_willing_undermine_auto"
				}
			}
			else = {
				custom_tooltip = "envoy_icon_effect_tooltip_outsider_no_intel"
			}
		}
		else = {
			if = {
				limit = { has_country_flag = community_envoy_auto }
				custom_tooltip = "envoy_icon_effect_switch_auto_controll_on"
				hidden_effect = {
					remove_country_flag = community_envoy_auto
					set_variable = { which = authority_action_type value = 0 }
					set_variable = { which = authority_action_willing value = 0 }
				}
			}
			else = {
				custom_tooltip = "envoy_icon_effect_switch_auto_controll_off"
				if = {
					limit = {
						any_owned_leader = {
							OR = {
								is_strengthing_imperial_authority = yes
								is_undermining_imperial_authority = yes
							}
						}
					}
					custom_tooltip = "envoy_icon_effect_switch_auto_controll_off_condition"
				}
				else = {
					hidden_effect = {
						set_country_flag = community_envoy_auto
					}
				}
			}
		}
		hidden_effect = {
			imperial_authority_trend_check_part_1 = yes
			imperial_authority_trend_check_part_2 = yes
		}
	}
}
strengthen_empire_icon_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		from = {
			is_galactic_community_member = yes
		}
	}
	effect = {
		custom_tooltip = "STRENGTHEN_EMPIRE_INSTANT"
		if = {
			limit = { any_galcom_member = { check_variable = { which = authority_action_type value > 0 } } }
			custom_tooltip = "---------------"
			custom_tooltip = "STRENGTHENING_EMPIRE"
			every_galcom_member = {
				limit = { check_variable = { which = authority_action_type value = 1 } }
				custom_tooltip = "authority_action_willing_strengthen"
			}
			every_galcom_member = {
				limit = { check_variable = { which = authority_action_type value = 2 } }
				custom_tooltip = "authority_action_willing_strengthen_auto"
			}
		}
		hidden_effect = {
			imperial_authority_trend_check_part_1 = yes
			from = {
				remove_country_flag = community_envoy_auto
				if = {
					limit = { check_variable = { which = authority_action_type value = 1 } }
					galactic_emperor = { subtract_variable = { which = strengthen_authority_number value = prev.authority_action_willing } }
					set_variable = { which = authority_action_type value = 0 }
					set_variable = { which = authority_action_willing value = 0 }
				}
				else_if = {
					limit = { check_variable = { which = authority_action_type value = 2 } }
					set_variable = { which = authority_action_type value = 1 }
				}
				else_if = {
					limit = { check_variable = { which = authority_action_type value = 0 } }
					set_variable = { which = authority_action_type value = 1 }
					set_variable = { which = authority_action_willing value = community_envoy_skill }
					galactic_emperor = { change_variable = { which = strengthen_authority_number value = prev.authority_action_willing } }
				}
				else = {
					set_variable = { which = authority_action_type value = 1 }
					set_variable = { which = authority_action_willing value = community_envoy_skill }
					galactic_emperor = {
						subtract_variable = { which = undermine_authority_number value = prev.authority_action_willing }
						change_variable = { which = strengthen_authority_number value = prev.authority_action_willing }
					}
				}
			}
			imperial_authority_trend_check_part_2 = yes
		}
	}
}
undermine_empire_icon_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		from = {
			if = {
				limit = { is_galactic_emperor = no }
				is_galactic_community_member = yes
			}
			else = {
				is_galactic_emperor = yes
			}
		}
	}
	effect = {
		custom_tooltip = "UNDERMINE_EMPIRE_INSTANT"
		if = {
			limit = { any_galcom_member = { check_variable = { which = authority_action_type value < 0 } } }
			custom_tooltip = "---------------"
			custom_tooltip = "UNDERMINING_EMPIRE"
			every_galcom_member = {
				limit = { check_variable = { which = authority_action_type value = -1 } }
				custom_tooltip = "authority_action_willing_undermine"
			}
			every_galcom_member = {
				limit = { check_variable = { which = authority_action_type value = -2 } }
				custom_tooltip = "authority_action_willing_undermine_auto"
			}
		}
		hidden_effect = {
			imperial_authority_trend_check_part_1 = yes
			from = {
				remove_country_flag = community_envoy_auto
				if = {
					limit = { check_variable = { which = authority_action_type value = -1 } }
					galactic_emperor = { subtract_variable = { which = undermine_authority_number value = prev.authority_action_willing } }
					set_variable = { which = authority_action_type value = 0 }
					set_variable = { which = authority_action_willing value = 0 }
				}
				else_if = {
					limit = { check_variable = { which = authority_action_type value = -2 } }
					set_variable = { which = authority_action_type value = -1 }
				}
				else_if = {
					limit = { check_variable = { which = authority_action_type value = 0 } }
					set_variable = { which = authority_action_type value = -1 }
					set_variable = { which = authority_action_willing value = community_envoy_skill }
					galactic_emperor = { change_variable = { which = undermine_authority_number value = prev.authority_action_willing } }
				}
				else = {
					set_variable = { which = authority_action_type value = -1 }
					set_variable = { which = authority_action_willing value = community_envoy_skill }
					galactic_emperor = {
						subtract_variable = { which = strengthen_authority_number value = prev.authority_action_willing }
						change_variable = { which = undermine_authority_number value = prev.authority_action_willing }
					}
				}
			}
			imperial_authority_trend_check_part_2 = yes
		}
	}
}
MECR_UI_mess_notice_effect = {
	potential = {
		has_galactic_emperor = yes
		from = { has_country_flag = flag_reload_game_MECR }
	}
	allow = {
		always = yes
	}
	effect = {
		custom_tooltip = "MECR_UI_mess_notice_effect_tooltip"
	}
}
leader_function_effect = {
	potential = {
		from = {
			is_galactic_community_member = yes
			any_owned_leader = { is_assigned_to_galcom_any_job = yes }
			has_country_flag = flag_reload_game_MECR
		}
	}
	allow = {
	}
	effect = {
	}
}