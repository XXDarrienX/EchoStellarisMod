detection_array = {
	icon = "GFX_spaceport_module_detecton_array"
	section = "SCIENCE_STARBASE_SECTION"
	construction_days = 60

	potential = {
		exists = owner
		owner = { has_technology = tech_detection_array }
		is_orbital_ring = no
	}

	possible = {
		NOT = {
			has_starbase_building = dark_matter_listening_post
		}
		custom_tooltip = {
			fail_text = "starbase_detection_limit.tooltip.fail"
			NOT = { count_starbase_modules = { count > 6 type = detection_array include_being_constructed = yes } }
		}
	}

	resources = {
		category = starbase_modules
		cost = {
			alloys = 25
		}

		upkeep = {
			energy = 0.25
		}
	}

	station_modifier = {
		ship_cloaking_detection_add = 1
	}

	ai_build_at_chokepoint = yes
	ai_build_outside_chokepoint = yes
	ai_weight = {
		weight = 100 #use same weight here - ai weighting is done in starbase_types.txt
		modifier = {
			add = 1000
			owner = {
				NOT = {
					any_owned_starbase = {
						has_starbase_module = detection_array
					}
				}
			}
		}
	}

	show_in_tech = "tech_detection_array"
}

solar_panel_network = {
	icon = "GFX_solar_panel_network"
	section = "SCIENCE_STARBASE_SECTION"
	construction_days = 180
	initial = yes

	potential = {
		exists = owner
		is_orbital_ring = no
		owner = {
			is_gestalt = yes
			has_technology = "tech_solar_panel_network"
			NOT = { has_civic = civic_machine_astromining_drones }
		}
	}

	possible = {
		solar_system = {
			custom_tooltip = {
				fail_text = "requires_no_black_hole_or_dyson_sphere"
				NOR = {
					is_star_class = sc_black_hole
					has_megastructure = dyson_sphere_3
					has_megastructure = dyson_sphere_4
					has_megastructure = dyson_sphere_5
				}
			}
		}
	}

	show_in_tech = "tech_solar_panel_network"

	resources = {
		category = starbase_modules
		cost = {
			alloys = 50
		}

		produces = {
			energy = 8
		}

		produces = {
			trigger = {
				exists = owner
				owner = {
					is_galactic_community_member = yes
				}
				OR = {
					is_active_resolution = "resolution_galacticstudies_astral_studies_network"
					is_active_resolution = "resolution_galacticstudies_advanced_xenostudies"
					is_active_resolution = "resolution_galacticstudies_ethical_guideline_refactoring"
					is_active_resolution = "resolution_galacticstudies_extradimensional_experimentation"
					is_active_resolution = "resolution_galacticstudies_6"
				}
			}
			energy = 6
		}
	}


	ai_weight = {
		weight = 100 #use same weight here - ai weighting is done in starbase_types.txt
	}
}

orbital_ring_habitation = {
	icon = "GFX_orbitalring_module_habitation"
	section = "HABITAT_ORBITAL_RING_SECTION"
	construction_days = 360
	starbase_type = orbital_ring

	potential = {
		exists = owner
		owner = { has_technology = tech_housing_2 }
		is_orbital_ring = yes
	}

	show_in_tech = "tech_housing_2"

	resources = {
		category = starbase_modules
		cost = {
			alloys = 200
			influence = 25
		}

		upkeep = {
			energy = 2
		}
	}

	planet_modifier = {
		planet_max_districts_add = 0.5
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet
			planet = {
				exists = owner.overlord
				has_holding = {
					holding = holding_orbital_assembly_complex
					owner = owner.overlord
				}
			}
		}
		planet_max_buildings_add = 0.5
	}

	replaceable = {
		custom_tooltip = {
			fail_text = orbital_ring_habitation_districts_maxed_out
			OR = { # to keep tooltip from showing up when no module is built yet
				NOT = { has_starbase_module = orbital_ring_habitation }
				AND = {
					has_starbase_module = orbital_ring_habitation
					planet = {
						num_free_districts = { type = any value >= 1 }
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 100
	}
}