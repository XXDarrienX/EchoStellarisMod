#############
# Resource buildings
#############
building_refinery = {
	base_buildtime = @b2_time
	planet_limit = 1

	exempt_from_ai_planet_specialization = no
	category = manufacturing

	building_sets = {
		industrial
		factory
		foundry
	}

	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		exists = owner
		owner = { is_wilderness_empire = no } # see 'building_churning_stomach'
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
		}
		upkeep = {
			energy = 3
		}
	}

	planet_modifier = {
		planet_metallurgists_exotic_gases_produces_add = 1
		planet_artisans_exotic_gases_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			industrial_jobs_are_catalytic_trigger = no
		}
		planet_metallurgists_minerals_upkeep_add = 2
		planet_artisans_minerals_upkeep_add = 2
	}


	triggered_planet_modifier = {
		potential = {
			industrial_jobs_are_catalytic_trigger = yes
		}
		planet_metallurgists_food_upkeep_add = 3
		planet_artisans_food_upkeep_add = 3
	}

	prerequisites = {
		"tech_exotic_gases"
	}
	show_tech_unlock_if = {
		is_wilderness_empire = no
	}

	upgrades = {
		"eb_refinery"
	}
}

building_chemical_plant = {
	base_buildtime = @b2_time
	planet_limit = 1

	exempt_from_ai_planet_specialization = no
	category = manufacturing

	building_sets = {
		industrial
		factory
		foundry
	}

	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		owner = { is_wilderness_empire = no } # see 'building_mote_aggravator'
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = 3
		}
	}

	planet_modifier = {
		planet_metallurgists_volatile_motes_produces_add = 1
		planet_artisans_volatile_motes_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			industrial_jobs_are_catalytic_trigger = no
		}
		planet_metallurgists_minerals_upkeep_add = 2
		planet_artisans_minerals_upkeep_add = 2
	}


	triggered_planet_modifier = {
		potential = {
			industrial_jobs_are_catalytic_trigger = yes
		}
		planet_metallurgists_food_upkeep_add = 3
		planet_artisans_food_upkeep_add = 3
	}

	prerequisites = {
		"tech_volatile_motes"
	}

	upgrades = {
		"eb_chemical_plant"
	}

	show_tech_unlock_if = {
		is_wilderness_empire = no
	}
}

building_crystal_plant = {
	base_buildtime = @b2_time
	planet_limit = 1

	exempt_from_ai_planet_specialization = no
	category = manufacturing

	building_sets = {
		industrial
		factory
		foundry
	}

	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
		owner = { is_wilderness_empire = no }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = 3
		}
	}

	planet_modifier = {
		planet_metallurgists_rare_crystals_produces_add = 1
		planet_artisans_rare_crystals_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			industrial_jobs_are_catalytic_trigger = no
		}
		planet_metallurgists_minerals_upkeep_add = 2
		planet_artisans_minerals_upkeep_add = 2
	}


	triggered_planet_modifier = {
		potential = {
			industrial_jobs_are_catalytic_trigger = yes
		}
		planet_metallurgists_food_upkeep_add = 3
		planet_artisans_food_upkeep_add = 3
	}

	prerequisites = {
		"tech_rare_crystals"
	}

	show_tech_unlock_if = {
		is_wilderness_empire = no
	}

	upgrades = {
		"eb_crystal_plant"
	}
}

building_nanite_transmuter = {
	base_buildtime = @b3_time

	category = manufacturing

	building_sets = {
		industrial
		factory
		foundry
	}

	potential = {
		exists = owner
		OWNER = {
			OR = {
				has_monthly_income = {
					resource = nanites
					value > 0
				}
				AND = {
					is_ai = no
					has_resource = {
						type = nanites
						amount > 0
					}
				}
			}
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1000
		}
		produces = {
			trigger = {
				owner = {
					NOT = {
						has_deficit = nanites
					}
				}
			}
			rare_crystals = 2
			volatile_motes = 2
			exotic_gases = 2
		}
		upkeep = {
			nanites = 1
			energy = 5
		}
	}

	prerequisites = {
		"tech_nanite_transmutation"
	}

	ai_resource_production = {
		rare_crystals = @b3_rare_upkeep
		volatile_motes = @b3_rare_upkeep
		exotic_gases = @b3_rare_upkeep
		trigger = {
			always = yes
		}
	}
}