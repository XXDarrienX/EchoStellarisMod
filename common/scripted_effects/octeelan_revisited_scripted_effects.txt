@octeelan_system_AVI_pops = 1
@octeelan_system_MOL1_pops = 1
@octeelan_system_MOL2_pops = 2
@octeelan_system_FUN_pops = 1

# THIS = planet
create_additional_xenos_regular = {
	if = {
		limit = {
			owner = {
				OR = {
					is_gestalt = yes
					NOT = { has_origin = origin_syncretic_evolution }
				}
			}
		}
		# this species is the syncretic species by default, but spawn a Pop for RP purposes if the player has a different origin
		create_species = {
			name = octeelan_system_AVI_name
			plural = octeelan_system_AVI_plural
			adjective = octeelan_system_AVI_adjective
			class = AVI
			portrait = avi5
			homeworld = THIS
			traits = {
				ideal_planet_class = THIS
				trait = trait_very_strong
				trait = trait_industrious
				trait = trait_nonadaptive
				trait = trait_slow_learners
			}
		}
		while = {
			random_owned_pop = {
				limit = {
					has_job = miner
					NOT = { is_species = last_created_species }
				}
				unemploy_pop = yes
			}
			count = @octeelan_system_AVI_pops
			create_pop = {
				species = last_created_species
				ethos = random
			}
		}
	}
	create_species = {
		name = octeelan_system_MOL1_name
		plural = octeelan_system_MOL1_plural
		adjective = octeelan_system_MOL1_adjective
		class = MOL
		portrait = mol12
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_intelligent
			trait = trait_conformists
			trait = trait_quick_learners
			trait = trait_slow_breeders
			trait = trait_fleeting
			# added trait_quick_learners because of extra trait point
		}
	}
	while = {
		count = @octeelan_system_MOL1_pops
		random_owned_pop = {
			limit = {
				has_job = researcher
				NOT = { is_species = last_created_species }
			}
			unemploy_pop = yes
			clear_pop_category = yes
		}
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_MOL2_name
		plural = octeelan_system_MOL2_plural
		adjective = octeelan_system_MOL2_adjective
		class = MOL
		portrait = mol4
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_strong
			trait = trait_agrarian
			trait = trait_conformists
			trait = trait_repugnant
			trait = trait_sedentary
		}
	}
	while = {
		count = @octeelan_system_MOL2_pops
		random_owned_pop = {
			limit = {
				has_job = farmer
				NOT = { is_species = last_created_species }
			}
			unemploy_pop = yes
		}
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_FUN_name
		plural = octeelan_system_FUN_plural
		adjective = octeelan_system_FUN_adjective
		class = FUN
		portrait = fun1
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_venerable
			trait = trait_conservational
			trait = trait_repugnant
			trait = trait_sedentary
			# remove solitary because this species had points remaining but couldn't spend them - partially because Repugnant is -2 points now
			# trait = trait_solitary
		}
	}
	while = {
		count = @octeelan_system_FUN_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
}

# THIS = planet
create_additional_xenos_hive = {
	create_species = {
		name = octeelan_system_AVI_name
		plural = octeelan_system_AVI_plural
		adjective = octeelan_system_AVI_adjective
		class = AVI
		portrait = avi5
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_hive_mind
			trait = trait_very_strong
			trait = trait_industrious
			trait = trait_nonadaptive
			trait = trait_slow_learners
		}
	}
	while = {
		count = @octeelan_system_AVI_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_MOL1_name
		plural = octeelan_system_MOL1_plural
		adjective = octeelan_system_MOL1_adjective
		class = MOL
		portrait = mol12
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_hive_mind
			trait = trait_intelligent
			trait = trait_conformists
			trait = trait_quick_learners
			trait = trait_slow_breeders
			trait = trait_fleeting
		}
	}
	while = {
		count = @octeelan_system_MOL1_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_MOL2_name
		plural = octeelan_system_MOL2_plural
		adjective = octeelan_system_MOL2_adjective
		class = MOL
		portrait = mol4
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_hive_mind
			trait = trait_agrarian
			trait = trait_conformists
			trait = trait_repugnant
			trait = trait_sedentary
		}
	}
	while = {
		count = @octeelan_system_MOL2_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_FUN_name
		plural = octeelan_system_FUN_plural
		adjective = octeelan_system_FUN_adjective
		class = FUN
		portrait = fun1
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_hive_mind
			trait = trait_venerable
			trait = trait_conservational
			trait = trait_repugnant
			trait = trait_sedentary
			# remove solitary because this species had points remaining but couldn't spend them - partially because Repugnant is -2 points now
			# trait = trait_solitary
		}
	}
	while = {
		count = @octeelan_system_FUN_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
}

# THIS = planet
create_additional_xenos_cyborg = {
	create_species = {
		name = octeelan_system_AVI_name
		plural = octeelan_system_AVI_plural
		adjective = octeelan_system_AVI_adjective
		class = AVI
		portrait = avi5
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_cybernetic
			trait = trait_very_strong
			trait = trait_industrious
			trait = trait_nonadaptive
			trait = trait_slow_learners
		}
	}
	while = {
		count = @octeelan_system_AVI_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_MOL1_name
		plural = octeelan_system_MOL1_plural
		adjective = octeelan_system_MOL1_adjective
		class = MOL
		portrait = mol12
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_cybernetic
			trait = trait_intelligent
			trait = trait_conformists
			trait = trait_quick_learners
			trait = trait_slow_breeders
			trait = trait_fleeting
		}
	}
	while = {
		count = @octeelan_system_MOL1_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_MOL2_name
		plural = octeelan_system_MOL2_plural
		adjective = octeelan_system_MOL2_adjective
		class = MOL
		portrait = mol4
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_cybernetic
			trait = trait_agrarian
			trait = trait_conformists
			trait = trait_repugnant
			trait = trait_sedentary
		}
	}
	while = {
		count = @octeelan_system_MOL2_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
	create_species = {
		name = octeelan_system_FUN_name
		plural = octeelan_system_FUN_plural
		adjective = octeelan_system_FUN_adjective
		class = FUN
		portrait = fun1
		homeworld = THIS
		traits = {
			ideal_planet_class = THIS
			trait = trait_cybernetic
			trait = trait_venerable
			trait = trait_conservational
			trait = trait_repugnant
			trait = trait_sedentary
			# remove solitary because this species had points remaining but couldn't spend them - partially because Repugnant is -2 points now
			# trait = trait_solitary
		}
	}
	while = {
		count = @octeelan_system_FUN_pops
		create_pop = {
			species = last_created_species
			ethos = random
		}
	}
}

# Set up the decadent synths
# THIS = planet
setup_peepboop_homeworld = {
	clear_deposits = yes
	create_species = {
		name = "Beep-Boop"
		plural = "Beep-Boops"
		name_list = AI
		class = PEEBOOP
		portrait = peepboop1
		homeworld = THIS
		traits = {
			trait = trait_machine_unit
			trait = trait_robot_efficient_processors
			trait = trait_robot_emotion_emulators
			trait = trait_robot_luxurious
			trait = trait_robot_custom_made
			# remove High Maintenance because species had -4 trait points,
			# add Efficient Processors to use full amount trait points
		}
		effect = { save_event_target_as = peepboop_species }
	}
	create_country = {
		name = random
		ethos = { ethic = ethic_gestalt_consciousness }
		authority = auth_machine_intelligence
		civics = {
			civic = civic_machine_ota_updates
			civic = civic_machine_introspective
		}
		type = default
		species = event_target:peepboop_species
		name_list = AI
		flag = {
			icon= {
				category = "special"
				file = "ai_01.dds"
			}
			background= {
				category = "backgrounds"
				file = "circle.dds"
			}
			colors = {
				"pink"
				"grey"
				"null"
				"null"
			}
		}
		ignore_initial_colony_error = yes
		day_zero_contact = no
		effect = {
			save_event_target_as = peepboop_country
			set_country_flag = is_peepboops
			set_country_flag = is_peepboops@PREV.solar_system.owner
			establish_communications_no_message = PREV.solar_system.owner
			add_intel = {
				who = PREV.solar_system.owner
				amount = 40
			}
			PREV.solar_system.owner = {
				establish_communications_no_message = event_target:peepboop_country
				add_intel = {
					who = event_target:peepboop_country
					amount = 40
				}
			}
			set_origin = origin_fallen_empire
			set_graphical_culture = mammalian_01
			add_resource = {
				energy = 1000
				minerals = 1000
				alloys = 1000
				influence = 100
			}
			set_ai_personality = machine_intelligence
			set_policy = {
				policy = diplomatic_stance
				option = diplo_stance_belligerent
				cooldown = no
			}
			set_closed_borders = {
				who = PREV.solar_system.owner
				status = yes
			}
			give_technology = { tech = tech_alien_life_studies_gestalt	message = no }
			give_technology = { tech = tech_auxiliary_fire_control		message = no }
			give_technology = { tech = tech_ground_defense_planning		message = no }
			give_technology = { tech = tech_adaptive_combat_algorithms	message = no }
			give_technology = { tech = tech_planetary_unification		message = no }
			give_technology = { tech = tech_planetary_infrastructure_1	message = no }
			give_technology = { tech = tech_corvette_hull_1				message = no }
			give_technology = { tech = tech_corvette_build_speed		message = no }
			give_technology = { tech = tech_faux_starbase_1				message = no }
			give_technology = { tech = tech_faux_starbase_2				message = no }
			create_ship_design = { design = NAME_military_station_small_point_defense_peepboop }
			add_ship_design = last_created_design
			create_ship_design = { design = NAME_military_station_small_line_peepboop }
			add_ship_design = last_created_design
			create_ship_design = { design = NAME_military_station_small_strike_craft_peepboop }
			add_ship_design = last_created_design
			create_ship_design = { design = NAME_starbase_faux_spaceport_peepboop }
			add_ship_design = last_created_design
			create_starting_leaders = yes
		}
	}
	create_colony = {
		owner = event_target:peepboop_country
		species = event_target:peepboop_species
		ethos = owner
	}
	set_name = "Oichi-kee"
	set_capital = yes
	# 9 energy + 6 minerals + 8 farming
	while = {
		count = 3
		add_deposit = d_arid_highlands
		add_deposit = d_searing_desert
	}
	while = {
		count = 4
		add_district = district_nexus
	}
	add_deposit = d_veiny_cliffs
	add_deposit = d_ore_rich_caverns
	add_deposit = d_rich_mountain
	add_deposit = d_great_river
	add_deposit = d_marvelous_oasis
	add_deposit = d_tropical_island
	add_building = building_machine_capital
	add_building = building_machine_assembly_plant
	add_building = building_uplink_node
	add_building = building_class_4_singularity
	add_building = building_nano_forge
	add_building = building_dimensional_fabricator
	while = {
		count = 2
		add_deposit = d_alien_pets_deposit
		add_building = building_xeno_zoo_gestalt
	}
	while = {
		count = 3
		add_deposit = d_octeelan_xeno_preserve
	}
	while = {
		limit = { num_pops < 21 }
		create_pop = { species = event_target:peepboop_species }
	}
	while = {
		count = 6
		create_army = {
			owner = event_target:peepboop_country
			species = event_target:peepboop_species
			type = machine_defense_peepboop
			effect = {
				set_name = machine_defense_peepboop_army_name
			}
		}
	}
	solar_system = {
		every_system_planet = {
			set_surveyed = {
				surveyed = yes
				surveyor = event_target:peepboop_country
			}
		}
		set_surveyed = {
			surveyed = yes
			surveyor = event_target:peepboop_country
		}
		create_fleet = {
			name = NAME_peepboop_station_fleet
			effect = {
				set_owner = event_target:peepboop_country
				set_location = {
					target = PREVPREV
					distance = 10
					angle = random
				}
				create_ship = {
					name = NAME_peepboop_station_ship
					design = NAME_starbase_faux_spaceport_peepboop
					prefix = no
				}
				create_ship = {
					name = random
					design = NAME_military_station_small_point_defense_peepboop
					prefix = no
				}
				create_ship = {
					name = random
					design = NAME_military_station_small_line_peepboop
					prefix = no
				}
				create_ship = {
					name = random
					design = NAME_military_station_small_strike_craft_peepboop
					prefix = no
				}
			}
		}
		create_fleet = {
			effect = {
				set_owner = event_target:peepboop_country
				create_ship = {
					name = random
					random_existing_design = science
				}
				set_fleet_stance = evasive
				set_location = {
					target = PREVPREV
					distance = 10
					angle = random
				}
				owner = {
					create_leader = {
						class = scientist
						sub_type = survey
						name = random
						species = owner_main_species
					}
				}
				set_leader = last_created_leader
			}
		}
		create_fleet = {
			effect = {
				set_owner = event_target:peepboop_country
				create_ship = {
					name = random
					random_existing_design = constructor
				}
				set_fleet_stance = evasive
				set_location = {
					target = PREVPREV
					distance = 10
					angle = random
				}
			}
		}
	}
}