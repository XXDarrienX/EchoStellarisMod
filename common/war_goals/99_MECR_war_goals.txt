wg_imperial_crusade = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	release_occupied_systems_on_status_quo = yes

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -100


	potential = {
		always = no # event only
	}
	possible = {
		custom_tooltip = {
			fail_text = has_claimed_all_systems
			from = {
				is_country_type = default
				any_owned_planet = {
					is_colony = yes
					root = {
						NOT = { has_claim = prev.solar_system }
					}
				}
			}
		}
	}
	on_accept = {
		from = {
			if = {
				limit = { is_subject = yes }
				set_subject_of = { who = none }
			}
			add_to_galactic_community = yes
		}
		add_imperial_authority = 30
	}

	on_status_quo = {
		if = {
			limit = {
				exists = last_created_country
				last_created_country = {
					has_country_flag = released_empire
				}
			}

			last_created_country = {
				add_to_galactic_community = yes
			}
		}
	}

	ai_weight = {
		weight = 10
	}
}
wg_imperial_crusade_total_war = {
	casus_belli = cb_event
	hide_if_no_cb = yes
	set_defender_wargoal = wg_end_threat
	total_war = yes

	allowed_peace_offers = {
		status_quo
	}

	surrender_acceptance = -1000

	potential = {
		always = no
	}
	possible = {
		always = yes
	}

	ai_weight = {
		weight = 100
	}
}

# 暂时不采用。把堕落帝国加进星海帝国里冲突太多
wg_imperium_force_fallen_empire_to_become_province = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	release_occupied_systems_on_status_quo = no
	set_defender_wargoal = wg_imperium_fallen_empire_refuse_to_become_province

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -100

	potential = {
		always = no # event only
	}
	possible = {
	}
	on_accept = {
		hidden_effect = { federation = { save_cohesion = yes } }
		from = {
			set_subject_of = {
				subject_type = imperial_province
				who = galactic_emperor
			}
			add_to_galactic_community = yes
			join_alliance = { who = galactic_emperor override_requirements = yes }
		}
		federation = {
			hidden_effect = {
				FROM = { set_country_flag = fallen_empire_compromised }
				if = { #收纳堕落帝国的舰队
					limit = {
						has_federation_law = imperial_armada_conscription_high
					}
					federation_leader = {
						set_variable = { which = federation_receive_fleet_size value = 0 }
						FROM = {
							export_trigger_value_to_variable = {
								trigger = used_naval_capacity_integer
								variable = fleet_size_trans_into_federation
							}
							prev = {
								change_variable = {
									which = federation_receive_fleet_size
									value = prev.fleet_size_trans_into_federation
								}
							}
							clear_variable = fleet_size_trans_into_federation
							every_controlled_fleet = {
								limit = {
									OR = {
										any_controlled_ship = { is_ship_class = shipclass_military }
										any_controlled_ship = { is_ship_class = shipclass_military_special }
									}
								}
								every_controlled_ship = {
									delete_ship = this
								}
							}
							random_controlled_fleet = {
								limit = { any_controlled_ship = { is_ship_size = juggernaut } }
								set_owner = prev
							}
						}
						export_trigger_value_to_variable = {
							trigger = max_naval_capacity
							variable = federation_leader_naval_cap
						}
						divide_variable = {
							which = federation_receive_fleet_size
							value = federation_leader_naval_cap
						}
						create_fleet_from_naval_cap = {
							fraction = federation_receive_fleet_size
							ship_owner_type = federation
						}
						clear_variable = federation_receive_fleet_size
						clear_variable = federation_leader_naval_cap
					}
				}
			}
		}
		hidden_effect = { federation = { load_cohesion = yes } }
		federation = { add_cohesion = 50 }
		add_imperial_authority = 50
	}

	on_status_quo = {
		hidden_effect = { federation = { save_cohesion = yes } }
		from = {
			add_to_galactic_community = yes
			join_alliance = { who = galactic_emperor override_requirements = yes }
		}
		hidden_effect = { federation = { load_cohesion = yes } }
	}

	ai_weight = {
		weight = 10
	}
}
wg_imperium_fallen_empire_refuse_to_become_province = {
	casus_belli = cb_event

	hide_if_no_cb = yes
	release_occupied_systems_on_status_quo = no

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -100

	potential = {
		always = no # event only
	}
	possible = {
	}
	on_accept = {
		FROM = {
			add_modifier = { modifier = humiliated days = 3600 }
			federation = { add_cohesion = -100 }
		}
		add_imperial_authority = -100
	}
	on_status_quo = {
		hidden_effect = { galactic_emperor = { federation = { save_cohesion = yes } } }
		add_to_galactic_community = yes
		join_alliance = { who = galactic_emperor override_requirements = yes }
		hidden_effect = { federation = { load_cohesion = yes } }
	}

	ai_weight = {
		weight = 10
	}
}