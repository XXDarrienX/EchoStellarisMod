# Defines the different values available for given Agreement terms. The terms are defined in agreement_terms scripts.
# The term values contain the main logic of Agreement terms, including the modifiers and effects.
# For Subject Agreements, the owner is the overlord and the target is the subject.

# Example:
#
# name_of_term_value = {
# 	term = name_of_term 					# References the term in agreement_terms that this value applies to
#
# 	owner_modifier = {						# A modifier that applies to the Agreement owner country. Can stack multiple times.
# 		my_owner_modifier = 1
# 	}
# 	target_modifier = {						# A modifier that applies to the Agreement target country. Can stack multiple times.
# 		my_target_modifier = 1
# 	}
# 	unique_owner_modifier = {				# A modifier that applies to the Agreement owner country. Only applies once.
# 		my_unique_owner_modifier = 1
# 	}
# 	unique_target_modifier = {				# A modifier that applies to the Agreement target country. Only applies once.
# 		my_unique_target_modifier = 1
# 	}
# 	loyalty_change = value					# How much the subject's loyalty will change when a new agreement with this term starts
# 	triggered_loyalty_change = {			# How much the subject's loyalty will additionally change when a new agreement with this term starts, if "trigger" is true
# 		trigger = {
# 			agreement_scope_trigger
# 		}
# 		loyalty_change = value
# 	}
# 	extra_term_text_subject = <LOC_KEY> 	# What should be shown in the "extra terms" panel for the subject if this term value is active (default is to not show it)
# 											# This loc key can use $SUBJECT$ and $OVERLORD$ to show the name of the relevant empire, and $MODIFIER$ to show the modifiers applying to the subject
# 	extra_term_text_overlord = <LOC_KEY>	# What should be shown in the "extra terms" panel for the overlord if this term value is active (default is to not show it)
# 											# Loc key can use $SUBJECT$ and $OVERLORD$ to show the name of the relevant empire, $MODIFIER$ for the overlord's modifiers, and $RESOURCES$ for the net resources it gains
# }
#
# name_of_resource_term_value = {
# 	term = name_of_resource_term
#	resource = <resource> (food/alloys/...)
# }

#以下协议帝国行省禁止使用
#	potential = { is_imperial_province_agreement = no }

joins_overlord_wars_none = {
	term = joins_overlord_wars
	activate_effect = {
		set_rule_join_overlord_wars = none
	}
	deactivate_effect = {
		set_rule_join_overlord_wars = none
	}

	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_bulwark
			NOT = {
				agreement_preset = preset_bulwark
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_subsidiary
			NOT = {
				agreement_preset = preset_subsidiary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

joins_overlord_wars_defensive = {
	term = joins_overlord_wars
	loyalty_change = -10
	triggered_loyalty_change = {
		trigger = {
			target = {
				OR = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
		loyalty_change = -10
	}
	activate_effect = {
		set_rule_join_overlord_wars = defensive
	}
	deactivate_effect = {
		set_rule_join_overlord_wars = none
	}
	target_modifier = {
		monthly_loyalty = -1
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

joins_overlord_wars_offensive = {
	term = joins_overlord_wars
	loyalty_change = -20
	triggered_loyalty_change = {
		trigger = {
			target = {
				OR = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
		loyalty_change = -20
	}
	activate_effect = {
		set_rule_join_overlord_wars = offensive
	}
	deactivate_effect = {
		set_rule_join_overlord_wars = none
	}
	target_modifier = {
		monthly_loyalty = -2
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

joins_overlord_wars_all = {
	term = joins_overlord_wars
	loyalty_change = -30
	triggered_loyalty_change = {
		trigger = {
			target = {
				OR = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
		loyalty_change = -30
	}
	activate_effect = {
		set_rule_join_overlord_wars = all
	}
	deactivate_effect = {
		set_rule_join_overlord_wars = none
	}
	target_modifier = {
		monthly_loyalty = -3
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}


joins_subject_wars_none = {
	term = joins_subject_wars
	activate_effect = {
		set_rule_join_subject_wars = none
	}
	deactivate_effect = {
		set_rule_join_subject_wars = none
	}

	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_scholarium
			NOT = {
				agreement_preset = preset_scholarium
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_protectorate
			NOT = {
				agreement_preset = preset_protectorate
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_feudal_society
			NOT = {
				owner = { has_civic = civic_feudal_realm }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_subsidiary
			NOT = {
				agreement_preset = preset_subsidiary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

joins_subject_wars_defensive = {
	term = joins_subject_wars
	loyalty_change = 5
	activate_effect = {
		set_rule_join_subject_wars = defensive
	}
	deactivate_effect = {
		set_rule_join_subject_wars = none
	}
	target_modifier = {
		monthly_loyalty = 0.5
	}
	potential = { is_imperial_province_agreement = no }
}

joins_subject_wars_offensive = {
	term = joins_subject_wars
	loyalty_change = 10
	activate_effect = {
		set_rule_join_subject_wars = offensive
	}
	deactivate_effect = {
		set_rule_join_subject_wars = none
	}
	target_modifier = {
		monthly_loyalty = 1
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_scholarium
			NOT = {
				agreement_preset = preset_scholarium
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_protectorate
			NOT = {
				agreement_preset = preset_protectorate
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

joins_subject_wars_all = {
	term = joins_subject_wars
	loyalty_change = 15
	activate_effect = {
		set_rule_join_subject_wars = all
	}
	deactivate_effect = {
		set_rule_join_subject_wars = none
	}
	target_modifier = {
		monthly_loyalty = 1.5
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

subject_can_be_integrated = {
	term = subject_integration
	loyalty_change = -50
	activate_effect = {
		set_rule_can_subject_be_integrated = yes
	}
	target_modifier = {
		monthly_loyalty = -4
	}

	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_bulwark
			NOT = {
				agreement_preset = preset_bulwark
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_scholarium
			NOT = {
				agreement_preset = preset_scholarium
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_prospectorium
			NOT = {
				agreement_preset = preset_prospectorium
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_subsidiary
			NOT = {
				agreement_preset = preset_subsidiary
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_galcom_resolution
			not_allowed_for_galcom_resolution_trigger = { RESOLUTION = resolution_intergalacticdirective_ensured_sovereignty }
		}
	}
	potential = { is_imperial_province_agreement = no }
}

subject_can_not_be_integrated = {
	term = subject_integration
	loyalty_change = 5
	activate_effect = {
		set_rule_can_subject_be_integrated = no
	}
	target_modifier = {
		monthly_loyalty = 0.5
	}
	potential = { is_imperial_province_agreement = no }
}

subject_can_not_do_diplomacy = {
	term = subject_diplomacy
	loyalty_change = -15
	activate_effect = {
		set_rule_can_subject_vote = no
		set_rule_can_subject_do_diplomacy = no
	}
	target_modifier = {
		monthly_loyalty = -1
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			NOT = {
				agreement_preset = preset_tributary
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_feudal_society
			NOT = {
				owner = { has_civic = civic_feudal_realm }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_franchising
			NOT = {
				owner = { has_civic = civic_franchising }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_subsidiary
			NOT = {
				agreement_preset = preset_subsidiary
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_galcom_resolution
			not_allowed_for_galcom_resolution_trigger = { RESOLUTION = resolution_intergalacticdirective_a_voice_for_all }
		}
	}
	potential = { is_imperial_province_agreement = no }
}

subject_can_do_diplomacy_but_not_vote = {
	term = subject_diplomacy
	loyalty_change = 0
	activate_effect = {
		set_rule_can_subject_vote = no
		set_rule_can_subject_do_diplomacy = yes
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			if = {
				limit = {
					NOR = {
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_bureaucraticsurveillance_personal_oversight
						}
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_intergalacticdirective_a_voice_for_all
						}
					}
				}
				NOT = { agreement_preset = preset_tributary }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_fanatic_purifiers
			if = {
				limit = {
					NOR = {
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_bureaucraticsurveillance_personal_oversight
						}
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_intergalacticdirective_a_voice_for_all
						}
					}
				}
				NOT = { target = { has_civic = civic_fanatic_purifiers } }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_devouring_swarm
			if = {
				limit = {
					NOR = {
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_bureaucraticsurveillance_personal_oversight
						}
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_intergalacticdirective_a_voice_for_all
						}
					}
				}
				NOT = { target = { has_civic = civic_hive_devouring_swarm } }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_machine_terminator
			if = {
				limit = {
					NOR = {
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_bureaucraticsurveillance_personal_oversight
						}
						AND = {
							owner = { is_galactic_community_member = yes }
							target = { is_galactic_community_member = yes }
							is_active_resolution = resolution_intergalacticdirective_a_voice_for_all
						}
					}
				}
				NOT = { target = { has_civic = civic_machine_terminator } }
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}

subject_can_do_diplomacy = {
	term = subject_diplomacy
	loyalty_change = 5
	activate_effect = {
		set_rule_can_subject_vote = yes
		set_rule_can_subject_do_diplomacy = yes
	}
	target_modifier = {
		monthly_loyalty = 0.5
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_galcom_resolution
			not_allowed_for_galcom_resolution_trigger = { RESOLUTION = resolution_bureaucraticsurveillance_personal_oversight }
		}
	}
	potential = { is_imperial_province_agreement = no }
}

#subject_cannot_expand

#subject_can_expand_with_tithe

#subject_can_expand

#subject_holdings_limit_0

#subject_holdings_limit_1

#subject_holdings_limit_2

#subject_holdings_limit_3

#subject_holdings_limit_4

subject_does_not_get_sensors = {
	term = subject_sensors
	loyalty_change = 0
	activate_effect = {
		set_rule_subject_has_sensors = no
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_franchising
			NOT = {
				owner = { has_civic = civic_franchising }
			}
		}
		custom_tooltip = {
			fail_text = not_allowed_for_galcom_resolution
			not_allowed_for_galcom_resolution_trigger = { RESOLUTION = resolution_bureaucraticsurveillance_borderless_authority }
		}
	}
	potential = { is_imperial_province_agreement = no }
}

subject_gets_sensors = {
	term = subject_sensors
	loyalty_change = 5
	activate_effect = {
		set_rule_subject_has_sensors = yes
	}
	target_modifier = {
		monthly_loyalty = 0.5
	}
	possible = {
		custom_tooltip = {
			fail_text = not_allowed_for_tributary
			if = {
				limit = {
					NAND = {
						owner = { is_galactic_community_member = yes }
						target = { is_galactic_community_member = yes }
						is_active_resolution = resolution_bureaucraticsurveillance_borderless_authority
					}
				}
				NOT = { agreement_preset = preset_tributary }
			}
		}
	}
	potential = { is_imperial_province_agreement = no }
}