# Checks if a pop can be assembled
# This = Species
# Root = Planet
can_species_be_assembled = {
	NOR = {
		has_trait = trait_hive_mind_overlord
		has_trait = trait_holodrone
	}
	is_sapient = yes
	OR = {
		AND = {
			is_robotic = yes
			root = {
				check_modifier_value = {
					modifier = planet_pop_assembly_add
					value > 0
				}
			}
		}
		AND = {
			is_organic_species = yes
			if = {
				limit = {
					root.owner = { is_hive_empire = yes }
				}
				has_trait = trait_hive_mind
			}
			else_if = {
				limit = { has_trait = trait_plantoid_budding }
				root = {
					any_owned_species = { is_exact_same_species = prevprev }
				}
			}
			### Lithoid supremacy Content
			else_if = {
				limit = { has_trait = trait_pearl_born_royal }
				root = {
					any_owned_species = { 
						OR = {
							has_trait = trait_pearl_born_drone 
							has_trait = trait_pearl_born_royal
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_trait = trait_clone_soldier_infertile
						has_trait = trait_clone_soldier_infertile_full_potential
					}
				}
				root = {
					# Event 'clones.3' should cover this, but extra safety check.
					has_building = building_clone_army_clone_vat
					NOT = {
						check_variable = {
							which = clone_pops_missing
							value = 0
						}
					}
				}
			}
			else_if = {
				limit = {
					root.owner = { has_civic = civic_permanent_employment }
				}
				root = {
					has_building = building_posthumous_employment_center
				}
			}
			else = {
				### Lithoid Supremacy Content
				#Replace interior of else with the following:
				OR = {
					root = { has_building = building_clone_vats }
					root = { has_building = building_crystallization_facilities }
					root = { has_building = building_ocean_spawning_pool }

					### DAoN compatibility, with permission from Inksitor
					root = { has_building = building_house_of_the_fleshsculpter }
                    root = { has_building = building_summoner_site }
					###
				}
				###
			}
		}
	}
	has_population_control = {
		value = no
		country = root.owner
	}
	NAND = {
		root = { owner = { has_valid_civic = civic_machine_replicators } }
		has_trait = trait_machine_central
	}
}