#root = planet
@small_planet_threshold = 18
@free_districts_verylow_threshold = 3
@free_districts_low_threshold = 5
@free_districts_medium_threshold = 10
@free_districts_high_threshold = 15
@built_districts_low_threshold = 3
@built_districts_medium_threshold = 4
@built_districts_high_threshold = 8

col_mining = {
	icon = GFX_colony_type_mine

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_mining_build_speed_mult = 0.25
		planet_miners_produces_mult = 0.25
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value > @free_districts_low_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mining value > @free_districts_medium_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_mining
		}
		modifier = {
			add = 5
			OR = {
				has_modifier = asteroid_belt
				has_modifier = mineral_rich
				has_modifier = ultra_rich
				has_modifier = extensive_moon_system
				has_modifier = asteroid_impacts
			}
		}
		modifier = {
			add = 5
			num_districts = { type = district_mining value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_mining value = 0 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}
# Farming Planet
col_farming = {
	icon = GFX_colony_type_farm

	potential = {
		exists = owner
		owner = { country_uses_food = yes }
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = machine_world
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_farming_build_speed_mult = 0.25
		planet_farmers_produces_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value > @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value > @free_districts_medium_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_farming
		}
		modifier = {
			add = 5
			has_modifier = lush_planet
		}
		modifier = {
			factor = 0.1
			has_modifier = bleak_planet
		}
		modifier = {
			add = 5
			num_districts = { type = district_farming value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_farming value = 0 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}

# Generator Planet
col_generator = {
	icon = GFX_colony_type_generator

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_generator_build_speed_mult = 0.25
		planet_technician_produces_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value > @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value > @free_districts_medium_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_generator
		}
		modifier = {
			add = 5
			OR = {
				has_modifier = hazardous_weather
				has_modifier = strong_magnetic_field
			}
		}
		modifier = {
			add = 5
				num_districts = { type = district_generator value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_generator value = 0 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}

col_refinery = {
	icon = GFX_colony_type_refinery

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_refiners_produces_mult = 0.1
		planet_translucers_produces_mult = 0.1
		planet_chemists_produces_mult = 0.1
		planet_building_refinery_build_speed_mult = 0.25
		planet_building_chemical_plant_build_speed_mult = 0.25
		planet_building_crystal_plant_build_speed_mult = 0.25
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
				is_active_resolution = "resolution_industry_6"
			}
		}
		modifier = {
			planet_refiners_produces_mult = 0.05
			planet_translucers_produces_mult = 0.05
			planet_chemists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		base = 1
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value <= @free_districts_low_threshold }
			num_free_districts = { type = district_farming value <= @free_districts_low_threshold }
			num_free_districts = { type = district_generator value <= @free_districts_low_threshold }
			OR = {
				AND = {
					num_districts = {
						type = district_city
						value >= 1
					}
					num_free_districts = { type = district_city value <= @free_districts_medium_threshold }
				}
				AND = {
					num_districts = {
						type = district_nexus
						value >= 1
					}
					num_free_districts = { type = district_nexus value <= @free_districts_medium_threshold }
				}
				AND = {
					num_districts = {
						type = district_hive
						value >= 1
					}
					num_free_districts = { type = district_hive value <= @free_districts_medium_threshold }
				}
			}
			OR = {
				owner = { has_monthly_income = { resource = volatile_motes value < 0 } }
				owner = { has_monthly_income = { resource = exotic_gases value < 0 } }
				owner = { has_monthly_income = { resource = rare_crystals value < 0 } }
			}
		}
		modifier = {
			add = 5
			has_designation = col_refinery
		}
		modifier = {
			add = 2
			num_buildings = { type = building_refinery value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_refinery value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_refinery value >= 4 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_crystal_plant value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_crystal_plant value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_crystal_plant value >= 4 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_chemical_plant value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_chemical_plant value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_chemical_plant value >= 4 }
		}
		modifier = {
			add = 10
				OR = {
					num_buildings = { type = building_refinery value >= 5 }
					num_buildings = { type = building_crystal_plant value >= 5 }
					num_buildings = { type = building_chemical_plant value >= 5 }
				}
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "manufacturing" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}

col_foundry = {
	icon = GFX_colony_type_foundry

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = machine_world
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		custom_tooltip = col_foundry_custom
		planet_district_industrial_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.20
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
				is_active_resolution = "resolution_industry_6"
			}
		}
		modifier = {
			planet_metallurgists_produces_mult = 0.05
		}
	}
	weight_modifier = {
		modifier = {
			add = 3
			OR = {
				num_free_districts = { type = district_city value = @free_districts_high_threshold }
				num_free_districts = { type = district_nexus value = @free_districts_high_threshold }
				num_free_districts = { type = district_hive value = @free_districts_high_threshold }
			}
			OR = {
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 10 }
					years_passed <= 20
					}
				}
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 20 }
					years_passed > 20
					years_passed < 50
					}
				}
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 40 }
					years_passed > 50
					years_passed < 75
					}
				}
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 50 }
					years_passed > 75
					years_passed < 100
					}
				}
			}
		}

		modifier = {
			add = 7
			has_designation = col_foundry
		}

		modifier = {
			add = 50
			has_designation = col_factory
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 950
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 10
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 750
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 15
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 550
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 20
					}
				}
			}
		}
		modifier = {
			add = 50
			has_designation = col_factory
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 850
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 10
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 650
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 15
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 450
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 20
					}
				}
			}
		}
		modifier = {
			add = 50
			has_designation = col_factory
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 750
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 10
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 550
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 15
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 350
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 20
					}
				}
			}
		}
	
		modifier = {
			add = 50
			owner = {
			has_deficit = consumer_goods
			resource_stockpile_compare = {
				resource = food
				value < 300
			}
			resource_income_compare = {
				resource = food
				value < -12
			}
			resource_income_compare = {
				resource = energy
				value < 10
			}
			resource_stockpile_compare = {
				resource = energy
				value < 1000
			} }
		}


		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 1 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 2 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 3 }
		}
		modifier = {
			add = 10
			num_districts = { type = district_industrial value >= 4 }
		}
		modifier = {
			add = 10
			num_districts = { type = district_industrial value >= 6 }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_industrial value = 0 }
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			add = 2
			owner = {
			resource_income_compare = {
				resource = consumer_goods
				value > 20
			}
			resource_income_compare = {
				resource = consumer_goods
				value > 1000
			} }
			num_buildings = { type = building_factory_1 value = 0 }
			num_buildings = { type = building_factory_2 value = 0 }
		}
		modifier = {
			factor = 0
			not = { owner = {
			has_deficit = consumer_goods
			resource_stockpile_compare = {
				resource = food
				value < 300
			}
			resource_income_compare = {
				resource = food
				value < -12
			}
			resource_income_compare = {
				resource = energy
				value < 10
			}
			resource_stockpile_compare = {
				resource = energy
				value < 1000
			} } }
			owner = {
			or = {
			and = {
			resource_stockpile_compare = {
				resource = minerals
				value < 100
			}
			resource_stockpile_compare = {
				resource = minerals
				value < 5
			}
			}
			and = {
				resource_stockpile_compare = {
					resource = food
					value < 200
				}
				resource_stockpile_compare = {
					resource = food
					value < -50
				}
			}
			and = {
				resource_stockpile_compare = {
					resource = food
					value < 100
				}
				resource_stockpile_compare = {
					resource = food
					value < -15
				}
			}
			} 
		}
		}
		modifier = {
			add = 2
			owner = {
			resource_income_compare = {
				resource = consumer_goods
				value > 20
			}
			resource_income_compare = {
				resource = consumer_goods
				value > 1000
			} }
		}
	}
}

col_fortress = {
	icon = GFX_colony_type_fortress

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_building_stronghold_build_speed_mult = 0.25
		planet_orbital_bombardment_damage = -0.10
		army_defense_damage_mult = 0.20
	}

	weight_modifier = {
		modifier = {
			add = 5
			has_designation = col_fortress
		}
		modifier = {
			add = 3
			num_buildings = { type = building_stronghold value >= 2 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_stronghold value >= 3 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_stronghold value >= 4 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_fortress value >= 1 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_fortress value >= 2 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
			}
		}
	}
}

# Habitat Energy
col_habitat_energy = {
	icon = GFX_colony_type_habitat_energy

	potential = {
		uses_district_set = habitat
		exists = owner
		OR = {
			owner = { is_gestalt = yes }
			has_planet_flag = energy_habitat
		}
	}
	planet_modifier = {
		planet_district_hab_energy_build_speed_mult = 0.25
		planet_technician_produces_mult = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}
	weight_modifier = {
		base = 200
		modifier = {
			factor = 2
			owner = { has_monthly_income = { resource = energy value < 0 } }
		}
		modifier = {
			factor = 3
			has_designation = col_habitat_energy
		}
		modifier = {
			factor = 3
			num_districts = { type = district_hab_energy value >= 3 }
		}
		modifier = {
			factor = 5
			has_planet_flag = energy_habitat
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
		}
		}
	}
}
# Habitat Mining
col_habitat_mining = {
	icon = GFX_colony_type_habitat_mining

	potential = {
		uses_district_set = habitat
		has_planet_flag = mining_habitat
	}
	planet_modifier = {
		planet_district_hab_mining_build_speed_mult = 0.25
		planet_miners_produces_mult = 0.1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		base = 1000
		modifier = {
			factor = 2
			owner = { has_monthly_income = { resource = minerals value < 0 } }
		}
		modifier = {
			factor = 3
			has_designation = col_habitat_mining
		}
		modifier = {
			factor = 3
			num_districts = { type = district_hab_mining value >= 3 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
		}
		}
	}
}

# Habitat Foundry
col_habitat_foundry = {
	icon = GFX_colony_type_habitat_foundry

	# used by AI to estimate what will happen when we change the designation
	ai_resource_conversion = {
		consumer_goods = 0
		alloys = 2

		trigger = {
			owner = {
				is_gestalt = no
			}
		}
	}

	ai_resource_current_conversion = {
		alloys = 0.5
		consumer_goods = -2

		trigger = {
			owner = {
				is_gestalt = no
			}
		}
	}

	potential = {
		uses_district_set = habitat
	}
		custom_tooltip = col_habitat_foundry_custom
	planet_modifier = {
		planet_district_hab_industrial_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
				is_active_resolution = "resolution_industry_6"
			}
		}
		modifier = {
			planet_metallurgists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		base = 300
		modifier = {
			factor = 2
			owner = { has_monthly_income = { resource = alloys value < 10 } }
		}
		modifier = {
			factor = 3
			has_designation = col_habitat_foundry
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			factor = 0
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
			NOT = { num_districts = { type = district_hab_industrial value >= 3 } }
			}	
		modifier = {
			factor = 3
			num_districts = { type = district_hab_industrial value >= 3 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "manufacturing" }
				not = { has_sector_focus = "balanced" }
			}	
		}
	}
}

# Habitat Refinery
col_habitat_refinery = {
	icon = GFX_colony_type_habitat_refinery

	potential = {
		uses_district_set = habitat
	}
	planet_modifier = {
		planet_building_refinery_build_speed_mult = 0.25
		planet_building_chemical_plant_build_speed_mult = 0.25
		planet_building_crystal_plant_build_speed_mult = 0.25
		planet_refiners_produces_mult = 0.1
		planet_translucers_produces_mult = 0.1
		planet_chemists_produces_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
				is_active_resolution = "resolution_industry_6"
			}
		}
		modifier = {
			planet_refiners_produces_mult = 0.05
			planet_translucers_produces_mult = 0.05
			planet_chemists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		base = 500
		modifier = {
			factor = 0
			NOR = {
				has_building = building_refinery
				has_building = building_crystal_plant
				has_building = building_chemical_plant
			}
		}
		modifier = {
			factor = 2
			owner = {
				OR = {
					has_monthly_income = { resource = volatile_motes value < 0 }
					has_monthly_income = { resource = exotic_gases value < 0 }
					has_monthly_income = { resource = rare_crystals value < 0 }
				}
			}
		}
		modifier = {
			factor = 3
			has_designation = col_habitat_refinery
		}
		modifier = {
			factor = 2
			num_buildings = { type = building_refinery value >= 2 }
		}
		modifier = {
			factor = 3
			num_buildings = { type = building_refinery value >= 3 }
		}
		modifier = {
			factor = 2
			num_buildings = { type = building_crystal_plant value >= 2 }
		}
		modifier = {
			factor = 3
			num_buildings = { type = building_crystal_plant value >= 3 }
		}
		modifier = {
			factor = 3
			num_buildings = { type = building_crystal_plant value >= 4 }
		}
		modifier = {
			factor = 2
			num_buildings = { type = building_chemical_plant value >= 2 }
		}
		modifier = {
			factor = 3
			num_buildings = { type = building_chemical_plant value >= 3 }
		}
		modifier = {
			factor = 5
			OR = {
				num_buildings = { type = building_refinery value >= 4 }
				num_buildings = { type = building_crystal_plant value >= 4 }
				num_buildings = { type = building_chemical_plant value >= 4 }
			}
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "manufacturing" }
				not = { has_sector_focus = "balanced" }
		}
		}
	}
}

col_ring_farming = {
	icon = GFX_colony_type_farm

	potential = {
		uses_district_set = ring_world
	}

	planet_modifier = {
		planet_farmers_food_produces_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 100
			has_designation = col_ring_farming
		}
		modifier = {
			add = 200
			is_capital = no
			num_districts = { type = district_rw_farming value >= 1 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}

col_ring_generator = {
	icon = GFX_colony_type_generator

	potential = {
		uses_district_set = ring_world
		exists = owner
		owner = { is_gestalt = yes }
	}

	planet_modifier = {
		planet_technician_energy_produces_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
				is_active_resolution = "resolution_greatergood_6"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 100
			has_designation = col_ring_generator
		}
		modifier = {
			add = 200
			is_capital = no
			num_districts = { type = district_rw_generator value >= 1 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "production" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}

# Ecumenpolis Foundry
col_ecu_foundry = {
	icon = GFX_colony_type_foundry

	# used by AI to estimate what will happen when we change the designation
	ai_resource_conversion = {
		consumer_goods = 0
		alloys = 2

		trigger = {
			always = yes
		}
	}

	ai_resource_current_conversion = {
		alloys = 0.5
		consumer_goods = -2

		trigger = {
			always = yes
		}
	}

	potential = {
		uses_district_set = city_world
	}

	# used by AI to estimate what will happen when we change the designation
	ai_resource_conversion = {
		consumer_goods = 0
		alloys = 2

		trigger = {
			owner = {
				is_gestalt = no
			}
		}
	}

	ai_resource_current_conversion = {
		alloys = 0.5
		consumer_goods = -2

		trigger = {
			owner = {
				is_gestalt = no
			}
		}
	}

	planet_modifier = {
		planet_building_foundry_1_build_speed_mult = 0.25
		planet_district_arcology_arms_industry_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
				is_active_resolution = "resolution_industry_6"
			}
		}
		modifier = {
			planet_metallurgists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = alloys value < 100 } }
		}
		modifier = {
			add = 5
			has_designation = col_ecu_foundry
		}
		modifier = {
			add = 3
			num_districts = { type = district_arcology_arms_industry value >= 2 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_arcology_arms_industry value >= 3 }
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			factor = 0
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "manufacturing" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}

# Hive World Foundry
col_hiv_foundry = {
	icon = GFX_colony_type_foundry

	potential = {
		uses_district_set = hive_world
	}

	planet_modifier = {
		planet_district_industrial_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.20
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
				is_active_resolution = "resolution_industry_6"
			}
		}
		modifier = {
			planet_metallurgists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = alloys value < 100 } }
		}
		modifier = {
			add = 5
			has_designation = col_hiv_foundry
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			NOT = { num_districts = { type = district_industrial value >= @built_districts_medium_threshold } }
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
		}
		modifier = {
			factor = 0
			exists = sector
			sector = {
				has_any_sector_focus = yes
				not = { has_sector_focus = "manufacturing" }
				not = { has_sector_focus = "balanced" }
			}
		}
	}
}