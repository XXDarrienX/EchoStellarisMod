## Possible Deposit Variables ##
# resources, resource and amount
# potential trigger (planet scope)
# blocked_modifier - applied to planet only when deposit blocker has been cleared
# constant_modifier - applied to planet always
# blocker = <key/any/none> - default any
# station = station class in orbit to gather

#Starlit Citadel
d_bioship_remains = { #Biological Ship Remains
	is_for_colonizable = yes
	icon = d_bioship_remains
	category = deposit_cat_blockers
	time = 360

	potential = { always = no }

	can_be_cleared = { always = yes }

	planet_modifier = {
		pop_environment_tolerance = -0.10
		pop_happiness = -0.05
		planet_max_districts_add = -1
	}

	on_cleared = {
		hidden_effect = {
			if = {
				limit = {
					any_owned_pop_group = {
						NOT = { has_trait = trait_hive_mind }
						is_robot_pop = no
					}
				}
				random_owned_pop_group = {
					limit = {
						NOT = { has_trait = trait_hive_mind }
						is_robot_pop = no
					}
					root = {
						create_pop_group = {
							species = prev
						}
					}
				}
			}
			else = {
				random_owned_pop_group = {
					root = {
						create_pop_group = {
							species = prev
						}
					}
				}
			}
		}
		custom_tooltip = d_decrepit_dwellings_custom_tooltip
	}

	inline_script = deposits/ai_weight_pop_creating_blocker

	resources = {
		category = deposit_blockers
		cost = {
			energy = 400
		}
	}
}

d_invasion_site = { #Invasion Site
	is_for_colonizable = yes
	icon = d_city_ruins
	category = deposit_cat_blockers
	time = 180

	potential = { always = no }

	can_be_cleared = { always = yes }

	planet_modifier = {
		planet_max_districts_add = -1
	}

	on_cleared = {
		hidden_effect = {
			if = {
				limit = {
					exists = owner
				}
				owner = {
					add_monthly_resource_mult = {
						resource = unity
						value = @tier1unityreward
						min = @tier1unitymin
						max = @tier1unitymax
					}
				}
			}
		custom_tooltip = d_invasion_site_tooltip
		}
	}

	inline_script = deposits/ai_weight_natural_blocker

	resources = {
		category = deposit_blockers
		cost = {
			energy = 300
			minerals = 200
		}
	}
}

d_kaiju_lair = { #Kaiju Lair
	is_for_colonizable = yes
	icon = d_boneyard
	category = deposit_cat_blockers
	time = 180

	potential = { always = no }

	can_be_cleared = { always = yes }

	planet_modifier = {
		planet_max_districts_add = -1
	}

	on_cleared = {
		custom_tooltip = kaiju_lair_tt
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = rampaging_kaijus_created }
				}
				create_country = {
					name = "NAME_Rampaging_Kaijus"
					type = faction
					effect = {
						establish_communications_no_message = root.owner
					}
				}
				last_created_country = {
					save_global_event_target_as = rampaging_kaijus
				}
			}

			create_army = {
				name = "NAME_Behemoth_Army"
				owner = event_target:rampaging_kaijus
				type = "behemoth_army"
			}

			random_list = { #Add variance to the number of Kaijus that need to be fought
				30 = {}
				30 = {
					create_army = {
						name = "NAME_Behemoth_Army"
						owner = event_target:rampaging_kaijus
						type = "behemoth_army"
					}
				}
				30 = {
					create_army = {
						name = "NAME_Behemoth_Army"
						owner = event_target:rampaging_kaijus
						type = "behemoth_army"
					}
					create_army = {
						name = "NAME_Behemoth_Army"
						owner = event_target:rampaging_kaijus
						type = "behemoth_army"
					}
				}
				10 = {
					create_army = {
						name = "NAME_Behemoth_Army"
						owner = event_target:rampaging_kaijus
						type = "behemoth_army"
					}
					create_army = {
						name = "NAME_Behemoth_Army"
						owner = event_target:rampaging_kaijus
						type = "behemoth_army"
					}
					create_army = {
						name = "NAME_Behemoth_Army"
						owner = event_target:rampaging_kaijus
						type = "behemoth_army"
					}
				}
			}
		}
	}

	ai_weight = {
		weight = 0 #The AI shouldn't try to clear it
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 300
		}
	}
}

d_devastated_cities = { #Devastated Settlements
	is_for_colonizable = yes
	icon = d_city_ruins
	category = deposit_cat_blockers
	time = 180

	potential = { always = no }

	can_be_cleared = { always = yes }

	planet_modifier = {
		planet_max_districts_add = -2
		planet_amenities_mult = -0.3
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 4000
		}
	}
}

d_devoured_continent = { #Devoured Continent
	is_for_colonizable = yes
	icon = d_unpleasant_atmosphere_blocker
	category = deposit_cat_blockers
	time = 180

	potential = { always = no }

	can_be_cleared = { always = yes }

	planet_modifier = {
		planet_max_districts_add = -2
		pop_environment_tolerance = -0.25
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 6000
		}
	}
}
